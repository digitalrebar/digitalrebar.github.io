[
    {
        "type": "message",
        "user": "U8U5XTV97",
        "text": "<@U416T0AAX> I've also had some issues with the preseed and disk partitioning. Seems like some preseed options in the default template (btw part-scheme-default.tmpl got incorrect options) are in the wrong order which cause partitioning to not work correctly. Took a couple of hours for me to track it down but not had time to make a pull request yet",
        "ts": "1517929158.000080"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "<@U8U5XTV97> Thx for info; want to share your findings in the meantime?",
        "ts": "1517931334.000227"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "I'm slowly piecing together (trial\/error due to poor docu) a partitioning sub-template that does \/boot, \/boot\/efi, and then rest of disk for LVM PV that then gets split into multiple LV's (in one VG)",
        "ts": "1517931437.000177"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "My as-of-now preseed partitioning is thus:",
        "ts": "1517935843.000137"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F95HV961L\/preseed_partitioning_du_jour.txt|preseed partitioning du jour>",
        "file": {
            "id": "F95HV961L",
            "created": 1517935865,
            "timestamp": 1517935865,
            "name": "preseed_partitioning_du_jour.txt",
            "title": "preseed partitioning du jour",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U416T0AAX",
            "editable": true,
            "size": 2982,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F95HV961L\/preseed_partitioning_du_jour.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F95HV961L\/download\/preseed_partitioning_du_jour.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F95HV961L\/preseed_partitioning_du_jour.txt",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F95HV961L-c6af3e366b",
            "edit_link": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F95HV961L\/preseed_partitioning_du_jour.txt\/edit",
            "preview": "# Partitioner Label Default (GPT)\r\nd-i partman\/choose_label string gpt\r\nd-i partman-basicfilesystems\/choose_label string gpt\r\nd-i partman-partitioning\/choose_label string gpt\r\nd-i partman\/default_label string gpt\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre># Partitioner Label Default (GPT)<\/pre><\/div>\n<div><pre>d-i partman\/choose_label string gpt<\/pre><\/div>\n<div><pre>d-i partman-basicfilesystems\/choose_label string gpt<\/pre><\/div>\n<div><pre>d-i partman-partitioning\/choose_label string gpt<\/pre><\/div>\n<div><pre>d-i partman\/default_label string gpt<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 59,
            "lines_more": 54,
            "preview_is_truncated": true,
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "ts": "1517935866.000065"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Funny thing is, is does the right thing on a HDD of 1TB or more; but on &gt;1TB (tried on 500GB &amp; 250GB) it just makes LV's for swap and root, no \/home...)",
        "ts": "1517935941.000863"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "I think the weight values are funky, but they are exactly what the \"kickseed\" tool produced",
        "ts": "1517936247.000525"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "So, what's the correct syntax to spec a couple of \"Params\" values on a machine? Did this, failed:\n```$ drpcli machines update 985a9585-1923-491d-b813-1070a3c11f51 '\"Params\": { \"part-scheme\": \"separate_home-TEST\", \"select-kickseed\": \"necla-ubu-seed.tmpl\" }'\nError: Failed to generate changed machines:985a9585-1923-491d-b813-1070a3c11f51 object: invalid character ':' after top-level value```",
        "edited": {
            "user": "U416T0AAX",
            "ts": "1517946544.000000"
        },
        "ts": "1517946520.000266"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "use the get or set cli commands",
        "ts": "1517946774.000208"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "`drpcli machines set &lt;uuid&gt; param &lt;param-name&gt; to &lt;value&gt;`",
        "edited": {
            "user": "U02DGQYK1",
            "ts": "1517946799.000000"
        },
        "ts": "1517946796.000278"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Looked in <http:\/\/provision.readthedocs.io\/en\/latest\/doc\/faq-troubleshooting.html> - no clues there...",
        "ts": "1517948150.000074"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Thx <@U02DGQYK1>",
        "ts": "1517948155.000456"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "No way to set multiple with the same command?",
        "ts": "1517948293.000270"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "the update you were doing is the way.",
        "ts": "1517948372.000331"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "```drpcli machines update 985a9585-1923-491d-b813-1070a3c11f51 '\"{ Params\": { \"part-scheme\": \"separate_home-TEST\", \"select-kickseed\": \"necla-ubu-seed.tmpl\" } }'```",
        "ts": "1517948393.000325"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Note the extra {}",
        "ts": "1517948400.000096"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "To remove parameters, you have to use the remove subcommand.",
        "ts": "1517948437.000619"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Ah, OK",
        "ts": "1517948955.000034"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "`remove` instead of `update`, or instead of `set`?",
        "ts": "1517948985.000536"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "OK, it's like `$ drpcli machines remove 985a9585-1923-491d-b813-1070a3c11f51 param \"part-scheme\"`",
        "ts": "1517950014.000425"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Next issue: using the default DRP preseed partitioning, as so:",
        "ts": "1517950072.000011"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F94SEENS0\/default_partitioning_receipe.txt|default partitioning receipe>",
        "file": {
            "id": "F94SEENS0",
            "created": 1517950128,
            "timestamp": 1517950128,
            "name": "default_partitioning_receipe.txt",
            "title": "default partitioning receipe",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U416T0AAX",
            "editable": true,
            "size": 1953,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F94SEENS0\/default_partitioning_receipe.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F94SEENS0\/download\/default_partitioning_receipe.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F94SEENS0\/default_partitioning_receipe.txt",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F94SEENS0-f94e325377",
            "edit_link": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F94SEENS0\/default_partitioning_receipe.txt\/edit",
            "preview": "# Partitioner Label Default (GPT)\r\nd-i partman\/choose_label string gpt\r\nd-i partman-basicfilesystems\/choose_label string gpt\r\nd-i partman-partitioning\/choose_label string gpt\r\nd-i partman\/default_label string gpt\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre># Partitioner Label Default (GPT)<\/pre><\/div>\n<div><pre>d-i partman\/choose_label string gpt<\/pre><\/div>\n<div><pre>d-i partman-basicfilesystems\/choose_label string gpt<\/pre><\/div>\n<div><pre>d-i partman-partitioning\/choose_label string gpt<\/pre><\/div>\n<div><pre>d-i partman\/default_label string gpt<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 39,
            "lines_more": 34,
            "preview_is_truncated": true,
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "ts": "1517950129.000099"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": " But getting this when the install hits the partitioning step:",
        "client_msg_id": "EFF580EE-81B0-41AF-8A10-FD7E36EA474B",
        "ts": "1517950171.000148"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F947V0S3S\/image_uploaded_from_ios.jpg|Image uploaded from iOS>",
        "file": {
            "id": "F947V0S3S",
            "created": 1517950256,
            "timestamp": 1517950256,
            "name": "Image uploaded from iOS.jpg",
            "title": "Image uploaded from iOS",
            "mimetype": "image\/jpeg",
            "filetype": "jpg",
            "pretty_type": "JPEG",
            "user": "U416T0AAX",
            "editable": false,
            "size": 3236531,
            "mode": "hosted",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F947V0S3S\/image_uploaded_from_ios.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F947V0S3S\/download\/image_uploaded_from_ios.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_64": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F947V0S3S-47ce95d59f\/image_uploaded_from_ios_64.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_80": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F947V0S3S-47ce95d59f\/image_uploaded_from_ios_80.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_360": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F947V0S3S-47ce95d59f\/image_uploaded_from_ios_360.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_360_w": 360,
            "thumb_360_h": 270,
            "thumb_480": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F947V0S3S-47ce95d59f\/image_uploaded_from_ios_480.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_480_w": 480,
            "thumb_480_h": 360,
            "thumb_160": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F947V0S3S-47ce95d59f\/image_uploaded_from_ios_160.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_720": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F947V0S3S-47ce95d59f\/image_uploaded_from_ios_720.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_720_w": 720,
            "thumb_720_h": 540,
            "thumb_800": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F947V0S3S-47ce95d59f\/image_uploaded_from_ios_800.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_800_w": 800,
            "thumb_800_h": 600,
            "thumb_960": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F947V0S3S-47ce95d59f\/image_uploaded_from_ios_960.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_960_w": 960,
            "thumb_960_h": 720,
            "thumb_1024": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F947V0S3S-47ce95d59f\/image_uploaded_from_ios_1024.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_1024_w": 1024,
            "thumb_1024_h": 768,
            "image_exif_rotation": 1,
            "original_w": 4032,
            "original_h": 3024,
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F947V0S3S\/image_uploaded_from_ios.jpg",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F947V0S3S-d0b52c16cc",
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "upload_reply_to": "DC45D76D-DFFD-4018-BC2C-EEE5B697D566",
        "ts": "1517950261.000516"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "<!here> ^^^ anyone?",
        "ts": "1517953325.000547"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "umm - start with checking the machine’s aggregate parameters to see what is going on to make sure all is unset.",
        "ts": "1517953666.000073"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "<@U02DGQYK1> You mean this?",
        "ts": "1517954409.000203"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F9495AEUQ\/machine_json.txt|machine JSON>",
        "file": {
            "id": "F9495AEUQ",
            "created": 1517954452,
            "timestamp": 1517954452,
            "name": "machine_JSON.txt",
            "title": "machine JSON",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U416T0AAX",
            "editable": true,
            "size": 1019,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F9495AEUQ\/machine_json.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F9495AEUQ\/download\/machine_json.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F9495AEUQ\/machine_json.txt",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F9495AEUQ-ca309c6fff",
            "edit_link": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F9495AEUQ\/machine_json.txt\/edit",
            "preview": "$ drpcli machines show 985a9585-1923-491d-b813-1070a3c11f51 | jq 'del(.Params.\"gohai-inventory\")'\r\n{\r\n  \"Address\": \"192.168.1.138\",\r\n  \"Available\": true,\r\n  \"BootEnv\": \"ubuntu-16.04-install\",\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>$ drpcli machines show 985a9585-1923-491d-b813-1070a3c11f51 | jq 'del(.Params.&quot;gohai-inventory&quot;)'<\/pre><\/div>\n<div><pre>{<\/pre><\/div>\n<div><pre>  &quot;Address&quot;: &quot;192.168.1.138&quot;,<\/pre><\/div>\n<div><pre>  &quot;Available&quot;: true,<\/pre><\/div>\n<div><pre>  &quot;BootEnv&quot;: &quot;ubuntu-16.04-install&quot;,<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 43,
            "lines_more": 38,
            "preview_is_truncated": false,
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "ts": "1517954453.000225"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "The `\"Params:\"` section?",
        "ts": "1517954498.000374"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "if you add `--aggregate` it will include parameters.",
        "ts": "1517954560.000199"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "It appears you are using your own preseed.",
        "ts": "1517954623.000028"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Yes, but pulls in DRP default partitioning (`part-scheme-default.tmpl`)",
        "ts": "1517954689.000146"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Doing it wrong, I guess:\n```$ drpcli machines show 985a9585-1923-491d-b813-1070a3c11f51 --aggregate | jq 'del(.Params.\"gohai-inventory\")'\nError: unknown flag: --aggregate\nUsage:\n  drpcli machines show [id] [flags]```",
        "ts": "1517954712.000458"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "sorry",
        "ts": "1517954757.000275"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "`drpcli machines params &lt;uuid&gt; --aggregate`",
        "ts": "1517954769.000528"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "it restricts to just parameters.",
        "ts": "1517954787.000536"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "One tests would be unset kickseed and see what happens.",
        "ts": "1517954819.000635"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F94C9R27K\/machine_aggregate_params.txt|machine aggregate params>",
        "file": {
            "id": "F94C9R27K",
            "created": 1517954891,
            "timestamp": 1517954891,
            "name": "machine_aggregate_params.txt",
            "title": "machine aggregate params",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U416T0AAX",
            "editable": true,
            "size": 694,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F94C9R27K\/machine_aggregate_params.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F94C9R27K\/download\/machine_aggregate_params.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F94C9R27K\/machine_aggregate_params.txt",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F94C9R27K-aacd1927bc",
            "edit_link": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F94C9R27K\/machine_aggregate_params.txt\/edit",
            "preview": "$ drpcli machines params 985a9585-1923-491d-b813-1070a3c11f51 --aggregate | jq 'del(.\"gohai-inventory\")'\r\n{\r\n  \"access-keys\": {\r\n    \"root\": \"ssh-rsa ****** will@Wills-MacBook-Air\"\r\n  },\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>$ drpcli machines params 985a9585-1923-491d-b813-1070a3c11f51 --aggregate | jq 'del(.&quot;gohai-inventory&quot;)'<\/pre><\/div>\n<div><pre>{<\/pre><\/div>\n<div><pre>  &quot;access-keys&quot;: {<\/pre><\/div>\n<div><pre>    &quot;root&quot;: &quot;ssh-rsa ****** will@Wills-MacBook-Air&quot;<\/pre><\/div>\n<div><pre>  },<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 22,
            "lines_more": 17,
            "preview_is_truncated": false,
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "ts": "1517954892.000400"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "OK, trying one machine with stock DRP preseed, we'll see what happens...",
        "ts": "1517955878.000339"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "So, when I create\/edit my own templates, where do they live in the filesystem? In `saas-content`?",
        "ts": "1517956002.000307"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Because from now on, I'm version-controlling the hell out of them...",
        "ts": "1517956042.000013"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "They are in the writable store.  That is why I in general don’t use clone actions, but create my own content bundle.",
        "ts": "1517956082.000400"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Where is that?",
        "ts": "1517956111.000083"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "I create a directory, git init, throw in some files and then use `drpcli contents bundle`",
        "edited": {
            "user": "U02DGQYK1",
            "ts": "1517956242.000000"
        },
        "ts": "1517956237.000529"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "to build a content bundle that I upload.",
        "ts": "1517956254.000355"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Sounds like the way to go...",
        "ts": "1517957216.000094"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Any docu on that process?",
        "ts": "1517957229.000219"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "<@U416T0AAX> we are creating a video for this.  Our first attempt was pretty close, but needs to be updated for sound quality.  <https:\/\/youtu.be\/yy7-2D4jXXg>",
        "attachments": [
            {
                "service_name": "YouTube",
                "service_url": "https:\/\/www.youtube.com\/",
                "title": "Digital Rebar Training   how to add a task",
                "title_link": "https:\/\/youtu.be\/yy7-2D4jXXg",
                "author_name": "RackN & Digital Rebar",
                "author_link": "https:\/\/www.youtube.com\/channel\/UCr3bBtP-pMsDQ5c0IDjt_LQ",
                "thumb_url": "https:\/\/i.ytimg.com\/vi\/yy7-2D4jXXg\/hqdefault.jpg",
                "thumb_width": 480,
                "thumb_height": 360,
                "fallback": "YouTube Video: Digital Rebar Training   how to add a task",
                "video_html": "<iframe width=\"400\" height=\"225\" src=\"https:\/\/www.youtube.com\/embed\/yy7-2D4jXXg?feature=oembed&autoplay=1&iv_load_policy=3\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen><\/iframe>",
                "video_html_width": 400,
                "video_html_height": 225,
                "from_url": "https:\/\/youtu.be\/yy7-2D4jXXg",
                "service_icon": "https:\/\/a.slack-edge.com\/2089\/img\/unfurl_icons\/youtube.png",
                "id": 1
            }
        ],
        "ts": "1517957233.000175"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Will check out... thx <@U02DHRR2L>",
        "ts": "1517957261.000017"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "OK, booted a new machine, only changed the name &amp; profile, NO custom preseed\/partitioning set, still getting the \"No root file system is defined\" error...",
        "ts": "1517958102.000018"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F961JQTP1\/machine_json.txt|machine JSON>",
        "file": {
            "id": "F961JQTP1",
            "created": 1517958235,
            "timestamp": 1517958235,
            "name": "machine_JSON.txt",
            "title": "machine JSON",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U416T0AAX",
            "editable": true,
            "size": 991,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F961JQTP1\/machine_json.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F961JQTP1\/download\/machine_json.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F961JQTP1\/machine_json.txt",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F961JQTP1-d10e8d073b",
            "edit_link": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F961JQTP1\/machine_json.txt\/edit",
            "preview": "[dradmin@dr-admin drp]$ drpcli machines show bfb891c4-a28c-460b-b667-b410d330032f | jq 'del(.Params.\"gohai-inventory\")'\r\n{\r\n  \"Address\": \"192.168.1.138\",\r\n  \"Available\": true,\r\n  \"BootEnv\": \"ubuntu-16.04-install\",\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>[dradmin@dr-admin drp]$ drpcli machines show bfb891c4-a28c-460b-b667-b410d330032f | jq 'del(.Params.&quot;gohai-inventory&quot;)'<\/pre><\/div>\n<div><pre>{<\/pre><\/div>\n<div><pre>  &quot;Address&quot;: &quot;192.168.1.138&quot;,<\/pre><\/div>\n<div><pre>  &quot;Available&quot;: true,<\/pre><\/div>\n<div><pre>  &quot;BootEnv&quot;: &quot;ubuntu-16.04-install&quot;,<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 41,
            "lines_more": 36,
            "preview_is_truncated": false,
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "ts": "1517958236.000330"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F94D5HUN5\/generated_preseed.txt|generated preseed>",
        "file": {
            "id": "F94D5HUN5",
            "created": 1517958286,
            "timestamp": 1517958286,
            "name": "generated_preseed.txt",
            "title": "generated preseed",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U416T0AAX",
            "editable": true,
            "size": 4348,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F94D5HUN5\/generated_preseed.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F94D5HUN5\/download\/generated_preseed.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F94D5HUN5\/generated_preseed.txt",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F94D5HUN5-5ea30d7d4a",
            "edit_link": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F94D5HUN5\/generated_preseed.txt\/edit",
            "preview": "\r\n# Rebar seed file for Debian\/Ubuntu installs\r\n# Locale and Language Settings\r\nd-i debian-installer\/locale string en_US.UTF-8\r\nd-i console-setup\/ask_detect boolean false\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre><\/pre><\/div>\n<div><pre># Rebar seed file for Debian\/Ubuntu installs<\/pre><\/div>\n<div><pre># Locale and Language Settings<\/pre><\/div>\n<div><pre>d-i debian-installer\/locale string en_US.UTF-8<\/pre><\/div>\n<div><pre>d-i console-setup\/ask_detect boolean false<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 100,
            "lines_more": 95,
            "preview_is_truncated": true,
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "ts": "1517958287.000115"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Can anyone <!here> see any problems in the generated preseed? Should be DRP standard...",
        "ts": "1517958327.000132"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "You could try to boot into sledgehammer and check to see if the disk is already partitioned, if so, wipe it (like in the erase-disk task), and try.  See if the LVM pre-existing is getting in the way.",
        "ts": "1517959703.000189"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "I actually did do that (the disk was used, did have pre-existing LVM; I did a `vgremove` then `pvremove` and thereafter `dd if=\/dev\/zero of=\/dev\/sda bs=512 count=1` to wipe MBR + part tbl",
        "ts": "1517959948.000346"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "So to DRP should look like a blank disk.",
        "ts": "1517959987.000076"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "it isn’t DRP - it is ubuntu.",
        "ts": "1517960082.000109"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "You are right",
        "ts": "1517960095.000135"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "But anyways.",
        "ts": "1517960102.000330"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "You may need to add the erase-hard-disks-for-os-install  to your flow.",
        "ts": "1517960299.000153"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "it does this:\n```\n#!\/bin\/bash\n# Nuke it all.\ndeclare vg pv maj min blocks name\n# Make sure that the kernel knows about all the partitions\nfor bd in \/sys\/block\/sd*; do\n    [[ -b \/dev\/${bd##*\/} ]] || continue\n    partprobe \"\/dev\/${bd##*\/}\" || :\ndone\n# Zap any volume groups that may be lying around.\nvgscan --ignorelockingfailure -P\nwhile read vg; do\n    vgremove -f \"$vg\" || :\ndone &lt; &lt;(vgs --noheadings -o vg_name)\n# Wipe out any LVM metadata that the kernel may have detected.\npvscan --ignorelockingfailure\nwhile read pv; do\n    pvremove -f -y \"$pv\" || :\ndone &lt; &lt;(pvs --noheadings -o pv_name)\n# Now zap any partitions along with any RAID metadata that may exist.\nwhile read maj min blocks name; do\n    [[ -b \/dev\/$name &amp;&amp; -w \/dev\/$name &amp;&amp; $name != name ]] || continue\n    [[ $name = loop* ]] &amp;&amp; continue\n    [[ $name = dm* ]] &amp;&amp; continue\n    [[ $name = fd* ]] &amp;&amp; continue\n    mdadm --misc --zero-superblock --force \/dev\/$name || :\n    if (( blocks &gt;= 2048)); then\n        dd \"if=\/dev\/zero\" \"of=\/dev\/$name\" \"bs=512\" \"count=2048\"\n        dd \"if=\/dev\/zero\" \"of=\/dev\/$name\" \"bs=512\" \"count=2048\" \"seek=$(($blocks - 2048))\"\n    else\n        dd \"if=\/dev\/zero\" \"of=\/dev\/$name\" \"bs=512\" \"count=$blocks\"\n    fi\ndone &lt; &lt;(tac \/proc\/partitions)\n```",
        "ts": "1517960368.000372"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "We found you also have to blast the end of the disk.",
        "ts": "1517960385.000282"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Is that a new stage?",
        "ts": "1517960386.000163"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "it is a task that can be added to stage.",
        "ts": "1517960408.000298"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "LVM leaves nasty poo all over the place and is a nightmare to get rid of ...",
        "ts": "1517960416.000098"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Yup",
        "ts": "1517960431.000205"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "But I thought vgremove\/pvremove would get rid of it...",
        "ts": "1517960451.000145"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "nope",
        "ts": "1517960456.000266"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "nope.",
        "ts": "1517960457.000265"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "And the \"nope\"s have it!",
        "ts": "1517960471.000273"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Why does it work tho when I re-install one of my DRP-installed hosts? B\/c it has same LVM structure?",
        "ts": "1517960565.000409"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "probably",
        "ts": "1517960597.000061"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "I’ll probably need to post a new flow.",
        "ts": "1517960614.000268"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "at some point that uses stage-chooser and a pre-stage to wipe the disk, but that is later.",
        "ts": "1517960631.000205"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Booted the non-installing node with sledgehammer, and doing a `dd if=\/dev\/zero of=\/dev\/sda bs=1M` to wipe the disk..",
        "ts": "1517961390.000266"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Of course, it's a 2TB disk, so that'll run for a while...",
        "ts": "1517961409.000324"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "We'll see what I get with the normal install thereafter",
        "ts": "1517961431.000390"
    }
]