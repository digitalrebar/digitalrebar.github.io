[
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "OK, victory in preseeding appears within reach! :the_horns:",
        "ts": "1517593473.000126"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "But MacGyver would be proud...",
        "ts": "1517593493.000401"
    },
    {
        "type": "message",
        "user": "U62R1805P",
        "text": "ONLY if it blew up your test lab as you escape with a paper clip... :wink:",
        "ts": "1517593556.000148"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "A) Ubuntu has a subsystem called \"kickseed\" that can take a kickstart file from the PXE command line, and auto-magically translate it into preseed...",
        "ts": "1517593556.000327"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "So, from <https:\/\/code.launchpad.net\/~ubuntu-installer\/kickseed\/master> get the code, and go into `~ubuntu-installer\/kickseed\/master`",
        "ts": "1517593696.000597"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "B) Copy in a \"Ubuntu-compatible\" kickstart file (Ubuntu only supports a subset of kickstart) such as:",
        "ts": "1517593770.000644"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F933VM2E6\/ubuntu_kickstart.txt|ubuntu kickstart>",
        "file": {
            "id": "F933VM2E6",
            "created": 1517594040,
            "timestamp": 1517594040,
            "name": "ubuntu_kickstart.txt",
            "title": "ubuntu kickstart",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U416T0AAX",
            "editable": true,
            "size": 1279,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F933VM2E6\/ubuntu_kickstart.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F933VM2E6\/download\/ubuntu_kickstart.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F933VM2E6\/ubuntu_kickstart.txt",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F933VM2E6-4040a39967",
            "edit_link": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F933VM2E6\/ubuntu_kickstart.txt\/edit",
            "preview": "#Generated by Kickstart Configurator\r\n#platform=AMD64 or Intel EM64T\r\n\r\n#System language\r\nlang en_US\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>#Generated by Kickstart Configurator<\/pre><\/div>\n<div><pre>#platform=AMD64 or Intel EM64T<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<div><pre>#System language<\/pre><\/div>\n<div><pre>lang en_US<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 48,
            "lines_more": 43,
            "preview_is_truncated": true,
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "ts": "1517594041.000546"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "C) Then, run `.\/test-kickseed &lt;kickstart_file&gt;`",
        "ts": "1517594115.000168"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "D)  Take what you need from the preseed file which is generated &amp; output to the screen",
        "ts": "1517594205.000264"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "E) Profit!",
        "ts": "1517594220.000184"
    },
    {
        "type": "message",
        "user": "U62R1805P",
        "text": "Oh... so you get detailed output of all the script-expansion running the <https:\/\/bazaar.launchpad.net\/~ubuntu-installer\/kickseed\/master\/view\/head:\/test-kickseed>",
        "ts": "1517594442.000394"
    },
    {
        "type": "message",
        "user": "U62R1805P",
        "text": "I THINK I follow... so you've MacGyver'd a kickseed lint for ubuntu so you can pass a 'clean' (no additional expansion) to drp (really sledgehammer) cause it is CentoOS based and does not expand as expected ? (Note: doing as a mental exercise as I need to figure out kickseed execution for an embedded system) ? ... Check my math... pretty COOL if I'm tracking correctly...",
        "ts": "1517595085.000402"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "No. It's just a means to an end to generate preseed directives (basically, the `partman` disk-partitioning ones) from a kicstart file, which I understand better, and IMNSHO has a WAY saner config language (especially for disk partitioning!)",
        "ts": "1517595225.000199"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "So from this kickstart config section:",
        "ts": "1517595311.000116"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F931CDJTD\/ubu-kickstart_disk_partitioning_section.txt|ubu-kickstart disk partitioning section>",
        "file": {
            "id": "F931CDJTD",
            "created": 1517595364,
            "timestamp": 1517595364,
            "name": "ubu-kickstart_disk_partitioning_section.txt",
            "title": "ubu-kickstart disk partitioning section",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U416T0AAX",
            "editable": true,
            "size": 344,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F931CDJTD\/ubu-kickstart_disk_partitioning_section.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F931CDJTD\/download\/ubu-kickstart_disk_partitioning_section.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F931CDJTD\/ubu-kickstart_disk_partitioning_section.txt",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F931CDJTD-5e1841059c",
            "edit_link": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F931CDJTD\/ubu-kickstart_disk_partitioning_section.txt\/edit",
            "preview": "#Partition clearing information\r\nclearpart --all --initlabel --drives=sda\r\n#Disk partitioning information\r\npart \/boot --fstype ext4 --size 1024 --asprimary\r\npart pv.01 --size 1 --grow\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>#Partition clearing information<\/pre><\/div>\n<div><pre>clearpart --all --initlabel --drives=sda<\/pre><\/div>\n<div><pre>#Disk partitioning information<\/pre><\/div>\n<div><pre>part \/boot --fstype ext4 --size 1024 --asprimary<\/pre><\/div>\n<div><pre>part pv.01 --size 1 --grow<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 8,
            "lines_more": 3,
            "preview_is_truncated": false,
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "ts": "1517595365.000054"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "I got this preseed section:",
        "ts": "1517595383.000237"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F931D2MFD\/yielded_preseed_partman_directives.txt|yielded preseed partman directives>",
        "file": {
            "id": "F931D2MFD",
            "created": 1517595423,
            "timestamp": 1517595423,
            "name": "yielded_preseed_partman_directives.txt",
            "title": "yielded preseed partman directives",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U416T0AAX",
            "editable": true,
            "size": 1052,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F931D2MFD\/yielded_preseed_partman_directives.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F931D2MFD\/download\/yielded_preseed_partman_directives.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F931D2MFD\/yielded_preseed_partman_directives.txt",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F931D2MFD-889c7ae6bd",
            "edit_link": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F931D2MFD\/yielded_preseed_partman_directives.txt\/edit",
            "preview": "d-i partman-auto\/disk string \/dev\/discs\/disc0\/disc\r\nd-i partman-auto\/disk string \/dev\/sda\r\nd-i partman-auto\/expert_recipe string root_home_lvm : \\\r\n    1024 1024 1024 ext4 $primary{ } method{ format } format{ } use_filesystem{ } filesystem{ ext4 } mountpoint{ \/boot } . \\\r\n    1 1073741824 -1 ext3 $defaultignore{ } method{ lvm } vg_name{ vg00 } . \\\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>d-i partman-auto\/disk string \/dev\/discs\/disc0\/disc<\/pre><\/div>\n<div><pre>d-i partman-auto\/disk string \/dev\/sda<\/pre><\/div>\n<div><pre>d-i partman-auto\/expert_recipe string root_home_lvm : \\<\/pre><\/div>\n<div><pre>    1024 1024 1024 ext4 $primary{ } method{ format } format{ } use_filesystem{ } filesystem{ ext4 } mountpoint{ \/boot } . \\<\/pre><\/div>\n<div><pre>    1 1073741824 -1 ext3 $defaultignore{ } method{ lvm } vg_name{ vg00 } . \\<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 15,
            "lines_more": 10,
            "preview_is_truncated": true,
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "ts": "1517595424.000036"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "And, it works!",
        "ts": "1517595528.000321"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F92HMB8AD\/after-install_sda_layout.txt|after-install sda layout>",
        "file": {
            "id": "F92HMB8AD",
            "created": 1517595598,
            "timestamp": 1517595598,
            "name": "after-install_sda_layout.txt",
            "title": "after-install sda layout",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U416T0AAX",
            "editable": true,
            "size": 330,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F92HMB8AD\/after-install_sda_layout.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F92HMB8AD\/download\/after-install_sda_layout.txt?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F92HMB8AD\/after-install_sda_layout.txt",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F92HMB8AD-c5c58aa4b2",
            "edit_link": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F92HMB8AD\/after-install_sda_layout.txt\/edit",
            "preview": "root@testinstall:~# lsblk\r\nNAME             MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT\r\nsda                8:0    0   931G  0 disk\r\n├─sda1             8:1    0   976M  0 part \/boot\r\n└─sda2             8:2    0   930G  0 part\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>root@testinstall:~# lsblk<\/pre><\/div>\n<div><pre>NAME             MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT<\/pre><\/div>\n<div><pre>sda                8:0    0   931G  0 disk<\/pre><\/div>\n<div><pre>├─sda1             8:1    0   976M  0 part \/boot<\/pre><\/div>\n<div><pre>└─sda2             8:2    0   930G  0 part<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 7,
            "lines_more": 2,
            "preview_is_truncated": false,
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "ts": "1517595599.000074"
    },
    {
        "type": "message",
        "user": "U62R1805P",
        "text": "So the MacGyver was a 'preseed template creation' not a linter... or more of the 'collect underpants' stage",
        "ts": "1517595876.000581"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "It was a \"I know how to write the partitioning I want in kickstart, but can't figure out how to do the same in preseed\" rosetta stone :slightly_smiling_face:",
        "ts": "1517595948.000359"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Now, the kewl thing with DRP templating is, <@U02DGQYK1> (or <@U02DJQSG8> maybe?) wrote support in for templates-in-templates (which Go templates don't have native support for, amirite?)",
        "ts": "1517596057.000463"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "So now I can have a library of disk partition templates that I can \"plug in\" to my standard preseed template for Ubuntu",
        "ts": "1517596115.000096"
    },
    {
        "type": "message",
        "user": "U62R1805P",
        "text": "I know I have to do something like what you've pulled off as I've got a bunch of old HPE gear that I'll need to avoid the RAID stuff with... AND hope to get to use drp on some embedded f\/w support stuff... have not done in the mud kickstart in decades... esp all the part stuff... glad your shoveled a path :wink:",
        "ts": "1517596255.000614"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@U416T0AAX> - yes <@U02DGQYK1> added the ability to have Nested templates, which are not native to Golang Templating ... and collecting a bunch of example partitioning schemes and allowing to select the right Nested Template based on a Param input would be a very very nice thing to have",
        "ts": "1517596607.000199"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Right now for testing, I am setting the `part-scheme` and `select-kickseed` params on the host itself, but in the future, I'll probably set them in the Profile that the hosts are set to",
        "ts": "1517596811.000004"
    }
]