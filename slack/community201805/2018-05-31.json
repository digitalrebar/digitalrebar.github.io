[
    {
        "type": "message",
        "user": "UAQAE0VNE",
        "text": "qq I do not see any documentation on workflows, stages, tasks, and jobs",
        "ts": "1527777645.000127"
    },
    {
        "type": "message",
        "user": "UAQAE0VNE",
        "text": "<http:\/\/provision.readthedocs.io\/en\/tip\/doc\/operation.html#advanced-workflow>",
        "ts": "1527777646.000242"
    },
    {
        "type": "message",
        "user": "UAQAE0VNE",
        "text": "I'm wondering if I am looking in the wrong area",
        "ts": "1527777657.000668"
    },
    {
        "user": "UAZ974NLT",
        "text": "<@UAZ974NLT> has joined the channel",
        "type": "message",
        "subtype": "channel_join",
        "ts": "1527777658.000666"
    },
    {
        "type": "message",
        "user": "UAQAE0VNE",
        "text": "or if you have documentation elsewhere I can look at to review it",
        "ts": "1527777671.000449"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "The architecture reference has a lot of info:\n<https:\/\/provision.readthedocs.io\/en\/tip\/doc\/arch.html>\nspecifically:\n<https:\/\/provision.readthedocs.io\/en\/tip\/doc\/arch\/workflow.html>",
        "edited": {
            "user": "U6QFVRJNB",
            "ts": "1527777789.000000"
        },
        "ts": "1527777765.000414"
    },
    {
        "type": "message",
        "user": "U32PZNCP5",
        "text": "<@UAZ974NLT> $Welcome",
        "ts": "1527777970.000435"
    },
    {
        "text": "Digital Rebar welcome information is here &gt; <http:\/\/rebar.digital\/community\/welcome.html>",
        "type": "message",
        "subtype": "slackbot_response",
        "user": "USLACKBOT",
        "ts": "1527777970.000655"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "Hi. I must be doing something wrong here. I'm going through the docs at <http:\/\/provision.readthedocs.io\/en\/tip\/doc\/operation.html> but I can't update anything.     Following section 12.5.2. 'Updating a Template' I get a silent failure, while updating a bootenv as per section 12.3.5 I get 'Error: PATCH: &lt;bootenv name'",
        "ts": "1527778060.000811"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@UAZ974NLT> can you give us an example of your \"update something\" command or web ux path you are trying?",
        "ts": "1527778109.000818"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "(what specific command is failing and the output)",
        "ts": "1527778127.000595"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "several are.  one example:",
        "ts": "1527778266.000042"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "# drpcli bootenvs show centos-7-install --format yaml &gt; centos-7-install\n(edit IsoUrl field)\n# drpcli bootenvs update centos-7-install -&lt; centos-7-install\n# Error: PATCH: centos-7-install",
        "ts": "1527778280.000342"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Correct - that will give an error",
        "ts": "1527778302.000626"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "the centos-7-install BootEnv is a Read Only piece of content provided by the DRP Community Content pack",
        "ts": "1527778320.000496"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "all content marked Read Only .... can't be edited ... cause ... well ... because it's Read Only",
        "ts": "1527778339.000009"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "this enables us to guarantee in-field content updates can be safely made",
        "ts": "1527778350.000509"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "ah I did suspect that so I moved on, but now get a silent error on something else. hang on a min",
        "ts": "1527778359.000378"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "if you need to make a modification to the BootEnv that is NOT supported by a current Param setting you can Clone it - and `create` it as a new named BootEnv",
        "ts": "1527778387.000563"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "if you are using the Portal UX - then anything with a black \"locked\" lock icon means it's Read Only",
        "ts": "1527778417.000296"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "in CLI - the \"ReadOnly\" key will be set to boolean `true`",
        "ts": "1527778446.000773"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "drpcli templates show centos-7.ks.tmpl | jq -r .Contents &gt; new.tmpl\n(edit new.tmpl: 'keyboard us' &gt; 'keyboard ru')\ndrpcli templates upload new.tmpl as new_template.tmpl\ndrpcli templates show new_template.tmpl | jq -r .Contents\n(correctly shows 'keyboard ru')\n\ndrpcli templates show new_template.tmpl | jq -r .Contents &gt; edit.tmpl\n(edit edit.tmpl 'keyboard ru' &gt; 'keyboard fr')\ndrpcli templates upload edit.tmpl as new_template.tmpl\ndrpcli templates show new_template.tmpl | jq -r .Contents\n(still shows 'keyboard ru')",
        "ts": "1527779185.000910"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Did you set the \"Name\" field in the edited template to something different ?",
        "ts": "1527779253.000251"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "There is no \"Name\" field. Well other than in configuring the lvm which is clearly part of the kickstart config",
        "ts": "1527779351.000064"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Right - got it - bad question.  :slightly_smiling_face:",
        "ts": "1527779484.000151"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "upload slilently refuses to modify already existing data.",
        "ts": "1527779494.000279"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "that codepath is a holdover from before we had content bundles.",
        "ts": "1527779526.000173"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "Hmm. The docs say \"We use jq to get a copy of the current template, edit it, and use the upload command to replace the template. If there already is a template present, then it can be replaced with the upload command.\"",
        "ts": "1527779528.000510"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Because the docs are busted.",
        "ts": "1527779543.000029"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "er",
        "ts": "1527779565.000221"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "Are there any accurate docs?",
        "ts": "1527779580.000863"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "some of the docs are indeed accurate ....",
        "ts": "1527779593.000763"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "You hit part that is not. :confused:",
        "ts": "1527779604.000122"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "Right. So it's not actually possible to modify templates. What about other resource types -- bootenvs etc? Is that a global thing?",
        "ts": "1527779662.000601"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Oh, modifying templates is doable, and even easy: `drpcli templates show foo --format yaml &gt;tmpl.yaml`, edit away, `drpcli templates update foo - &lt;tmpl.yaml`",
        "ts": "1527779794.000634"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "You jsut can't do it with upload, because upload on templates was creted for a usecase that has been superceded by our whole content bundle concept.",
        "ts": "1527779872.000087"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "i see, thanks",
        "ts": "1527779920.000341"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "yes that works thanks.",
        "ts": "1527780067.000373"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Yeah, we recommend using the content bundling system to maintain things like custom templates, bootenvs, tasks, stages, params, and workflows.",
        "edited": {
            "user": "U02DJQSG8",
            "ts": "1527780253.000000"
        },
        "ts": "1527780201.000590"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "It makes it easier to upgrade, replace, and version control things.",
        "ts": "1527780276.000532"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "got a link to any documentation for content bundling?",
        "ts": "1527780315.000365"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "not documented well - see the `drpcli contents`, `drpcli contents unbundle` and `drpcli contents bundle` help output",
        "ts": "1527780855.000112"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "if you feel up to it - we are always accepting Pull Requests to update doc and other things in the open source pieces :slightly_smiling_face:",
        "ts": "1527780888.000109"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "Not sure what to say to that.",
        "ts": "1527781098.000103"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "Im not really sure how I can use this without any actual documentation to be honest. the help output doesn't give anything useful at all. I don't even know conceptually how is supposed to work.",
        "ts": "1527781198.000118"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@UAZ974NLT> - take a look at the `colordemo` content pack in Git repo - it's a demonstration \"content pack\" - and you should be able to follow the structure of how to create a content pack looking at it:\n<https:\/\/github.com\/digitalrebar\/colordemo>",
        "attachments": [
            {
                "service_name": "GitHub",
                "title": "digitalrebar\/colordemo",
                "title_link": "https:\/\/github.com\/digitalrebar\/colordemo",
                "text": "colordemo - Training Content",
                "fallback": "GitHub: digitalrebar\/colordemo",
                "from_url": "https:\/\/github.com\/digitalrebar\/colordemo",
                "thumb_url": "https:\/\/avatars1.githubusercontent.com\/u\/13814120?s=400&v=4",
                "thumb_width": 250,
                "thumb_height": 250,
                "service_icon": "https:\/\/a.slack-edge.com\/bfaba\/img\/unfurl_icons\/github.png",
                "id": 1,
                "original_url": "https:\/\/github.com\/digitalrebar\/colordemo"
            }
        ],
        "ts": "1527781402.000871"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "from the base directory (that contains `params`, `stages`, etc.) you do the \"bundle\" operation:\n`drpcli contents bundle colordemo.yaml`\nwhich creates the single YAML file with all of the various pieces and parts bundled up\nThe biggest thing to remember the `._*.meta` files MUST NOT have a newline at the end of them.  (create them with `printf \"My Name\" &gt; ._Name.meta` for example)",
        "ts": "1527781500.000421"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "from there - you inject it in to DRP via the \n  `drpcli contents create .\/colordemo.yaml` command \nsubsequently you can do updates as you make changes and test things with:\n  `drpcli contents update colordemo .\/colordemo.yaml`",
        "ts": "1527781600.000058"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "(ignore Rob's bundle command in the README... It's wrong ... :disappointed: )",
        "ts": "1527781685.000815"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "(ok - I just pushed an update to the README)",
        "ts": "1527782300.000510"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "ok thanks I need to look at all this more. I don't know how to create the params, stages etc yet I was just working through the docs.",
        "ts": "1527782414.000232"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "see the colordemo files - those are examples of how those pieces should look - if you have questions - you can always do a `show` operation on something that looks close to what you want - and then copy the JSON or YAML ... authoring content in YAML format is usually a lot easier",
        "ts": "1527782478.000478"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "Looks like a good project but honestly this whole lack of accurate docs is difficult for me to get past.  It's hard learning new stuff as it is when there are new concepts involved and stuff.  No\/incorrect docs can be a killer.",
        "ts": "1527782485.000214"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "too bad - it is an awesome product ...",
        "ts": "1527782503.000309"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "But I'm sure you know that anyway. I will keep at it for another day",
        "ts": "1527782518.000194"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "it's an open source project - so always feel free to contribute ... that's how open source works",
        "ts": "1527782528.000240"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@UAZ974NLT> for reference the PDF generated version of the current Documentation is already 272 pages of content ... I don't know of many Open Source projects with nearly half that much documentation ...  Yes, there are pieces missing.  Yes, as the product evolves and is updated\/changed, some pieces of documentation fall behind ... but really ... do you think 272 pages is an inconsequential amount ??",
        "ts": "1527782787.000451"
    },
    {
        "type": "message",
        "user": "U9R87AWKE",
        "text": "On that note are there any guides for ‘plugin’ development?",
        "ts": "1527785189.000249"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "We have been keeping that closer to the vest because the patterns are stabilizing.  ",
        "client_msg_id": "E6B00E1A-A906-456B-9F0F-B614A55481DC",
        "ts": "1527785812.000647"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "The incrementer plugin is an example that does just about all the functions.  It is fairly abstracted. Need golang skillz <@U9VHJUN0Z> ",
        "client_msg_id": "ED5532D1-5BE2-4DFC-8F2A-C14839C4C7EE",
        "ts": "1527785888.000407",
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U9R87AWKE"
                ],
                "count": 1
            }
        ]
    },
    {
        "text": "notes that RackN does offer training on plugin development",
        "type": "message",
        "subtype": "me_message",
        "user": "U02DHRR2L",
        "ts": "1527790260.000404",
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U8RFVLLG1"
                ],
                "count": 1
            }
        ]
    },
    {
        "user": "UAZHMFKEE",
        "text": "<@UAZHMFKEE> has joined the channel",
        "type": "message",
        "subtype": "channel_join",
        "ts": "1527791722.000226"
    },
    {
        "type": "message",
        "user": "U32PZNCP5",
        "text": "<@UAZHMFKEE> $Welcome",
        "ts": "1527792076.000112"
    },
    {
        "text": "Digital Rebar welcome information is here &gt; <http:\/\/rebar.digital\/community\/welcome.html>",
        "type": "message",
        "subtype": "slackbot_response",
        "user": "USLACKBOT",
        "ts": "1527792076.000279"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "Hello",
        "ts": "1527792085.000799"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I'm trying to get my head around DRP and Terraform",
        "ts": "1527792102.000159"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "<@UAZHMFKEE> did you find the docs \/ videos?",
        "ts": "1527792204.000021"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I'm currently testing it on DRP running in a Docker container which runs in a VirtualBox VM. Then I have second blank VM which boots from the network using DRP. All works if I use the CentOS-install task in the workflow. But I don't understand how the discovery thing works in order I can use Terraform.",
        "ts": "1527792224.000703"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I was watching some videos but that all uses Packet or VBox IPMI which I don't have.",
        "ts": "1527792261.000122"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "Is the IPMI required for the Terraform plugin to work?",
        "ts": "1527792280.000670"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I run DRP like this: `docker run -itd --name drp --net host digitalrebar\/provision:stable`",
        "ts": "1527792308.000719"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "no, IPMI is not required",
        "ts": "1527792330.000629"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "that's good",
        "ts": "1527792346.000175"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "so how can I setup the discovery workflow? Currently I only have the stage for `terraform-ready` and booting `sledgehammer`. My blank VM boots `sledgehammer` from the network (I can see login prompt) but when I run Terraform nothing happens ...",
        "ts": "1527792482.000052"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@UAZHMFKEE> please check out this video:  <https:\/\/www.youtube.com\/watch?v=RtuZQHKmd9U>",
        "attachments": [
            {
                "service_name": "YouTube",
                "service_url": "https:\/\/www.youtube.com\/",
                "title": "Terraform Digital Rebar Provider with Workflows",
                "title_link": "https:\/\/www.youtube.com\/watch?v=RtuZQHKmd9U",
                "author_name": "RackN & Digital Rebar",
                "author_link": "https:\/\/www.youtube.com\/channel\/UCr3bBtP-pMsDQ5c0IDjt_LQ",
                "thumb_url": "https:\/\/i.ytimg.com\/vi\/RtuZQHKmd9U\/hqdefault.jpg",
                "thumb_width": 480,
                "thumb_height": 360,
                "fallback": "YouTube Video: Terraform Digital Rebar Provider with Workflows",
                "video_html": "<iframe width=\"400\" height=\"225\" src=\"https:\/\/www.youtube.com\/embed\/RtuZQHKmd9U?feature=oembed&autoplay=1&iv_load_policy=3\" frameborder=\"0\" allow=\"autoplay; encrypted-media\" allowfullscreen><\/iframe>",
                "video_html_width": 400,
                "video_html_height": 225,
                "from_url": "https:\/\/www.youtube.com\/watch?v=RtuZQHKmd9U",
                "service_icon": "https:\/\/a.slack-edge.com\/2089\/img\/unfurl_icons\/youtube.png",
                "id": 1,
                "original_url": "https:\/\/www.youtube.com\/watch?v=RtuZQHKmd9U"
            }
        ],
        "ts": "1527792592.000733"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "here's the docs source <https:\/\/provision.readthedocs.io\/en\/tip\/doc\/integrations\/terraform.html?highlight=terraform>",
        "ts": "1527792696.000702"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I already watched that one.",
        "ts": "1527792721.000018"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "<@UAZHMFKEE> you I'd recommend getting the basics working w\/ discovery and provsioning and then adding Terraform workflow",
        "ts": "1527792757.000345"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "Is it OK if I only have the `discover` and `terraform-ready` stages in the `discover` workflow?",
        "ts": "1527792762.000405"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "if you are using virtuabox, you want the vbox-ipmi stage too",
        "ts": "1527792790.000007"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I cannot use vbox-ipmi as my Docker container cannot interact with the VBox running outside.",
        "ts": "1527792829.000398"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "ah, that's right.  ok",
        "ts": "1527792969.000340"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "my current setup is like this:\n```\nPC{\n  VBox{\n    DRP_VM{\n      Docker{\n        # Running digitalrebar\/provision:stable\n      }\n    },\n    Blank_VM{\n      # Booting from network via DRP_VM\n    }\n  }\n}\n```",
        "ts": "1527792989.000306"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I have reserved IP for the `Blank_VM` machine, created Machine with that IP and set the `discover` workflow for it. When I boot the `Blank_VM`, it loads the `sledgehammer`.",
        "ts": "1527793139.000637"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I have two workflows:\n`discover` = `terraform-ready` stage only\n`centos` = `centos-install` stage only",
        "ts": "1527793264.000458"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "If I create Machine with the `centos` workflow, it kickstarts it just fine.",
        "edited": {
            "user": "UAZHMFKEE",
            "ts": "1527793467.000000"
        },
        "ts": "1527793286.000357"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "If I create Machine with the `discover` workflow, it boots into the `sledgehammer` image (I cen ssee the login prompt) but nothing else happens. The `terraform\/allocated` and `terraform\/managed` params are not set in the Machine.",
        "ts": "1527793573.000578"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "<@U02DHRR2L> Any idea how to make it progress to the `terraform-ready` stage?",
        "ts": "1527793602.000558"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "... so I can get the params set and can start running Terraform?",
        "ts": "1527793627.000033"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "If I set the params manually, Terraform runs forever ...",
        "ts": "1527793643.000028"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@UAZHMFKEE> you need to _*add*_ the Params to a machine - to tell the system that the Machine is for use by Terraform",
        "ts": "1527794698.000538"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "shouldn't the `discover` workflow do that for me?",
        "ts": "1527794721.000269"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "No",
        "ts": "1527794725.000483"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I thought that `sledgehammer` will do that for me ...",
        "ts": "1527794742.000675"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "because the Discover workflow does basic discovery - then you tell the system what you want the discovered Machine to do next",
        "ts": "1527794744.000433"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "if you create a Workflow that does Discovery, adds a (custom) stage that adds the Params - then waits - then the Machine will automatically get the Params added",
        "ts": "1527794779.000199"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I see ... so I need the `discovery` followed by the `terraform-ready` stage?",
        "ts": "1527794832.000470"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Workflow customization is necessary to make customized changes to what you want things to do - the basic pattern you are using is a generic pattern",
        "ts": "1527794856.000125"
    }
]