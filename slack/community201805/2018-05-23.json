[
    {
        "user": "UAU9XNE7K",
        "text": "<@UAU9XNE7K> has joined the channel",
        "type": "message",
        "subtype": "channel_join",
        "ts": "1527086794.000683"
    },
    {
        "type": "message",
        "user": "UAU9XNE7K",
        "text": "Howdy, I started playing with dr-provision last night, got it running on a VM and signed up for the portal. So far so good. I’m running on centos with systemd starting it. I’m only seeing it listening on the api endpoint ports. I am probably missing something obvious to get the tftp, dhcp, etc service ports up. The installer script is what I used. I’m seeing \/etc\/dr-provision as just an empty dir. Any ideas what I’m missing to get this show on the road?",
        "ts": "1527091771.000179"
    },
    {
        "type": "message",
        "user": "U32PZNCP5",
        "text": "<@UAU9XNE7K> $Welcome",
        "ts": "1527091794.000163"
    },
    {
        "text": "Digital Rebar welcome information is here &gt; <http:\/\/rebar.digital\/community\/welcome.html>",
        "type": "message",
        "subtype": "slackbot_response",
        "user": "USLACKBOT",
        "ts": "1527091794.000392"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@UAU9XNE7K> - the content in a \"production install\" mode should be (by default) in `\/var\/lib\/dr-provision` - the `\/etc\/dr-provision` is for local configs that override defaults, etc",
        "ts": "1527091896.000440"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "you can get a list of the services and ports that are running via the CLI:\n`drpcli info status`",
        "ts": "1527091967.000589"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "that command does a service health check and returns the ports and services that are being managed\/controlled by the DRP endpoint",
        "ts": "1527091988.000065"
    },
    {
        "type": "message",
        "user": "UAU9XNE7K",
        "text": "Here’s what I’m seeing: \n```\n[root@rebar dr-provision]# drpcli info status\n{\n  \"API\": {\n    \"Alive\": true,\n    \"Enabled\": true,\n    \"Port\": 8092\n  },\n  \"BINL\": {\n    \"Alive\": true,\n    \"Enabled\": true,\n    \"Port\": 4011\n  },\n  \"DHCP\": {\n    \"Alive\": true,\n    \"Enabled\": true,\n    \"Port\": 67\n  },\n  \"Static\": {\n    \"Alive\": true,\n    \"Enabled\": true,\n    \"Port\": 8091\n  },\n  \"TFTP\": {\n    \"Alive\": true,\n    \"Enabled\": true,\n    \"Port\": 69\n  }\n}\n```",
        "ts": "1527093076.000243"
    },
    {
        "type": "message",
        "user": "UAU9XNE7K",
        "text": "and ```\n[root@rebar dr-provision]# netstat -tapn\nActive Internet connections (servers and established)\nProto Recv-Q Send-Q Local Address           Foreign Address         State       PID\/Program name\ntcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      996\/sshd\ntcp        0      0 127.0.0.1:25            0.0.0.0:*               LISTEN      1570\/master\ntcp        0      0 127.0.0.1:47286         127.0.0.1:8091          TIME_WAIT   -\ntcp        0      0 192.168.2.90:22         192.168.2.109:55612     ESTABLISHED 5900\/sshd: root@pts\ntcp6       0      0 :::22                   :::*                    LISTEN      996\/sshd\ntcp6       0      0 ::1:25                  :::*                    LISTEN      1570\/master\ntcp6       0      0 :::8091                 :::*                    LISTEN      5959\/dr-provision\ntcp6       0      0 :::8092                 :::*                    LISTEN      5959\/dr-provision\ntcp6       0      0 192.168.2.90:8092       192.168.2.109:58640     ESTABLISHED 5959\/dr-provision\n```",
        "ts": "1527093093.000762"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "looks like it is running.",
        "ts": "1527093108.000310"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "`drpcli contents list`",
        "ts": "1527093113.000284"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "All our contents are stored by default in directories under \/var\/lib\/dr-provision",
        "ts": "1527093521.000027"
    },
    {
        "type": "message",
        "user": "UAU9XNE7K",
        "text": "Should I not be seeing ports 69, 67 and 4011 in netstat?",
        "ts": "1527093737.000489"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "IIRC, -tapn restricts to tcp only",
        "ts": "1527093773.000147"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "and 67,69, and 4011 are udp",
        "ts": "1527093786.000019"
    },
    {
        "type": "message",
        "user": "UAU9XNE7K",
        "text": "Ah! :slightly_smiling_face:",
        "ts": "1527093801.000129"
    },
    {
        "type": "message",
        "user": "UAU9XNE7K",
        "text": "Very good. My bad.",
        "ts": "1527093810.000377"
    },
    {
        "type": "message",
        "user": "UAU9XNE7K",
        "text": "Thanks!",
        "ts": "1527093823.000448"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": ":slightly_smiling_face:",
        "ts": "1527093854.000710"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Pretty sure nobody's around, but I'm getting a weird error installing ubuntu 14.04 using the bootenv from drp-community-contrib.  It goes through network setup and disk partitioning, then fails with \"Unable to install the selected kernel\"  The package it fails to install is \"linux-generic-lts-xenial\".  When I look at the console, it looks like it's the header files for that kernel that fails to install.",
        "ts": "1527132579.000115"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "This worked fine a few weeks ago when I last tried it, but today when we went to do an actual production install it failed :disappointed:",
        "ts": "1527132620.000105"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "What version DRP in the working test -vs- the production?",
        "client_msg_id": "fd1ab16f-325f-4a70-87bd-6894789a0d77",
        "ts": "1527133392.000069"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "`Versions: DR v3.8.0 &amp; UX v1.2.1`",
        "ts": "1527133553.000053"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "It's the same server, just two or three weeks later.  I can't find anything that's changed.",
        "ts": "1527133567.000060"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Is the content version the same?  Presuming you are using the DRP community contribute content?",
        "client_msg_id": "a4043186-4186-4e85-9be0-86dd57cf2d34",
        "ts": "1527133629.000206"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Hrm.  I think that was updated recently?",
        "ts": "1527133707.000090"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Can you roll back the content version...?",
        "client_msg_id": "17421a12-109c-4ae8-8a38-6828adacfeb4",
        "ts": "1527133749.000053"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "There are some content changes around the package repository handling",
        "client_msg_id": "20e9ecea-3c78-4ecd-b7b5-301ceed74d98",
        "ts": "1527133789.000194"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Let me try",
        "ts": "1527133812.000172"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Looks like I can roll back to 1.7 (I was on 1.8)",
        "ts": "1527133832.000191"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Let's try an install!",
        "ts": "1527133864.000222"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Man if this works I'm going to kick myself.  I didn't even remember the content package was updated until you mentioned it...",
        "ts": "1527133935.000154"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "No dice.  Same error.  :disappointed:",
        "ts": "1527134402.000314"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "That got my hopes up.",
        "ts": "1527134408.000218"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "isn’t 14.04 trusty?  not xenial?",
        "ts": "1527134747.000221"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Yes, but you can install the Xenial kernel in trusty - it is supported path",
        "client_msg_id": "ee1ac388-2681-49a7-afb9-44a5c8c58ce3",
        "ts": "1527134807.000060"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "ah",
        "ts": "1527134814.000031"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Yes.  If you install 14.04.5 you get the xenial 4.4 hwe kernel by default.",
        "ts": "1527134892.000043"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "okay - hmm - ubuntu was broken for awhile.  tip should work, but you need all tips (drp and content).",
        "ts": "1527135052.000153"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Not sure when we broken it.",
        "ts": "1527135060.000009"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "I know Victor has been fixing it.",
        "ts": "1527135065.000275"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "He's on v3.8.0 and content pack v1.7.0 - I think pre package repo changes",
        "ts": "1527135101.000182"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "plus it \"was working\"",
        "ts": "1527135112.000116"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Actually, I just got it to work by rolling back community content as well as community contrib.",
        "ts": "1527135122.000003"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "To 1.7",
        "ts": "1527135137.000129"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "ah - yes, those two should be in kept in tandem",
        "ts": "1527135145.000254"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "So that was the issue after all.",
        "ts": "1527135167.000206"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "contrib uses some of the content pieces in the main community pack",
        "ts": "1527135177.000110"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "I am both kicking myself and celebrating.",
        "ts": "1527135181.000221"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "At least it works now though.  :smile:",
        "ts": "1527135192.000217",
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U6QFVRJNB"
                ],
                "count": 1
            }
        ]
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Or it seems to.  Waiting to see if I got a working install or not.  But the install finished fine.",
        "ts": "1527135211.000102"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "yeah - 1.8 has the ubuntu issues.  1.7 was okay.  tip is fixed.",
        "ts": "1527135266.000018"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Ok, cool.",
        "ts": "1527135287.000090"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Thanks for your help!  I'm going to go report back to the boss and go to bed.",
        "ts": "1527135334.000175"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "glad it's working now :slightly_smiling_face:  tell the boss to give you a raise too, while you're at it ...",
        "ts": "1527135361.000043"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "lol ok",
        "ts": "1527135366.000113"
    }
]