[
    {
        "text": "welp",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492698496.427033"
    },
    {
        "text": "that makes it harder to introduce in existing environments",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492698505.432483"
    },
    {
        "text": "(we used to just wipe partition tables during preseed\/kickstart)",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492698568.463795"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Only as part of a os install request",
        "ts": "1492699484.923968"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "It is part of a role that runs in sledgehammer   Sledgehammer itself doesn't ",
        "ts": "1492699526.945826"
    },
    {
        "text": "hm, this is weird then",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492699753.060910"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "what are you seeing?",
        "ts": "1492699899.135220"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "It is part of the provisioner-os-install role - see core\/script\/roles\/provisioner-os-install\/01-install-os.sh",
        "ts": "1492700061.219541"
    },
    {
        "text": "```[root@d00-25-90-59-d5-62 ~]# parted -s \/dev\/sda print\nError: \/dev\/sda: unrecognised disk label\nModel: LSI Logical Volume (scsi)\nDisk \/dev\/sda: 2396GB\nSector size (logical\/physical): 512B\/512B\nPartition Table: unknown\nDisk Flags:\n```\ntwo servers that I guess their owner rebooted for whatever reason look like this after booting up the discovery image - but I do see other servers that booted up into discovery that still have their partition tables intact",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492700104.242525"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Does it have a LSI raid controller? Do you have any raid configured?  Did you drive that system to any state other than just being discovered?",
        "ts": "1492700223.306212"
    },
    {
        "text": "yes, it does have an LSI raid controller - and no, I just let it be discovered",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492700254.322595"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "so - it should have touched anything.",
        "ts": "1492700272.331993"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "should not",
        "ts": "1492700290.340766"
    },
    {
        "text": "I'm going to try to see if I can reproduce it somehow",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492700316.355028"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "oh - does the system have multiple disks?  Could they be enumerating differently?",
        "ts": "1492700357.376239"
    },
    {
        "text": "the ones that are affected only have one disk configured on the RAID controller",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492700403.401540"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "<@U02DGQYK1> - why does DRP control the Ubuntu apt sources instead of using std upstream Ubuntu ones?",
        "ts": "1492704236.371504"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U416T0AAX> uploaded a file: <https:\/\/rackn.slack.com\/files\/U416T0AAX\/F521KD44T\/image_uploaded_from_ios.jpg|Deb sources in DRP provisioned Ubuntu node>",
        "file": {
            "id": "F521KD44T",
            "created": 1492704273,
            "timestamp": 1492704273,
            "name": "Image uploaded from iOS.jpg",
            "title": "Deb sources in DRP provisioned Ubuntu node",
            "mimetype": "image\/jpeg",
            "filetype": "jpg",
            "pretty_type": "JPEG",
            "user": "U416T0AAX",
            "editable": false,
            "size": 2275497,
            "mode": "hosted",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F521KD44T\/image_uploaded_from_ios.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F521KD44T\/download\/image_uploaded_from_ios.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_64": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F521KD44T-6eb7d24f6f\/image_uploaded_from_ios_64.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_80": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F521KD44T-6eb7d24f6f\/image_uploaded_from_ios_80.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_360": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F521KD44T-6eb7d24f6f\/image_uploaded_from_ios_360.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_360_w": 360,
            "thumb_360_h": 270,
            "thumb_480": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F521KD44T-6eb7d24f6f\/image_uploaded_from_ios_480.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_480_w": 480,
            "thumb_480_h": 360,
            "thumb_160": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F521KD44T-6eb7d24f6f\/image_uploaded_from_ios_160.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_720": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F521KD44T-6eb7d24f6f\/image_uploaded_from_ios_720.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_720_w": 720,
            "thumb_720_h": 540,
            "thumb_800": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F521KD44T-6eb7d24f6f\/image_uploaded_from_ios_800.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_800_w": 800,
            "thumb_800_h": 600,
            "thumb_960": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F521KD44T-6eb7d24f6f\/image_uploaded_from_ios_960.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_960_w": 960,
            "thumb_960_h": 720,
            "thumb_1024": "https:\/\/files.slack.com\/files-tmb\/T02DGQYJZ-F521KD44T-6eb7d24f6f\/image_uploaded_from_ios_1024.jpg?t=xoxe-2458848645-331142845857-332542502102-c2a3393bdc66e7bf33d1c6986e4eea64",
            "thumb_1024_w": 1024,
            "thumb_1024_h": 768,
            "image_exif_rotation": 1,
            "original_w": 3264,
            "original_h": 2448,
            "permalink": "https:\/\/rackn.slack.com\/files\/U416T0AAX\/F521KD44T\/image_uploaded_from_ios.jpg",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F521KD44T-5fb196de52",
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U416T0AAX",
        "upload": true,
        "display_as_bot": false,
        "username": "wdennis",
        "bot_id": null,
        "upload_reply_to": "EEA658DF-3A6D-4B95-9F93-1F596A2A2100",
        "ts": "1492704272.390323"
    },
    {
        "text": "that's the repo extracted from ubuntu ISOs isn't it",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492704415.460438"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "yes",
        "ts": "1492704432.468289"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "It tries to keep traffic local to the ISO if possible.",
        "ts": "1492704472.487829"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "What about after install? Shouldn't there be a switch to std Ubuntu repos?",
        "ts": "1492705560.988399"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "The ISO one doesn't have security updates, or universe",
        "ts": "1492705621.016356"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Interesting.  I thought we left them in post install.  It is easy enough to change.",
        "ts": "1492705643.026195"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Found this out when I went to install some sw tools I usually put in right after install (ethtool, tree) and they weren't available ",
        "ts": "1492705701.051839"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "yeah - okay - so you probably want to delete lines 55-61 in the net-post-install.sh.tmpl",
        "ts": "1492705805.099191"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "That will make the default sources.list file not get overwritten.",
        "ts": "1492705837.114612"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "OK",
        "ts": "1492705844.117622"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Another alternative that might work is to change the \/etc\/apt\/sources.list reference to \/etc\/apt\/sources.d\/drp.repo",
        "ts": "1492705886.136464"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Maybe that should be standard, or at least selectable via a property",
        "ts": "1492705886.136692"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Yes - issue please.  Interestingly enough - since you got us off our rears to add template in template support.  I'll be reworking these quite a bit to add those actions.",
        "ts": "1492705969.173696"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Yes, agree, that would be better",
        "ts": "1492705969.173705"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "Will do ",
        "ts": "1492705982.179349"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "In other matters, any DR folk planning on going to USENIX LISA'17?",
        "ts": "1492706167.259103"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "maybe - that is sooooooooo far away.  :slightly_smiling_face:",
        "ts": "1492706214.279138"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "<https:\/\/www.usenix.org\/conference\/lisa17>",
        "ts": "1492706232.286748"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "It would be a good place to demo your wares or give a talk at",
        "ts": "1492706272.304057"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "good to know.  Rob may have gone to the 16",
        "ts": "1492706316.322920"
    },
    {
        "type": "message",
        "user": "U416T0AAX",
        "text": "I may (or may not) be submitting a talk (on Logstash improvements our lab has developed)",
        "ts": "1492706385.352941"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "cool",
        "ts": "1492706519.411703"
    },
    {
        "text": "hm, I couldn't reproduce the wiped partition table issue from what I thought might have been a catalyst",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492707295.748644"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "ok - cool - i guess.",
        "ts": "1492707309.754998"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "<!channel> - PSA - I've updated the k8s workload to the latest kargo tree.  It now defaults to v1.6.1",
        "ts": "1492707370.782912"
    },
    {
        "text": "<@U02DHRR2L|zehicle> is this something I can do about now? edit\/redeploy\/reboot buttons still don't seem to be functional",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492709149.577585"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "@lae - switch to cli.",
        "ts": "1492709227.611494"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "to make sure it works.",
        "ts": "1492709232.613802"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "on the admin node, I usually do this:",
        "ts": "1492709247.620654"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "docker cp compose_rebar_api_1:\/usr\/local\/bin\/rebar \/usr\/local\/bin\/rebar",
        "ts": "1492709262.627543"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "chmod +x \/usr\/local\/bin\/rebar",
        "ts": "1492709268.629946"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "export REBAR_KEY=u:p",
        "ts": "1492709275.633157"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "rebar nodes list",
        "ts": "1492709280.635592"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "rebar nodes redeploy &lt;id of node in question&gt;",
        "ts": "1492709294.641150"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Are the errors in the console of the browser? or in the rebar_api container log?",
        "ts": "1492709350.665884"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Get some of that would be good.  All of that in an issue would be better. :slightly_smiling_face:",
        "ts": "1492709366.673024"
    },
    {
        "text": "console of the browser, I wasn't seeing anything while watching `docker-compose logs`",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492709406.691021"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "okay - still the raw error?",
        "ts": "1492709428.701317"
    },
    {
        "text": "raw error occurs for edit, but there are different errors for redeploy\/reboot",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492709445.709089"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "awesome",
        "ts": "1492709467.718914"
    },
    {
        "text": "so I'm not too familiar with the cli - how do I change a node to change to `local` for redeployment?",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492709527.746118"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "```rebar nodes redeploy &lt;id&gt;```",
        "ts": "1492709569.765143"
    },
    {
        "text": "right, I did that - but does that change it to local? I still see bootenv: sledgehammer in the output",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492709594.776442"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Will set the bootenv to discovery\/sledgehammer, update the node roles run counts to 0",
        "edited": {
            "user": "U02DGQYK1",
            "ts": "1492709613.000000"
        },
        "ts": "1492709606.782434"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "and reboot the node if possible.",
        "ts": "1492709618.787438"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "You should be able to reboot the node now and it should go into sledgehammer.",
        "ts": "1492709664.807888"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "redeploy in the DR sense means to redo discovery and reapply the current config",
        "ts": "1492709713.828962"
    },
    {
        "text": "ah ok",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492709733.838198"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "You may need to manually reboot the node if IPMI is NOT configured and the node is not SSH able.",
        "ts": "1492709749.845803"
    },
    {
        "text": "in the UI there's a dropdown when clicking the redeploy icon so I assumed something different",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492709761.850734"
    },
    {
        "text": "ipmi's usable, I have a small tool for that",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492709774.856522"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "ah - the dropdown lets you reset the OS you want to provision.",
        "ts": "1492709787.862617"
    },
    {
        "text": "```\nrebar nodes propose 2\nrebar nodes update 2 '{\"bootenv\": \"ubuntu-16.04-install\"}'\nrebar nodes commit 2\nrebar nodes power 2 reboot\n```\nis this the proper workflow or am I missing a step?",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492726378.519196"
    },
    {
        "text": "hm, so if I run `nodes update` with either `local` or `sledgehammer` bootenv it'll change the pxelinux config file fine, but `ubuntu-16.04-install` and `centos-7.3.1611-install` don't change it at all",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492726716.604036"
    },
    {
        "text": "Hey folks,  if I run \"join_rebar.sh\" I authenticate OK, but get a * Connection #0 to host 192.168.1.63 left intact\ncurl: (22) The requested URL returned error: 502 Bad Gateway\nWe could not create a node for ourself!",
        "username": "newgoliath",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492727833.874746"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "@Iae - do ```rebar provisioner machines list``` and see if there are errors there.",
        "ts": "1492728309.984431"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "<@U02DMB5J3> - that script is old and fragile.  It check to make sure it is NOT using 3000 as its port to connect to the admin node.",
        "ts": "1492728365.997511"
    },
    {
        "text": "It auths to rebar OK.",
        "username": "newgoliath",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492728379.000682"
    },
    {
        "text": "the ansible installer isn't done yet.  Maybe I'm being to eager. :-)",
        "username": "newgoliath",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492728459.018661"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "oh - patience",
        "edited": {
            "user": "U02DGQYK1",
            "ts": "1492728657.000000"
        },
        "ts": "1492728655.062599"
    },
    {
        "text": "```\nroot@labs-rebar:~\/digitalrebar\/deploy# rebar provisioner machines list\n2017\/04\/21 00:41:31 Error listing provisioner machines: Expected status in the 200 range, got 404 Not Found\n```",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492735304.295411"
    },
    {
        "text": "hm :|",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492735331.299246"
    },
    {
        "text": "```\nprovisioner_1  | [GIN] 2017\/04\/21 - 00:39:56 | 200 |     548.631µs | 172.17.0.11 |   GET     \/bootenvs\/ubuntu-16.04-install\nprovisioner_1  | [GIN] 2017\/04\/21 - 00:40:27 | 200 |     530.185µs | 172.17.0.11 |   GET     \/bootenvs\/local\nprovisioner_1  | provisioner-mgmt2017\/04\/21 00:40:27.680734 backend: Updating bd71b2b6-6687-4b33-9861-1148c6fc2a63 1\nprovisioner_1  | provisioner-mgmt2017\/04\/21 00:40:27.680743 backend: Updating new bd71b2b6-6687-4b33-9861-1148c6fc2a63 1\nprovisioner_1  | machines:bd71b2b6-6687-4b33-9861-1148c6fc2a63 is a ChangeHooker\nprovisioner_1  | [GIN] 2017\/04\/21 - 00:40:27 | 202 |  138.131765ms | 172.17.0.11 |   POST    \/machines\n```\nI see this behaviour in provisioner logs",
        "username": "lae",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1492735437.315393"
    }
]