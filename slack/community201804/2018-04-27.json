[
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "I'm still not sure why the installer worked fine when run outside the runner but failed when run by the runner.  That still puzzles me.  But in this case at least it turned out not to be an issue.  Also the install is way faster when it doesn't spend awhile installing completely unnecessary packages.  :smile:",
        "ts": "1524839352.000650"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Because ... APT ... I suspect there is \"something environmental\" in the chroot environment we run the stages in that is \"slightly different\", causing the issue - APT is just really fragile around the non-interactive paths",
        "ts": "1524839625.000749"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "I mean clearly it's some weird dpkg\/apt issue.  But I wasn't able to track it down and don't really grok what the difference between the two ways of doing the install really are anyway.",
        "ts": "1524839627.000535",
        "reactions": [
            {
                "name": "upside_down_face",
                "users": [
                    "U6QFVRJNB"
                ],
                "count": 1
            }
        ]
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "I'd guess it has something to do with running in a forked shell rather than as part of the preseed install shell?  I dunno.",
        "ts": "1524839655.000087"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "yep - \"weird environmental differences\"",
        "ts": "1524839674.000704"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Yeah.",
        "ts": "1524839683.000091"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "I will say that I didn't really grok workflows until the recent UI change.  Now that they're built by dragging and dropping stages from a sidebar somehow they make perfect sense to me.  I don't know why the older UI didn't, but the new one clicked with me.",
        "ts": "1524840302.000147"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "I was sort of going down the path of using bootenvs for the types of things that you intended workflows to be for.",
        "ts": "1524840341.000657"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Now I'm just building workflows instead, which keeps me from having a jillion slightly different bootenvs at least.",
        "ts": "1524840421.000566",
        "reactions": [
            {
                "name": "sunglasses",
                "users": [
                    "U02DHRR2L"
                ],
                "count": 1
            }
        ]
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "yep - that is the point",
        "ts": "1524840512.000165"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "from my perspective.",
        "ts": "1524840517.000383"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "I see that error in another thing I’m playing with.",
        "ts": "1524840699.000117"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "I’m trying to track it down in my “free” time.",
        "ts": "1524840714.000526"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "It is an interactive question thing, I think.",
        "ts": "1524840733.000114"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Which is weird because the helper has `export DEBIAN_FRONTEND=noninteractive DEBCONF_NONINTERACTIVE_SEEN=true`",
        "ts": "1524840781.000442"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Also I love that there's a CLI link for most everything in the GUI.  Makes it super handy to be able to muddle through the GUI to figure something out then reference the doc quickly if I want to be able to script it later.  I think it would be cool to have a similar thing for API endpoints if possible.",
        "ts": "1524840784.000404"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Hehe, I expressly set `export DEBIAN_FRONTEND=noninteractive` in my script too.",
        "ts": "1524840816.000397"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "with APT ... not weird ... because weird is normal for APT - there are too many confusing and often conflicting ways to set non-interactiveness ... and they don't all work the way they're supposed, in my experience - it's regularly a mess sorting how it's going to work",
        "ts": "1524840858.000161"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "so if you have . helper or {{ template \"setup.tmpl\"}} in your task before the deb stuff it should not try any interactive stuff.",
        "ts": "1524840869.000549"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "DEBIAN_FRONTEND definitely does not work in all of the places and scenarios",
        "ts": "1524840885.000342"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "For paranoia's sake the helper also does `export LC_ALL=C LANGUAGE=C LANG=C`",
        "ts": "1524840898.000147"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "For API stuff there is <https:\/\/localhost:8092\/swagger-ui\/>",
        "ts": "1524840977.000718"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Yeah - this fails -\n```\n      #!\/bin\/bash\n      # Image builder setup tasks\n      # origin: rackn\/image-builder\n      {{template \"setup.tmpl\" .}}\n\n      install cloud-init\n```",
        "ts": "1524840982.000785"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "the API we build is swagger compliant",
        "ts": "1524841005.000041"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "yep",
        "ts": "1524841013.000424"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Hey, a quick look at the Mellanox installer shows that it *also* sets DEBIAN_FRONTEND to noninteractive.  So that's three times that got set in this process for me at least.",
        "ts": "1524841027.000402"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "hah",
        "ts": "1524841035.000126"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "who knows",
        "ts": "1524841043.000609"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "<@U9BU09D51> - the default template helps have `install` which attempts to install RPMs or APTs appropriately.",
        "ts": "1524841060.000134"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Maybe I need to run the tasks with a pty for some $DEITY-forsaken reason.",
        "ts": "1524841068.000225"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Yeah - that is what I’m getting to.",
        "ts": "1524841079.000241"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "So, taking a look at the Ubuntu 18.04 release notes, they rewrote the server installer.",
        "client_msg_id": "2033b370-27b3-4c09-b8a4-8cf9efa4ad56",
        "ts": "1524845783.000182"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "yep - they're very proud of that change",
        "ts": "1524845839.000522"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "So, automating a totally new and poorly documented install framework.",
        "client_msg_id": "3be02e01-bba2-4908-8012-2ce36ecd2905",
        "ts": "1524845842.000135"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Should make for interesting times.",
        "client_msg_id": "a0ad36bd-7079-4f8a-8267-ddeb930e2831",
        "ts": "1524845859.000274"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "old way still works - or at least did in the daily snapshots",
        "ts": "1524845887.000565"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "the ubuntu-18.04-beta-install bootenv\/stage I did worked",
        "ts": "1524845899.000322"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Yeah, the release notes indicate they made that change between beta3 and release.",
        "client_msg_id": "5a0a9c4d-f272-4fa5-b0ff-9a179f434949",
        "ts": "1524845923.000141"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "wow - that's stupid ...",
        "ts": "1524845940.000245"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Personally, I do not want a more desktop install experience for my servers.",
        "client_msg_id": "b36f5a25-c06e-4aec-961c-43bebe9c1518",
        "ts": "1524845991.000376"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "but that's par for the course with past experiences w\/ trusty and xenial, I guess",
        "ts": "1524845992.000024"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "exactly",
        "ts": "1524845998.000591"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "My end goal is to have that totally automated and never actually notice it afterwards.",
        "client_msg_id": "bc77bf08-4897-4da6-835b-b50add464117",
        "ts": "1524846043.000070"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Something else I've run into.  When I clone a stage, I can't delete the existing tasks then add new ones during the clone.  If I try, it will complain about the old tasks not existing when I try to save the new stage.  Instead I have to delete the existing tasks I don't want, save, then edit again and add new tasks.",
        "ts": "1524850485.000192"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "hmmm, that's a UX bug.",
        "ts": "1524850698.000050"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@U9BU09D51> - you can delete the tasks via the CLI - but yeah; UX bug ... if you don't mind, can you please open an Issue, and flag it \"ux-bug\" in the labels:  <https:\/\/github.com\/digitalrebar\/provision\/issues\/new>",
        "attachments": [
            {
                "service_name": "GitHub",
                "title": "Build software better, together",
                "title_link": "https:\/\/github.com\/digitalrebar\/provision\/issues\/new",
                "text": "GitHub is where people build software. More than 27 million people use GitHub to discover, fork, and contribute to over 80 million projects.",
                "fallback": "GitHub: Build software better, together",
                "image_width": 1200,
                "image_height": 620,
                "from_url": "https:\/\/github.com\/digitalrebar\/provision\/issues\/new",
                "service_icon": "https:\/\/a.slack-edge.com\/bfaba\/img\/unfurl_icons\/github.png",
                "id": 1,
                "original_url": "https:\/\/github.com\/digitalrebar\/provision\/issues\/new"
            }
        ],
        "ts": "1524853662.000151"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Sure",
        "ts": "1524853973.000020"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Doesn't seem like I can add a label to my issue.",
        "ts": "1524857136.000422"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "no worries on label",
        "ts": "1524858231.000367"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": ":thumbsup:",
        "ts": "1524858270.000085"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "thx <@U9BU09D51> - I flagged the label and assignments on it",
        "ts": "1524859153.000149"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Cool",
        "ts": "1524859694.000349"
    },
    {
        "type": "message",
        "user": "U32PZNCP5",
        "text": "For anyone interested, I have 1 free pass to GlueCon in Colorado from May 16-17.   The pass only covers your event attendance as I don’t have $ for travel and hotel. If you are interested in going, please let me know by Monday as I have until May 1 to register someone on that pass. After the 1st, the event team leverages the pass for local community schools, etc.",
        "ts": "1524869474.000144"
    },
    {
        "type": "message",
        "user": "U32PZNCP5",
        "text": "First come first serve should more than 1 person want the pass. Have a nice weekend",
        "edited": {
            "user": "U32PZNCP5",
            "ts": "1524869504.000000"
        },
        "ts": "1524869495.000235",
        "reactions": [
            {
                "name": "grin",
                "users": [
                    "U02DHRR2L"
                ],
                "count": 1
            }
        ]
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<!here> ^^^^^^^^",
        "ts": "1524869523.000175"
    }
]