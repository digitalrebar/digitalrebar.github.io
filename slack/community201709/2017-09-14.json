[
    {
        "text": "just starting out..do i need both a V2 and a V3 (DPR) servers? or could i just start out with v3?",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505407959.000181"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "@smartekb - highly recommend you ONLY use DRPv3 server ...",
        "ts": "1505408002.000459"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "we are very close to releasing the DRPv3 ver 3.1 release - likely next week - right now - the current released version is 3.0.5",
        "ts": "1505408033.000409"
    },
    {
        "text": "thx Shane. I'm able to pxe boot a VM using sledgehammer...fter the VM boots up, have not been able to get it to provision an OS (after setting its bootenv to CentOS)",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505408156.000374"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "did you load the ISO ?   you need to run `drpcli bootenvs uploadiso &lt;iso_name&gt;`",
        "ts": "1505408227.000351"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "by default DRP is distributed without any \"content\" - you need to initialize\/add content to be able to deploy it",
        "ts": "1505408328.000467"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "which version are you running?  (`drpcli version`)",
        "ts": "1505408527.000184"
    },
    {
        "text": "i have the iso..it shows all green in the ux. I'm running version 3.05",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505408597.000424"
    },
    {
        "text": "i'll re-run that command ago, but i seem to have issues with the uploadiso command",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505408621.000694"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "can you provide the command\/output of your uploadiso attempt ?",
        "ts": "1505408675.000690"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "in 3.0.5 - you should have an \"assets\" directory and a \"tools\" directory in the base working directory when you did the install",
        "ts": "1505408795.000409"
    },
    {
        "text": "i do have those",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505408824.000366"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "if you do:\n```cd assets\n..\/tools\/discovery-load.sh\n```\nthat is a helper script (needs to run from the `assets` directory) that will load content using the YAML definition files in the `assets\/bootenvs` directory",
        "ts": "1505408872.000047"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "you can also JUST load a specific piece of content via:\n`drpcli bootenvs install bootenvs\/centos-7.3.1611.yml`\nfor example",
        "ts": "1505408910.000435"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "that `tools\/discovery-load.sh` is just a helper - which only runs that one command for different content",
        "ts": "1505408944.000720"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "once the bootenvs load is complete - you should see it in the green UI",
        "ts": "1505409023.000029"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "once you have content loaded ... you need to:\n* *you must* also add the Discovery and Sledgehammer bootenvs - they're required\n* make sure you have a Subnet defined (via UI \"Subnets\" or \"drpcli subnets\" commands\n* boot a machine w\/ PXE enabled that hits the DRP endpoint (your provisioning server)\n* then assign a \"bootenv\" to the machine\n* reboot your server - and it should kick the PXE provisioning process for with the given",
        "ts": "1505409229.000295"
    },
    {
        "text": "Version: v3.0.5-0-2b326b01a5ef733f3fe599cac2c7aaa6e914b17f\n",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505409342.000310"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "yep - the above process should be good for your version",
        "ts": "1505409552.000064"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "one note - there is a small bug in the content - for Ubuntu 16.04 - it tries to get 16.04.2 which is replaced by 16.04.3 in the repos",
        "ts": "1505409588.000035"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "centos will work fine",
        "ts": "1505409596.000363"
    },
    {
        "text": "`root@cn-ddev03:\/opt\/drp\/assets# ..\/tools\/discovery-load.sh\nNo assets directory to work from.\nroot@cn-ddev03:\/opt\/drp\/assets# ls\nbootenvs  isos  profiles  startup  templates\nroot@cn-ddev03:\/opt\/drp\/assets# ls bootenvs\/\ncentos-6.8.yml       debian-8.yml   esxi-6u2.yml       lk-sshd.yml     redhat-7.0.yml           ubuntu-14.04.yml\ncentos-7.3.1611.yml  discovery.yml  lk-k8s-master.yml  local.yml       scientificlinux-6.8.yml  ubuntu-16.04.yml\ndebian-7.yml         esxi-650a.yml  lk-k8s-node.yml    redhat-6.5.yml  sledgehammer.yml         windows-2012r2.yml`\n\n\n",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505409632.000332"
    },
    {
        "text": "that was terrible..lemme clean that up",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505409654.000195"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "oops .... sorry, run that from the parent directory of \"assets\" ... :slightly_smiling_face: my fault",
        "ts": "1505409686.000008"
    },
    {
        "text": "`\/opt\/drp\/assets# ..\/tools\/discovery-load.sh No assets directory to work from.`",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505409689.000408"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "is that discovery load working for you now ?",
        "ts": "1505410182.000018"
    },
    {
        "text": "it did..with a couple errors about local not being available..i'm going to the ux to find out",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505410277.000209"
    },
    {
        "text": "root@cn-ddev03:\/opt\/drp# drpcli bootenvs uploadisos centos-7.3.1611\nAccess CLI commands relating to bootenvs\n\nUsage:\n  drpcli bootenvs [command]\n",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505411340.000323"
    },
    {
        "text": "seems there is no upoadisos command in the binary?",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505411370.000090"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "if you don't have the ISO local to your `drpcli` command - use the `drpcli bootenvs install \/opt\/drp\/assets\/bootenvs\/centos-7.3.1611.yml`",
        "ts": "1505411419.000141"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "if you have the ISO local - do:\n`drpcli isos upload &lt;ISO_FILE&gt; as centos-7.3.1611`",
        "ts": "1505411474.000206"
    },
    {
        "text": "context deadline exceeded\n..does that mean a timeout?",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505411870.000105"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Yes, timeout with download\/upload ",
        "ts": "1505412686.000055"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Is your internet bandwidth constricted? ",
        "ts": "1505412744.000025"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "If so, you might download the iso separately, then, use the \"drpcli isos upload....\" command",
        "edited": {
            "user": "U6QFVRJNB",
            "ts": "1505412886.000000"
        },
        "ts": "1505412871.000618"
    },
    {
        "text": "i have the ubuntu 16.04 iso downloaded locally..can i use the isos upload command to bypass the bug?",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505413447.000230"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Yes, use the \"isos\" command ",
        "ts": "1505413792.000212"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "In a short bit, I can provide you the yaml with the updated content for Ubuntu - at lunch now.... ",
        "ts": "1505413800.000108"
    },
    {
        "text": "cool..thx",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505413906.000083"
    },
    {
        "text": "`root@cn-ddev03:\/opt\/drp\/assets# drpcli bootenvs install bootenvs\/centos-7.3.1611.yml\n2017\/09\/14 14:30:21 Installing bootenv centos-7.3.1611-install\n2017\/09\/14 14:30:21 Uploading isos\/CentOS-7-x86_64-Minimal-1611.iso to DigitalRebar Provision\nError: Failed to fetch bootenv: centos-7.3.1611-install: context deadline exceeded\n`",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505413911.000475"
    },
    {
        "text": "timing out..even on a local iso upload",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505413928.000308"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Is your drpcli command running on your endpoint you are uploading content to? ",
        "ts": "1505413984.000008"
    },
    {
        "text": "yea",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505413994.000431"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "What is the OS distro\/version of your server ",
        "ts": "1505414016.000124"
    },
    {
        "text": "ubuntu 16.04",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505414055.000565"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Can you provide filesystem space info (df - hl) ",
        "ts": "1505414438.000133"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "...and did you install with \"--isolated\" mode - or production mode (i.e. not specifying the \"--isolated\" flag)?",
        "ts": "1505415065.000203"
    },
    {
        "text": "production mode",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505415224.000572"
    },
    {
        "text": "\/dev\/mapper\/cn--ddev03--vg-root   41G   25G   15G  64% \/\n",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505415265.000224"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "smartekb - 2 follow up questions:\n1.  what type of drives is your DRP install (default location would be \/var\/lib\/dr-provision - if you didn't relocate it)\n2.  can you provide the output from this quick DD command? \n`time sh -c \"dd if=\/dev\/zero of=ddfile bs=8k count=250000 &amp;&amp; sync\"; rm ddfile`\n(running from the same directory\/filesystem as your DRP install location (eg \/var\/lib\/dr-provision)",
        "ts": "1505416266.000499"
    },
    {
        "text": "root@cn-ddev03:\/var\/lib\/dr-provision# time sh -c \"dd if=\/dev\/zero of=ddfile bs=8k count=250000 &amp;&amp; sync\"; rm ddfile\n250000+0 records in\n250000+0 records out\n2048000000 bytes (2.0 GB, 1.9 GiB) copied, 7.10381 s, 288 MB\/s\n\nreal    0m14.448s\nuser    0m0.068s\nsys     0m6.828s\n",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505417792.000102"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "We believe you _might_ be hitting a timeout value in the drpcli client - if you're up for testing our latest version (not \"stable\") - then this issue very well might go away ....",
        "ts": "1505417955.000520"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "if you install again from \"tip\" - with production mode - then it'll update the existing version .... the only thing you might need to do is re-enable any subnet(s) you might have created previously",
        "ts": "1505418031.000303"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "there is a new version feature that lets you \"enable\"\/\"disable\" subnets, and the new \"tip\" version sets a subnet to \"disable\"",
        "ts": "1505418065.000485"
    },
    {
        "text": "thats what I did earlier today :smile: ",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505418125.000558"
    },
    {
        "text": "i'l do again",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505418321.000116"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "can you please run \"drpcli version\" ?  you showed me version 3.0.5 previously",
        "ts": "1505418343.000044"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "the \"tip\" will output \"3.0.4-tip-....\" number - which _looks_ older than 3.0.5 - but it's not :slightly_smiling_face:",
        "ts": "1505418363.000198"
    },
    {
        "text": "Version: v3.0.5-0-2b326b01a5ef733f3fe599cac2c7aaa6e914b17f\n",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505418961.000099"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "right - that's older than \"tip\" version - the changes in \"tip\" should have a fix in it for you",
        "ts": "1505418987.000205"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "but if you do \"drpcli version\" with \"tip\" - it'll show a version string of \"3.0.4-tip .... \" though it looks older - it's actually a newer version :slightly_smiling_face:",
        "ts": "1505419021.000188"
    },
    {
        "text": "how do i do this update? wat ive been doing is not working..i'm still showing 3.05",
        "username": "smartekb_twitter",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505421787.000135"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Change the curl url to \"tip\", instead of \"stable\" ",
        "ts": "1505422198.000068"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "and add --drp-version=tip",
        "ts": "1505424115.000521"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "```curl -fsSL <https:\/\/raw.githubusercontent.com\/digitalrebar\/provision\/tip\/tools\/install.sh> | bash -s -- --isolated install --drp-version=tip```",
        "ts": "1505424167.000292"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "except ... don't use \"--isolated\" since you're doing a \"production\" install :slightly_smiling_face:",
        "ts": "1505424249.000487"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": ":slightly_smiling_face: oops..  Thanks",
        "ts": "1505424497.000457"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Okay better version: ```curl -fsSL <https:\/\/raw.githubusercontent.com\/digitalrebar\/provision\/tip\/tools\/install.sh> | bash -s -- --drp-version=tip install```",
        "ts": "1505424546.000249"
    },
    {
        "text": "Greetings folks - can I get some details on how to build an OS install template? It's not super clear to me with the docs for DRP and if it helps I just need CentOS 7",
        "username": "edolnx",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505426610.000093"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "@edolnx - if you are fine with starting with a stock \"minimal\" install - you can use the \"ce-centos\" template from the community content repo",
        "ts": "1505426665.000019"
    },
    {
        "text": "That should be fine. Thanks!",
        "username": "edolnx",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505426774.000079"
    },
    {
        "text": "I can at least look at it to learn\/modify as I go",
        "username": "edolnx",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505426787.000146"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "are you running 3.0.5 ?  (`drpcli version`)",
        "ts": "1505426789.000279"
    },
    {
        "text": "Stable, yeah `Version: v3.0.5-0-2b326b01a5ef733f3fe599cac2c7aaa6e914b17f`",
        "username": "edolnx",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505426839.000224"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "did you do the \"discovery-load.sh\" - or insure you installed the Sledgehammer an Discovery bootenvs already ?",
        "ts": "1505427045.000183"
    },
    {
        "text": "Yes, did the discovery-load",
        "username": "edolnx",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505427065.000105"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "cool - did you do an \"isolated\" install mode or \"production\" ?",
        "ts": "1505427106.000182"
    },
    {
        "text": "I did not do isolated, so production?",
        "username": "edolnx",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505427120.000362"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": ":slightly_smiling_face: yep",
        "ts": "1505427131.000002"
    },
    {
        "text": "I've also had to modify the systemd script to set the IP address and certs correctly",
        "username": "edolnx",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505427134.000151"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "ok - cool",
        "ts": "1505427152.000181"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "did you're content end up installed in \/var\/lib\/tftpboot ?",
        "ts": "1505427179.000171"
    },
    {
        "text": "I think so, my target node booted is was discovered",
        "username": "edolnx",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505427206.000129"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "`drpcli bootenvs install assets\/bootenvs\/centos-7.3.1611.yml`\n(Need to run that from the base directory you did the original install in - or give the fully qualified path to the \"assets\" directory)",
        "ts": "1505427406.000290"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "if you have a Centos 7 minimal ISO file on hand already - you can use the \"isos\" command to just upload the ISO - without doing the download again",
        "ts": "1505427460.000060"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "`drpcli isos upload &lt;ISO_FILE&gt; as centos-7.3.1611`",
        "ts": "1505427486.000143"
    },
    {
        "text": "`[kumulus@koiab dr-provision-install]$ drpcli bootenvs install assets\/bootenvs\/centos-7.3.1611.yml\nError: Error determining whether bootenvs dir exists: stat bootenvs: no such file or directory`",
        "username": "edolnx",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505427494.000407"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "sorry edolnx - you need to run that command from the \"assets\" directory - so:\n```cd &lt;somewhere&gt;\/assets\ndrpcli bootenvs install bootenvs\/centos-7.3.1611.yml```",
        "ts": "1505427807.000271"
    },
    {
        "text": "That looks better!",
        "username": "edolnx",
        "bot_id": "B41PS9J94",
        "type": "message",
        "subtype": "bot_message",
        "ts": "1505427850.000115"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "woot !!",
        "ts": "1505427857.000051"
    }
]