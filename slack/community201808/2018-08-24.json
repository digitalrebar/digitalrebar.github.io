[
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "<!here> Hi guys, working on what we talked on Wednesday. And I got an issue with `inventory\/collect`:\nhere's my config:\n```    \"inventory\/collect\": {\n      \"gohai\": {\n        \"Command\": \"drpcli gohai\",\n        \"Fields\": {\n          \"Interface\": \".Networking.Interfaces[].StableName\",\n          \"SerialNumber\": \".DMI.System.SerialNumber\"\n        }\n      },\n```\nTesting `\".Networking.Interfaces[].StableName\"` is working well on the target server without issue, but when rolling inside a stage\/workflow, I got this error:\n```\n=== COLLECTING INVENTORY ====\nParsing Inventory Group gohai for Machine 8af50e62-70f1-42b6-ad68-1297df75ae8d\n  Collecting Data with cmd: drpcli gohai\n  Starting Collection Loop\n  ... Interface = \"\"\n\"eno1\"\n\"eno2\"\n\"eno3\"\n\"eno4\"\n\"eno49\"\n\"eno50\" (from jq .Networking.Interfaces[].StableName)\njq: error: syntax error, unexpected QQSTRING_START, expecting '}' (Unix shell quoting issues?) at &lt;top-level&gt;, line 2:\n\"eno1\"\njq: 1 compile error\nCommand exited with status 3```\nIs this possible that I miss something or maybe I found a bug ?",
        "client_msg_id": "9c95d31b-d97e-4095-b001-695124f55987",
        "ts": "1535120696.000100"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "jq can be frustrating",
        "client_msg_id": "1019b850-85b3-4b53-8b33-0a6780ffc390",
        "ts": "1535123751.000100"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "one suggestion for working on syntax, use `drpcli gohai | jq [query]` to work out the queries",
        "client_msg_id": "d99a42a9-f2d2-4e07-8bec-17d661573cac",
        "ts": "1535123800.000100"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "you should also look at how the template is rendered to help find syntax.  The test UX has that feature or the CLI can show you templates for jobs too",
        "client_msg_id": "b00999f2-65b1-4f26-b62d-bfaf1a6067b1",
        "ts": "1535123873.000100"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "<@U8RFVLLG1> it would help if I could see the raw data dumps from the system.  This type of jq parse issue is often related to the data being different between systems.  you may need additional jq pipeline steps",
        "client_msg_id": "92e1d2ea-2582-47bb-b16e-c5cbd190b54e",
        "ts": "1535124289.000200"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "sorry <@U8FAN7PLK> ^^ (sorry, Romain and I have a different thread going)",
        "client_msg_id": "a982bbad-eb50-497c-bba6-7b5f54242fd9",
        "ts": "1535124330.000100"
    },
    {
        "type": "message",
        "user": "U8RFVLLG1",
        "text": ":slightly_smiling_face:",
        "client_msg_id": "769dacaf-c4b6-4c1a-9939-951cfda8ea8a",
        "ts": "1535124338.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "<@U8FAN7PLK> - what are you trying to do?",
        "client_msg_id": "9a2f5658-c82c-4629-bd10-4d2aa158edc8",
        "ts": "1535124560.000300"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "just gathering the network interface name.",
        "client_msg_id": "12dd2fa4-576e-4aff-bbad-2c4a263898a4",
        "ts": "1535124578.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "names?",
        "client_msg_id": "87ae6219-c586-4012-a2e9-c474b548d27f",
        "ts": "1535124589.000100"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "messing with inventory\/collect",
        "client_msg_id": "9408f936-b060-4ab4-9667-b81b38cd6b8d",
        "ts": "1535124592.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "I know - I mean you have var that you are creating - `Interface`",
        "client_msg_id": "02ec92d7-98f3-4ec3-ab3a-306bb175b1ad",
        "edited": {
            "user": "U02DGQYK1",
            "ts": "1535124620.000000"
        },
        "ts": "1535124616.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "You are wanting the data from `jq .Networking.Interfaces[].StableName`",
        "client_msg_id": "8d365671-0005-4a2f-ac96-561f70dc2074",
        "ts": "1535124661.000100"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "yeah",
        "client_msg_id": "e4cb4065-0f3b-4584-bdaa-a00ada488511",
        "ts": "1535124674.000200"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "This is going to be a not quite list.",
        "client_msg_id": "8b623f93-1e21-4421-aca1-9f806501a7ab",
        "ts": "1535124677.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "So, what is Interface - a json array or string with , separated or what?",
        "client_msg_id": "a99758fe-3eff-4043-b781-bc6799206255",
        "ts": "1535124700.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "This breaks because it turns into this `{ \"Interface\": \"\" \"en1\"  \"en2\" }`",
        "client_msg_id": "0076fb8a-ba7d-4f27-80c2-bbe0db950ae6",
        "ts": "1535124765.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "That is not valid json.",
        "client_msg_id": "4a32d5d6-ebd0-4487-923c-dfb0704592be",
        "ts": "1535124769.000100"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "```drpcli gohai | jq .Networking.Interfaces[].StableName\n\"\"\n\"eno1\"\n\"eno2\"\n\"eno3\"\n\"eno4\"\n\"eno49\"\n\"eno50\"\n```",
        "client_msg_id": "8d7e78ff-d5cf-481e-9083-63472812fcef",
        "ts": "1535124795.000200"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "that's the output",
        "client_msg_id": "ec4503bc-b431-4614-b795-b4a07490c044",
        "ts": "1535124799.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Yeah - so that isn’t valid json today.",
        "client_msg_id": "de5fb85e-7ce6-4b9c-9d59-c0c59c260304",
        "ts": "1535124815.000100"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "okok",
        "client_msg_id": "d3e3be96-30c7-4aa7-95cb-9a05ec8fe097",
        "ts": "1535124818.000100"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "so I am to precise with my request",
        "client_msg_id": "dfb12a47-405b-4c50-a89e-246abe106021",
        "ts": "1535124829.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "looking at something - <@U8FAN7PLK> - just a second",
        "client_msg_id": "d6727768-f079-466d-88b1-9e78cd584873",
        "ts": "1535124987.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "This will generate a comma separated list with out blanks. `.Networking.Interfaces | map(.StableName|select(length &gt; 0)) | join(\",\")`",
        "client_msg_id": "24748ba9-0c9d-444d-8600-e409d3c49ce5",
        "ts": "1535125337.000200"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "That creates `\"enp0s3,enp0s8\"` on my system.",
        "client_msg_id": "1c3c2969-bfb8-4073-a266-c992ab198036",
        "edited": {
            "user": "U02DGQYK1",
            "ts": "1535125370.000000"
        },
        "ts": "1535125360.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Which is a valid json string and will store in Interface.",
        "client_msg_id": "c8d7e0df-a9aa-48c0-addc-d8495f2a0ee2",
        "ts": "1535125382.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "If you want an array, you would need…",
        "client_msg_id": "00de8b90-fdfb-47b2-982a-62be270f91dc",
        "ts": "1535125400.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "`.Networking.Interfaces | map(.StableName|select(length &gt; 0)) `",
        "client_msg_id": "a71203b4-fa0e-4817-8525-44682b47fa8c",
        "ts": "1535125408.000100",
        "reactions": [
            {
                "name": "grinning",
                "users": [
                    "U02DHRR2L"
                ],
                "count": 1
            }
        ]
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "That will generate:\n```\n[\n  \"enp0s3\",\n  \"enp0s8\"\n]```",
        "client_msg_id": "5870e545-76e8-46d2-ae65-e1dd73f75d99",
        "edited": {
            "user": "U02DGQYK1",
            "ts": "1535125442.000000"
        },
        "ts": "1535125433.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "<@U8FAN7PLK> - does that help?",
        "client_msg_id": "7bd6fe20-f0ae-4297-a7bb-87e6bd1f6e6b",
        "ts": "1535125568.000100"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "let me try",
        "client_msg_id": "028791a1-afc1-4e82-aecb-e4ae2ee5ffcd",
        "ts": "1535125731.000100"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "This works :slightly_smiling_face:",
        "client_msg_id": "434cbda7-8ebe-46ba-b625-c27b0a2745a4",
        "edited": {
            "user": "U8FAN7PLK",
            "ts": "1535126232.000000"
        },
        "ts": "1535126093.000100"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "thanks <@U02DGQYK1>",
        "client_msg_id": "801bfeee-503d-4605-9533-57740b224d22",
        "ts": "1535126245.000100"
    }
]