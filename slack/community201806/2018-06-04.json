[
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "I got the terraform provider to build and init, but I'm getting an error when running:",
        "ts": "1528109531.000376"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "Error: provider.drp: Internal validation of the provider failed! This is always a bug\nwith the provider itself, and not a user issue. Please report\nthis bug:",
        "ts": "1528109534.000056"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "I didn't see the prebuilt binary for some reason. Using that now.",
        "ts": "1528110704.000377"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "I now have a node which gets to terraform-ready ok, then when I run terraform setting workflow to one I've created, a simple ubuntu-18.04 install -&gt; complete, I get the following after the node reboots:  \"Booting kernel failed: Invalid argument\"",
        "ts": "1528120379.000475"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "The workflow is set correctly, and the Description is too. The metadata does not get set though. I've tried adding a 'machine-metadata' stage before the ubuntu-install stage but it's the same result",
        "ts": "1528120475.000300"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@UAZ974NLT> - do you have your Bionic Beaver install working on it's own - without dealing with the Terraform layer added in there ?",
        "ts": "1528120484.000846"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "Humm I tested it on another box but haven't on this one tbh",
        "ts": "1528120503.000650"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "I will do so",
        "ts": "1528120506.000310"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "one thing I'm a little unclear on is why can't you change the boot environ in bulk tasks, but you can change stage?",
        "ts": "1528120861.000810"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "ah so the ubuntu-18.04-install bootenv fails on it's own, even without terraform\/workflows.  I assumed it would work as it did on another box I'm testing on at the moment (at home).",
        "ts": "1528121078.000201"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "The BootEnvs are supposed to be manipulated via Workflow changes --&gt; which changes the stage of a machine - a Stage defines the BootEnv as one of the things that it manipulates",
        "ts": "1528121657.000553"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "If you enable Stages (by setting defaultStage) - then BootEnvs on their own don'ttransition machines any more",
        "ts": "1528121682.000132"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "ok so \"stages &amp; workflows\" are kind of a separate optional method of managing the box which relegates the bootenv to a second-class citizen. Kinda!?",
        "ts": "1528121753.000590"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "since the designed path to modify a Machines state is Through Workflow -&gt; Stages -&gt; BootEnvs - it didn't make sense to leave the Bulk Actions cluttered with too many extra options",
        "ts": "1528121760.000722"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Sure - that works as an analogy - but BootEnvs are still necessary\/important - they're just driven ultimately via Workflows",
        "ts": "1528121790.000846"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "right ok",
        "ts": "1528121799.000361"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "The \"old\" workflow system (`change-stage\/map` Param) was a second class citizen.  In ... somewhere around v3.7.0 era - we rebuilt the workflow system giving `Workflows` first class citizenship",
        "ts": "1528121839.000121"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "thanks. was my fault the boot wasn't working -- server was out of storage :man-facepalming:",
        "ts": "1528123932.000466"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "No worries - it's nice when it's a simple issue :slightly_smiling_face:",
        "ts": "1528124036.000769"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "<@U6QFVRJNB> Is there a way how I can specify different `pxelinux.0`?",
        "ts": "1528124079.000771"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I cannot find where is the `lpxelinux.0` specified to be loaded when using pxelinux ... I would like to override the setting to load my own `pxelinux.0`",
        "ts": "1528124175.000641"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "ah ... it is the DHCP option 67 in the subnet definition?",
        "ts": "1528124342.000488"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Initially yes - then the BootEnv has PXE templates defined which change the behavior",
        "ts": "1528124390.000984"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "I'd like to ask why you need something custom - we do a LOT of autodetection of broken PXE\/UEFI implementations and dynamically serve PXE information based on that",
        "ts": "1528124426.000545"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "if you use a custom PXE then you may loose a lot of goodness we do - if it's a behavior issue, lets discuss that, and it's possible it might be something worth\/needing to roll in to our PXE pieces",
        "ts": "1528124459.000741"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "your `lpxelinux.0` is v6.03 ... I need v3.86",
        "ts": "1528124477.000337"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "ok - lets get <@U02DJQSG8> onboard with this discussion",
        "ts": "1528124507.000566"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "VMware ESXi requires this version otherwise it won't load the `mboot.c32` file",
        "ts": "1528124507.000929"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "ah yes vmware fun ...",
        "ts": "1528124566.000457"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "<@UAZHMFKEE> We have it -- our esxi bootenvs chainload from lpxelinux.0 to esxi.0 with all the appropriate args.",
        "ts": "1528124617.000168"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "esxi.0 is pxelinux 3.86",
        "ts": "1528124635.000509"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "so how can I initiate the `esxi.0`?",
        "ts": "1528124679.000464"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Are you using our esxi bootenvs, or ones you have written?",
        "ts": "1528124711.000006"
    },
    {
        "type": "message",
        "user": "UAZ974NLT",
        "text": "I don't see any esxi bootenvs. I was going to ask that myself",
        "ts": "1528124788.000841"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Yes, they are RackN licensed, and not available in the default community content.",
        "ts": "1528124844.000065"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I have created my own ESXI bootenv ... where can I find yours?",
        "ts": "1528124885.000286"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I cannot see it in the Catalog ...",
        "ts": "1528124938.000549"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "correct - since it's RackN commercial you'd have to have a license to use it",
        "ts": "1528124985.000216"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "I see",
        "ts": "1528125001.000639"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "you can however do a commercial 30 day trial with us - and we can provide you a 30 day trial license to test it (and more things)",
        "ts": "1528125022.000192"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "so what's the trick to employ the `esxi.0` from `lpxelinux.0`?",
        "ts": "1528125025.000326"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "chainload it.",
        "ts": "1528125034.000868"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "is there some other example for the chainloading? ... I have no idea what and where should be chainloaded ...",
        "ts": "1528125176.000350"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "<!here> hey guys, quick question. I am working on a script to monitoring drp. So I am using `drpcli info status` to gather the services health status.\nOf course this command doesn't work if the service dr-provision isn't working and I get an error like this: ```Error: Error creating session: CLIENT_ERROR: Get <https:\/\/127.0.0.1:8092\/api\/v3\/users\/rocketskates\/token>: dial tcp 127.0.0.1:8092: getsockopt: connection refused``` which is completely fine. My question is, is there any more error case that I should consider in my script ?",
        "ts": "1528125435.000485"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "Looking at the code of `info.go` it doesn't seem so but I am not really an expert in Go :slightly_smiling_face:",
        "ts": "1528125547.000855"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "No, assuming you can talk to the info API at all, the rest of the failure cases will be standard auth failures and the returned struct telling you about what ports are reachable and what you should expect to be able to reach.",
        "ts": "1528125661.000018"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "alright perfect.",
        "ts": "1528125682.000015"
    },
    {
        "type": "message",
        "user": "UAZHMFKEE",
        "text": "<@U02DJQSG8> any hint on the chain loading?",
        "ts": "1528126117.000066"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@UAZHMFKEE>  we're in meetings this morning, we'll get back to you in a bit",
        "client_msg_id": "81ebf0a2-5b3c-4156-b177-4b689692e4a4",
        "ts": "1528126300.000607"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "<@UAZHMFKEE> Best way would be to sign up for a 30 day trial license for the os-other content, then take a look at how we did it once you have access.",
        "ts": "1528128043.000263"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Shortest path for that is to send an email to <mailto:support@rackn.com|support@rackn.com> detailing what you need.",
        "ts": "1528128065.000872",
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "UAZHMFKEE"
                ],
                "count": 1
            }
        ]
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "<!here> is there a way to command the services individualy (BINL, API, DHCP, Static, TFTP) from drpcli ?",
        "ts": "1528134965.000761"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@U8FAN7PLK> - what did you have in mind relating to \"command\"?  each of the services are either enabled\/disabled via startup flags, then the appropriate API\/CLI calls make changes to the individual services",
        "ts": "1528135043.000270"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "DHCP is related to Subnets, Reservations, and Leases",
        "ts": "1528135064.000703"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "just start and stop them",
        "ts": "1528135069.000136"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "because when I disable my subnets, and ran `drpcli info status` DHCP still appeared enable and active",
        "ts": "1528135097.000746"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "yes - via the startup flags to the `dr-provision` start options",
        "ts": "1528135111.000632"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "```drp@pixie:~$ .\/dr-provision --help | grep disable\n      --disable-tftp           Disable TFTP server\n      --disable-provisioner    Disable provisioner\n      --disable-dhcp           Disable DHCP server\n      --disable-pxe            Disable PXE\/BINL server```",
        "ts": "1528135141.000194"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "yeah.  Disabling or deleteing subnets does not stop the DHCP server.",
        "ts": "1528135146.000773"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "okok got it",
        "ts": "1528135152.000322"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "It merely stops the DHCP server from responding to requests of any kind for that subnet",
        "ts": "1528135210.000461"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "I was running dr-provision through systemd and didn't check the options",
        "ts": "1528135288.000163"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": ":smile:",
        "ts": "1528135293.000521"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "Last dumb question: is this possible to have a service `Alive` but not `Enabled`(and vice-versa), if yes how can I test it ?",
        "ts": "1528135719.000233"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "No - I don't think so - `enabled` refers to it being enabled in the start up options - while Alive is an active health check that is run to verify the service itself is responding",
        "ts": "1528135896.000390"
    },
    {
        "type": "message",
        "user": "U8FAN7PLK",
        "text": "well, thanks to all these informations I am now monitoring DRP services :slightly_smiling_face:",
        "edited": {
            "user": "U8FAN7PLK",
            "ts": "1528137136.000000"
        },
        "ts": "1528137113.000559",
        "reactions": [
            {
                "name": "tada",
                "users": [
                    "U6QFVRJNB",
                    "U02DHRR2L"
                ],
                "count": 2
            },
            {
                "name": "sunglasses",
                "users": [
                    "U8FAN7PLK"
                ],
                "count": 1
            }
        ]
    }
]