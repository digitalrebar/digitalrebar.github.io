<html><body><style>
			* {
				font-family:sans-serif;
			}
			body {
				text-align:center;
				padding:1em;
			}
			.messages {
				width:100%;
				max-width:700px;
				text-align:left;
				display:inline-block;
			}
			.messages img {
				background-color:rgb(248,244,240);
				width:36px;
				height:36px;
				border-radius:0.2em;
				display:inline-block;
				vertical-align:top;
				margin-right:0.65em;
			}
			.messages .time {
				display:inline-block;
				color:rgb(200,200,200);
				margin-left:0.5em;
			}
			.messages .username {
				display:inline-block;
				font-weight:600;
				line-height:1;
			}
			.messages .message {
				display:inline-block;
				vertical-align:top;
				line-height:1;
				width:calc(100% - 3em);
			}
			.messages .message .msg {
				line-height:1.5;
			}
		</style><div class="messages"><div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 16:53</div><div class="msg">I have some machines with IPMI already configured (username,pass, IP ..) and I want to enable IPMI actions through DRP. I tried to set the parameters of user/password/IP after the machines were discovered, but the actions wont work.
do I have to have a special workflow for that, or am I not doing this right?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:00</div><div class="msg">is there a walkthrough on how to enable IPMI on a pre-configured machines in the documentation?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:05</div><div class="msg">Which parameters?  You need to set  `ipmi/address` `ipmi/username` `ipmi/password` for ipmi actions to work.  You also need to make sure that DRP can access those IP Addresses.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-07-30 18:08</div><div class="msg">Hey there, maybe a dumb question but is there an easy way to kick off post-install tasks in DRP?  I can drop stuff into workflows, but that all happens during the end of the install before the machine has rebooted into the OS.  Is there a way to kick off something after the server has rebooted into the installed OS?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:08</div><div class="msg">the `ipmi/configure/*` is used to configure and should not be touched unless your are trying to configure the BMC.  This would also require the `ipmi-configure` stage to be added to your workflow.  DO NOT ADD unless you are ready for changes.  You must set `ipmi/configure/network` to false and `ipmi/configure/user` to false if you want it to do nothing.   These default to true in the task scripts.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:09</div><div class="msg">@dave.parker - checkout the `task-library` content package.  `runner-service` - it installs a post-install runner that will start when the machine reboots.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:10</div><div class="msg">@greg Does it matter if I set ipmi/username,pass,address after the Discover workflow (with terraform ready at the end)?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-07-30 18:11</div><div class="msg">Thank you</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:12</div><div class="msg">@ - it should not</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:15</div><div class="msg">another thing I had to mention, when I enabled the plugin "IPMI provider" it showed errors about not finding ipmitool, so I installed ipmitool on my Ubuntu bix, and the error is gone.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:17</div><div class="msg">cool - yeah for helpful error messages.  :slightly_smiling_face:</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:18</div><div class="msg">Ok, one last thing: the parameters for user,pass,address are set per machine, correct?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:19</div><div class="msg">Address must be per machine.  username and password can be in a profile or global.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:19</div><div class="msg">Technically, address could be in a profile or global, but that would be strange. :slightly_smiling_face:</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:20</div><div class="msg">I did all that, and when I try to do "power-cycle" action from "Bulk Actions" tab, I end up with an error "command failed, exit status 1"</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:22</div><div class="msg">not sure which log file to check, so I can get more info</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:22</div><div class="msg">The DRP log might have some.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:23</div><div class="msg">Try: `ipmitool -H &lt;ip&gt; -U &lt;username&gt; -P &lt;password&gt; chassis power status`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:23</div><div class="msg">from the DRP system bash.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:26</div><div class="msg">the command failed with :
Error: Unable to establish LAN session
Error: Unable to establish IPMI v1.5 / RMCP session</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:27</div><div class="msg">`ipmitool -H &lt;ip&gt; -U &lt;username&gt; -P &lt;password&gt; -I lanplus chassis power status`</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:29</div><div class="msg">Error: Unable to establish IPMI v2 / RMCP+ session</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:30</div><div class="msg">Is the IP address correct?  does it point to a BMC?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:30</div><div class="msg">yes, and I can ping it and connect to it through web interface</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:30</div><div class="msg">yes, but that doesn?t mean that the BMC has remote IPMI access enabled.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:31</div><div class="msg">for the user in question or the BMC in total.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:32</div><div class="msg">Ok, I will login to the machine's iLo and double check</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-30 18:32</div><div class="msg">IPMI protocol is disabled by default on most "enterprisey" BMC implementations</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-30 18:33</div><div class="msg">you need to enable that protocol - I know for certain that's true w/ Dell hardware, pretty sure for iLO on HP as well</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:33</div><div class="msg">Time to feed the :bear:!</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-07-30 18:35</div><div class="msg">I seem to have my plugins in some kind of inconsistent state.  I can't find task-library under my installed plugins or in the available plugins.  I found it under my subscriptions but when I removed it so I could re-add it I still can't find it.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:37</div><div class="msg">it is in the content packages.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-07-30 18:38</div><div class="msg">Hrm ok.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-07-30 18:39</div><div class="msg">Ah, got it.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-07-30 18:40</div><div class="msg">Thanks!</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:41</div><div class="msg">@greg it says that it is enabled:
Enable IPMI/DCMI over LAN on Port 623</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:41</div><div class="msg">is the port number an issue?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:41</div><div class="msg">I think that is the default.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:42</div><div class="msg">Check that user is also allowed IPMI actions.  It would be remote something.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:43</div><div class="msg">yes, user have full privilege</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:45</div><div class="msg">Then run the command line again.  :disappointed: that is all the plugin is doing.  If the ipmitool command line doesn?t work neither will the plugin.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:45</div><div class="msg">I don?t have an ILO handy to check and confirm your settings.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:46</div><div class="msg">OK, thanks I will keep digging and will post the solution here if I find one</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:46</div><div class="msg">Awesome - thanks</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-07-30 18:48</div><div class="msg">So what's the workflow here? I put runner-service stage in the workflow, then I can put other things after that that will run on the host after a reboot?  Or do I need a new workflow to do that?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:49</div><div class="msg">Add `runner-service` to your workflow after the OS install stage, but before your `finish-install` or `complete` stage.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:49</div><div class="msg">It runs in the post install of your kick start.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:49</div><div class="msg">or preseed.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-07-30 18:50</div><div class="msg">Ok.  But then if I want to run jobs via the runner after the machine has been rebooted, how do I do that?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:50</div><div class="msg">That is what the `finished-install` stage is useful for.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:51</div><div class="msg">do `os-install`, `runner-service`, `finish-install`, other stages after the reboot into the OS, `complete`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-07-30 18:51</div><div class="msg">Oh ok.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-07-30 18:51</div><div class="msg">I will try that.  Thanks</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:52</div><div class="msg">The `finish-install` changes the bootenv to `local`.  This causes the runner to reboot (or exit in the case of OS installs) and lets the install process finish.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:52</div><div class="msg">The runner upon OS start, continues after the `finish-install`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-07-30 18:52</div><div class="msg">Got it.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-30 18:57</div><div class="msg">@greg I did nmap port scan on my machine and end up with a port status "open|filtered", so it might be a firewall issue, that is my guess, because everything is enabled and should work. I will check with our Net Eng team, to figure this out. Thank you for your help.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-30 18:58</div><div class="msg">cool - I?ve seen this in the past with some orgs killing that port through the network.</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a9639a021e5eb0e7a6850f8f2c5120ea.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0008-72.png" /><div class="message"><div class="username">snesbitt</div><div class="time">2018-07-30 23:44</div><div class="msg">Regards terraform-provider - is the userdata  key referenced in terraform-provider-drp/test.tf.example not supported? I'm getting an "invalid or unknown key" error from terraform...</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:09</div><div class="msg">@snesbitt - I believe the ky is `user_data` (with underscore) - which I have been using for sometime successfully.  haven't tried it in a month or so though.   Also, you may want to look at using "ipxe_script_url" as opposed to "user_data" - coupled with "always_pxe" - it's easier to pass the HTTP reference through "ipxe_script_url" than an iPXE "script" blob in the "user-data"</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:09</div><div class="msg">(I'm assuming you are referencing the Packet environment - since that's what that key word (user_data) is for</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a9639a021e5eb0e7a6850f8f2c5120ea.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0008-72.png" /><div class="message"><div class="username">snesbitt</div><div class="time">2018-07-31 00:32</div><div class="msg">@shane Hmm, tried user_data. Same result. From the docs, it looked like this should take a cloud-init userdata configuration. Oh, and the documentation links are broken :blush: (I was looking at the github source)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:32</div><div class="msg">which doc links ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:33</div><div class="msg">user_data has to be a block like:
```#!ipxe
chain <a href="http://147.75.12.34:8091/default.ipxe">http://147.75.12.34:8091/default.ipxe</a>```
if it's not in that exact format, it won't work correctly</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:34</div><div class="msg">using just `ipxe_script_url` you only need define it as `<a href="http://147.75.12.34:8091/default.ipxe">http://147.75.12.34:8091/default.ipxe</a>`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:38</div><div class="msg">Ok - so it seems I might have my wires crossed ... Packet uses "user_data" to control iPXE chaining</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:39</div><div class="msg">you're mentioning cloud-init ... so ... my bad</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a9639a021e5eb0e7a6850f8f2c5120ea.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0008-72.png" /><div class="message"><div class="username">snesbitt</div><div class="time">2018-07-31 00:39</div><div class="msg">The link I'm using is: <a href="https://provision.readthedocs.io/en/tip/doc/integrations/terraform.html">https://provision.readthedocs.io/en/tip/doc/integrations/terraform.html</a>.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:39</div><div class="msg">yes - that got migrated, see the note "moved to component_terraform" ... not very helpful, I know</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:40</div><div class="msg">lets blame @zehicle for that one ... :wink:</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a9639a021e5eb0e7a6850f8f2c5120ea.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0008-72.png" /><div class="message"><div class="username">snesbitt</div><div class="time">2018-07-31 00:40</div><div class="msg">:rolling_on_the_floor_laughing:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:41</div><div class="msg">to find it thorugh links, go to the front page -&gt; Content Packages -&gt; Terraform except ...</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:41</div><div class="msg">it looks like the build of that Doc didn't succeed on that location ...</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:42</div><div class="msg"><a href="https://provision.readthedocs.io/en/latest/doc/content-packages/terraform.html#component-terraform">https://provision.readthedocs.io/en/latest/doc/content-packages/terraform.html#component-terraform</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:42</div><div class="msg">for some reason the "tip" version is busted - the "latest" version of the Doc has the info you are looking for</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a9639a021e5eb0e7a6850f8f2c5120ea.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0008-72.png" /><div class="message"><div class="username">snesbitt</div><div class="time">2018-07-31 00:45</div><div class="msg">@shane - if there is a bug to be found, I will find it.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 00:45</div><div class="msg">:bug:</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a9639a021e5eb0e7a6850f8f2c5120ea.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0008-72.png" /><div class="message"><div class="username">snesbitt</div><div class="time">2018-07-31 00:48</div><div class="msg">@shane - Still no go. Here's my terraform resource def: `resource "drp_machine" "ds03" {
  add_profiles = ["global", "awt.common", "awt.domain.fuzzbutt", "awt.os.ubuntu"]
  Description = "Deployed By Terraform"
  userdata = "${file("bootstrap.conf")}"
  Workflow = "awt-ubuntu18"
}`
This isn't a critical issue and can certainly wait.</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a9639a021e5eb0e7a6850f8f2c5120ea.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0008-72.png" /><div class="message"><div class="username">snesbitt</div><div class="time">2018-07-31 00:50</div><div class="msg">@shane I did perform a grep through your plugin code, and I don't see a definition for anything similar to user_data except in the example file. Unless it is provided by the plugin framework it may not be defined.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-31 00:51</div><div class="msg">It should go away. @snesbitt - it is replaced by a parameter.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-31 00:51</div><div class="msg">Plus - what do you think it means?  My guess is that you don?t have the content pieces that actually use it.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-31 00:51</div><div class="msg">It is used by the image-deploy plugin.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-31 00:52</div><div class="msg">It is replaced by this parameter: `cloud-init/user-data`</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a9639a021e5eb0e7a6850f8f2c5120ea.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0008-72.png" /><div class="message"><div class="username">snesbitt</div><div class="time">2018-07-31 00:53</div><div class="msg">@greg Ah that explains it. I'm on the community edition and I don't believe image-deploy is available.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-07-31 00:54</div><div class="msg">It is used by the `image-deploy-cloud-init` stage.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-31 02:55</div><div class="msg">Hi All,  i configured a new subnet to DHCP server and try to provision a new machine. However on the new machine console keeps display</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-31 02:56</div><div class="msg">any suggestions?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-31 02:57</div><div class="msg">on the other subnet(s) everything is working fine</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-31 03:01</div><div class="msg">the ?nc? command from one of the machine on the same subnet can reached to the DR provision without problem</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-31 03:01</div><div class="msg">$ nc -vuzw 5 10.11.110.50 69
Ncat: Version 7.50 ( <a href="https://nmap.org/ncat">https://nmap.org/ncat</a> )
Ncat: Connected to 10.11.110.50:69.
Ncat: UDP packet sent successfully
Ncat: 1 bytes sent, 0 bytes received in 2.02 seconds.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 03:02</div><div class="msg">Did you verify DRP is configured with a subnet spec for that IP segment? </div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 03:02</div><div class="msg">Also, fire up tcpdump and make sure DHCP is reaching the DRP Endpoint </div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-31 03:11</div><div class="msg">@shane yes we did; unfortunately i don?t have an access the DHCP  server to run tcpdump</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-07-31 03:17</div><div class="msg">What version of DRP? </div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-07-31 03:29</div><div class="msg">It sounds like your are using another DHCP server to point to DRP?   Can you share the config of that DHCP server too?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-31 03:42</div><div class="msg">subnet 10.11.133.128 netmask 255.255.255.224 {
             option domain-name ?<a href="http://eng.fireeye.com">http://eng.fireeye.com</a>?;
             option domain-name-servers 10.11.10.11, 10.11.10.12, 10.11.10.139, 10.11.10.140;
             option routers 10.11.133.131   ;
             server-name ?10.11.110.50";
             next-server 10.11.110.50;
             filename ?lpxelinux.0?;
            
             if (substring(option vendor-class-identifier,0,9)=?PXEClient:Arch:00006") {
                          # Option filter ?UEFI-BOOTIA32.efi?
                          server-name ?10.11.110.50";
                          next-server 10.11.110.50;
                          filename ?bootia32.efi?;
             }
             elsif (substring(option vendor-class-identifier,0,9)=?PXEClient:Arch:00007") {
                          # Option filter ?UEFI-BOOTX64.efi?
                          server-name ?10.11.110.50";
                          next-server 10.11.110.50;
                          filename ?bootx64.efi?;
             }</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-31 03:43</div><div class="msg">@shane $ drpcli version
Version: v3.8.0-0-1e4c58d48257bdb9562126fefc89897bae23210e</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-07-31 04:01</div><div class="msg">DRP is running on 10.11.110.50?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-07-31 04:02</div><div class="msg">if you can control the subnets, why not use DRP as your DHCP server for that subnet?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-31 04:07</div><div class="msg">My previous teammate was configured DRP relying on main DHCP server so we don?t want to run it on DRP </div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-07-31 05:03</div><div class="msg">Most of existing subnets are working fine, except this one. Is there any ways to verify the existing configured with a new subnet </div></div></div><br/>
</div></body></html>