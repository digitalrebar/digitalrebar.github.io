<html><body><style>
			* {
				font-family:sans-serif;
			}
			body {
				text-align:center;
				padding:1em;
			}
			.messages {
				width:100%;
				max-width:700px;
				text-align:left;
				display:inline-block;
			}
			.messages img {
				background-color:rgb(248,244,240);
				width:36px;
				height:36px;
				border-radius:0.2em;
				display:inline-block;
				vertical-align:top;
				margin-right:0.65em;
			}
			.messages .time {
				display:inline-block;
				color:rgb(200,200,200);
				margin-left:0.5em;
			}
			.messages .username {
				display:inline-block;
				font-weight:600;
				line-height:1;
			}
			.messages .message {
				display:inline-block;
				vertical-align:top;
				line-height:1;
				width:calc(100% - 3em);
			}
			.messages .message .msg {
				line-height:1.5;
			}
		</style><div class="messages"><div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 15:10</div><div class="msg">does sledgehammer can boot a RPi?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 15:11</div><div class="msg">@ - at the moment, we do not support booting ARM based hardware - we are working on this feature - no specifics on release of it though - DRP Endpoint itself does support running on an ARM platform - and we have community and customers that have used RPi platforms successfully</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 15:16</div><div class="msg">thanks @shane, can I at least serve a netboot image through drp so the Rpi can boot? or its all based on iPXE ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 16:18</div><div class="msg">@ - not entirely sure ... I'd have to check w/ @vlowther if he has any thoughts on that - we did just add (experimental) Apple BSDP support for Apple NetBoot and NetInstall capabilities - that's in the current `tip` version (and _very_ experimental right now)</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 16:20</div><div class="msg">:thumbsup: thanks, i'm looking into terraform to power on/off and rest the pi cluster...I Can do it with commands</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 16:37</div><div class="msg">looks like slack finally came back from a siesta ...</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 16:37</div><div class="msg">you can also terraform-all-the-DRP-things, too: <a href="https://provision.readthedocs.io/en/tip/doc/content-packages/terraform.html">https://provision.readthedocs.io/en/tip/doc/content-packages/terraform.html</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:39</div><div class="msg">@  If you can point me at something that describes the netboot protocol an rpi uses, I can tell you how hard it would be to get dr-provision to netboot it.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 16:39</div><div class="msg">awesome</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 16:40</div><div class="msg">@vlowther <a href="https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net_tutorial.md">https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net_tutorial.md</a></div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 16:41</div><div class="msg">it uses a bootcode.bin file that is served via the tftp</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:44</div><div class="msg">ok, so slap that and the associated start.elf (as mentioned in <a href="https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net.md">https://www.raspberrypi.org/documentation/hardware/raspberrypi/bootmodes/net.md</a>) under /var/lib/dr-provision/tftpboot and see what happens.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:45</div><div class="msg">That will not help with getting Sledgehamemr to run on it for a huge variety of reasons, but it is a valid smoketest.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:46</div><div class="msg">hm</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:48</div><div class="msg">reading more at that doc, the Pi signals that it is an x86 box running in legacy BIOS mode, with a magic extra vendor options.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:49</div><div class="msg">sighs</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:50</div><div class="msg">There is a standard way in the PXE spec of signalling that you are an arm/arm64 box, guys.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:51</div><div class="msg">instead, based on the incoming DHCP request I have no wqay of knowing if hte box is an RPi or not.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:51</div><div class="msg">I just have to supply the magic vendor option in the offer and hope.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:53</div><div class="msg">They could have sent a vendor option in the DHCP request that indicates the box is an RPi, but nooo.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:54</div><div class="msg">gah, whoever hacked that into the rpi firmware is an even worse firmware coder than usual.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 16:59</div><div class="msg">Anyways, you will also need to throw an option 43 into whatever subnet you want to boot your rpis from that has the magic value `Raspberry Pi Boot` except maybe with 3 extra spaces at the end depending on how old your firmware and/or rpi is.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 17:02</div><div class="msg">With that, a `/bootloader.bin` in the static file space (`/var/lib/dr-provision/tftpboot` by default), and the `start.elf` wherever it belongs, your RPi should then try to boot off whatever NFS share you configured for it to netboot from.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 17:04</div><div class="msg">From there, getting it to something vaguely resembling Sledgehammer is an epic journey all on its own.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 17:04</div><div class="msg">Mostly because we don't have one. :slightly_smiling_face:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 17:05</div><div class="msg">/rant off (for now)</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 17:08</div><div class="msg">thanks</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 17:08</div><div class="msg">i'll give it a shot</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 17:09</div><div class="msg">sledgehammer isn't too important...i'm thinking to boot rancheros for rpi</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 21:40</div><div class="msg">hi all, it?s really strange when i display the machine profile via UUID, but i can?t destroy it. any thought?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 21:40</div><div class="msg">$ drpcli machines show 838e512a-70f0-4483-b4a5-fcbed5401912
{
  ?Address?: ?10.11.106.118",
  ?Available?: true,
  ?BootEnv?: ?wmps-install?,
  ?CurrentJob?: ??,
  ?CurrentTask?: -1,
  ?Description?: ??,
  ?Errors?: [],
  ?HardwareAddrs?: [],
  ?Meta?: {
    ?feature-flags?: ?change-stage-v2?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 21:40</div><div class="msg">$ drpcli machines destroy 838e512a-70f0-4483-b4a5-fcbed5401912
Error: DELETE: key 838e512a-70f0-4483-b4a5-fcbed5401912: not found</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-08-16 21:43</div><div class="msg">hm... Any errors in the dr-provision log?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 21:49</div><div class="msg">i can?t find the error logs; just see job-logs directory and ton of files in there</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 21:51</div><div class="msg">@ - logs would be wherever you send STDOUT when starting up the DRP service in isolated mode, or in the Journal logs in systemd based systems if you start with systemctl</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 21:52</div><div class="msg">got it; thanks</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:02</div><div class="msg">i don?t see anything information related or indicate to destroy the machine at all</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:03</div><div class="msg">Aug 16 22:02:22 labs-provision dr-provision[2207]: dr-provision2018/08/16 22:02:22.725844 [64175:2577]static [error]: /home/travis/gopath/src/github.com/digitalrebar/provision/midlayer/tftp.go:82
Aug 16 22:02:22 labs-provision dr-provision[2207]: [64175:2577]TFTP: lpxelinux.0: transfer error: sending block 0: code=0, error: TFTP Aborted</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:03</div><div class="msg">tjat</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:03</div><div class="msg">that's normal</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:03</div><div class="msg">that's how TFTP likes to get a file size for transfer since TFTP itself (as a protocol) doesn't support file size request operation</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:04</div><div class="msg"><a href="https://provision.readthedocs.io/en/tip/doc/faq-troubleshooting.html#tftp-error">https://provision.readthedocs.io/en/tip/doc/faq-troubleshooting.html#tftp-error</a></div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:04</div><div class="msg">journalctl -u dr-provision.service -f and then $ drpcli machines destroy 838e512a-70f0-4483-b4a5-fcbed5401912
Error: DELETE: key 838e512a-70f0-4483-b4a5-fcbed5401912: not found</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:04</div><div class="msg">i see nothing in the logs</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:05</div><div class="msg">hmm - try to bump the "default log level" up to `debug` in Info &amp; Preferences - then try again - if nothing - try `trace`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:06</div><div class="msg">don't leave it at `trace` long - that will significantly impact the performance of your DRP endpoint</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:06</div><div class="msg">can you also please do an:
`ls -l /var/lib/dr-provision/digitalrebar/machines/838e512a-70f0-4483-b4a5-fcbed5401912.json`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:07</div><div class="msg">that should be the write layers stored copy of the JSON object for the Machine</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:07</div><div class="msg">(you may have relocated /var/lib/dr-provision from default ... )</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:08</div><div class="msg">the file 838* does not exit on that directory</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:09</div><div class="msg">assuming you have more than this one machine on the DRP endpoint - can you see if there are JSON files in that directory ?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:10</div><div class="msg">yes, we have 169 file total</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:11</div><div class="msg">$ ls -l /var/lib/dr-provision/digitalrebar/machines/8
81533173-5ac5-4826-9178-d88cfd22d7c7.json  8739d042-678b-48ff-9694-a69fe03da668.json  8ce1c027-25ce-429e-9c90-69c70b2b35dd.json  8f72549b-8344-4a64-83de-06c1a5d9404e.json
84101a29-daf2-4e04-bb88-fd7b816c2500.json  8acfeab3-d3c7-4c92-823c-4bcb4d7790a1.json  8e95bcfd-c915-464b-ad69-832935350234.json
84bc7826-1d6c-46c5-8716-5f5b2b28f3f8.json  8b9e9ea4-a146-460f-891f-7a53023e7d2c.json  8ecc7936-5283-47a9-8ae9-dcdb788c8f5d.json</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:11</div><div class="msg">$ ls -l /var/lib/dr-provision/digitalrebar/machines/83
ls: cannot access ?/var/lib/dr-provision/digitalrebar/machines/83?: No such file or directory</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:11</div><div class="msg">hmm - so the write file store copy of that machine has been deleted it sounds like</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:12</div><div class="msg">when was last time you restarted that DRP endpoint - and what version is it running ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:12</div><div class="msg">`drpcli info get | jq .version`</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:12</div><div class="msg">last restarted on jul-25</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:13</div><div class="msg">?v3.8.0-0-1e4c58d48257bdb9562126fefc89897bae23210e?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:13</div><div class="msg">did bumping logging level up give any better info ?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:15</div><div class="msg">if you don?t mind to show me how to bump logging level</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:15</div><div class="msg">are you using drpcli or UI ?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:16</div><div class="msg">drpcli</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:22</div><div class="msg">`drpcli prefs set '{"logLevel":"debug"}'`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:23</div><div class="msg">weird ... that one doesn't have a "helper" ... so normally we can do something like: `drpcli prefs set debugFrontend warn`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:23</div><div class="msg">but the `loglevel` field doesn't have a helper like that - so we have to use the JSON format to make it happy</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:26</div><div class="msg">alright the log level is set to debug mode</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:28</div><div class="msg">i?m running $ drpcli machines destroy 838e512a-70f0-4483-b4a5-fcbed5401912
Error: DELETE: key 838e512a-70f0-4483-b4a5-fcbed5401912: not found</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:28</div><div class="msg"># journalctl -u dr-provision.service -f
-- Logs begin at Wed 2018-07-25 15:10:54 UTC. --
Aug 16 22:20:10 labs-provision dr-provision[2207]: dr-provision2018/08/16 22:20:10.934197 [64306:2592]frontend [audit]: /home/travis/gopath/src/github.com/digitalrebar/provision/frontend/frontend.go:359
Aug 16 22:20:10 labs-provision dr-provision[2207]: [64306:2592]Authenticated user ben from 10.10.135.119
Aug 16 22:21:32 labs-provision dr-provision[2207]: dr-provision2018/08/16 22:21:32.121559 [64435:2593]static [error]: /home/travis/gopath/src/github.com/digitalrebar/provision/midlayer/tftp.go:82
Aug 16 22:21:32 labs-provision dr-provision[2207]: [64435:2593]TFTP: lpxelinux.0: transfer error: sending block 0: code=0, error: TFTP Aborted
Aug 16 22:23:16 labs-provision dr-provision[2207]: dr-provision2018/08/16 22:23:16.754754 [64448:2594]static [error]: /home/travis/gopath/src/github.com/digitalrebar/provision/midlayer/tftp.go:82
Aug 16 22:23:16 labs-provision dr-provision[2207]: [64448:2594]TFTP: lpxelinux.0: transfer error: sending block 0: code=0, error: TFTP Aborted
Aug 16 22:25:01 labs-provision dr-provision[2207]: dr-provision2018/08/16 22:25:01.020282 [64456:2595]static [error]: /home/travis/gopath/src/github.com/digitalrebar/provision/midlayer/tftp.go:82
Aug 16 22:25:01 labs-provision dr-provision[2207]: [64456:2595]TFTP: lpxelinux.0: transfer error: sending block 0: code=0, error: TFTP Aborted
Aug 16 22:26:45 labs-provision dr-provision[2207]: dr-provision2018/08/16 22:26:45.149912 [64469:2596]static [error]: /home/travis/gopath/src/github.com/digitalrebar/provision/midlayer/tftp.go:82
Aug 16 22:26:45 labs-provision dr-provision[2207]: [64469:2596]TFTP: lpxelinux.0: transfer error: sending block 0: code=0, error: TFTP Aborted</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:29</div><div class="msg">nope - nothing there</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:30</div><div class="msg">yeah</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:31</div><div class="msg">kick to `trace` and hit it fast to get logs, then kick it back down to `warn`</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:32</div><div class="msg">ok</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:33</div><div class="msg">nothing happen after run $ drpcli machines destroy 838e512a-70f0-4483-b4a5-fcbed5401912
Error: DELETE: key 838e512a-70f0-4483-b4a5-fcbed5401912: not found</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:33</div><div class="msg">$ drpcli prefs set ?{?logLevel?:?trace?}?
{
  ?baseTokenSecret?: ?OxCwy6xWaMMR3i-CKCk54GiFwjVWa5IC?,
  ?debugBootEnv?: ?warn?,
  ?debugDhcp?: ?warn?,
  ?debugFrontend?: ?info?,
  ?debugPlugins?: ?warn?,
  ?debugRenderer?: ?warn?,
  ?defaultBootEnv?: ?local?,
  ?defaultStage?: ?none?,
  ?knownTokenTimeout?: ?3600",
  ?logLevel?: ?trace?,</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:34</div><div class="msg">ok - lets make sure loglevel is back to 'warn' - then try Frontend - so:
```drpcli prefs set '{"logLevel":"warn"}'
drpcli prefs set debugFrontend trace```
hit it with the Delete, then set your Frontend back to "warn":
```drpcli prefs set debugFrontend warn```</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:35</div><div class="msg">i did that</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:38</div><div class="msg">when i run drpcli prefs set debugFrontend trace and $ drpcli machines destroy 838e512a-70f0-4483-b4a5-fcbed5401912</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:39</div><div class="msg">the command is just hanging there without throw out the ?Error?? messages</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:40</div><div class="msg">hmm -  hit it w/ drpcli again and drop debugFrontend back down to warn</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:44</div><div class="msg">now $ drpcli prefs set debugFrontend warn is hanging too</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:44</div><div class="msg">trace on Frontend may have been too aggressive, and we may have wedged DRP :disappointed:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:45</div><div class="msg">there are a few fixes around that between v3.8.0 and current v3.10.0 versions</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:45</div><div class="msg">i can?t run any commands rn.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:46</div><div class="msg">all hanging</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:46</div><div class="msg">unfortunately - you'll need to jump on the DRP endpoint and kill the process and restart ...</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:47</div><div class="msg">on the plus side, it's entirely possible that'll clear up the machine delete issue - we haven't seen that happen in the field before though - so was really hoping to get a log trace</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:48</div><div class="msg">it seems like drpcli prefs set debugFrontend trace caused the dr-provision service hangs</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:48</div><div class="msg">yes - trace level is pretty aggressive</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:50</div><div class="msg">restarted dr-provision but it?s not working</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:52</div><div class="msg">ok - kill process - then check the file / edit to change to "warn":  `/var/lib/dr-provision/digitalrebar/preferences/debugFrontend.json`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:53</div><div class="msg">should look like:  `{"Meta":{},"Name":"debugFrontend","Val":"warn"}`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:53</div><div class="msg">after you edit it - then start DRP</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:54</div><div class="msg">alright it?s back to normal</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:55</div><div class="msg">check if that Machine object exists now (`drpcli machines show &lt;uuid&gt;`)</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:55</div><div class="msg">it?s no longer see that UUID</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:56</div><div class="msg">ls</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:56</div><div class="msg">so - the Machine object existed in the in-memory layers of the Backing Store ... but had been deleted from Disk at some point ... either external action, or somehow by drpcli command - without deleting the object in the in-memory</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:57</div><div class="msg">we've never seen that with DRP before ... so really curious how it got in to that state ...</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:57</div><div class="msg">agree</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 22:59</div><div class="msg">thanks a lot for all your help!</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 22:59</div><div class="msg">a simple test of this via external action shows how we can get in to this state:
```root@demo:~/drp-data/digitalrebar/machines# drpcli machines show 53a4fb08-4184-4158-8e76-24843fb8cc58 | head -3
{
  "Address": "1.2.3.4",
  "Available": true,

root@demo:~/drp-data/digitalrebar/machines# rm 53a4fb08-4184-4158-8e76-24843fb8cc58.json

root@demo:~/drp-data/digitalrebar/machines# drpcli machines show 53a4fb08-4184-4158-8e76-24843fb8cc58 | head -3
{
  "Address": "1.2.3.4",
  "Available": true,

root@demo:~/drp-data/digitalrebar/machines# ls -l 53a4fb08-4184-4158-8e76-24843fb8cc58.json
ls: cannot access 53a4fb08-4184-4158-8e76-24843fb8cc58.json: No such file or directory

root@demo:~/drp-data/digitalrebar/machines# drpcli machines destroy 53a4fb08-4184-4158-8e76-24843fb8cc58
Error: DELETE: remove /root/drp-data/digitalrebar/machines/53a4fb08-4184-4158-8e76-24843fb8cc58.json: no such file or directory```</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 23:00</div><div class="msg">so in that case, the on disk version was destroyed, but the in-memory version still exists</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 23:00</div><div class="msg">not sure if that's the case in your instance - but one path to get there</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 23:00</div><div class="msg">i see, in my case i was using drpcli machines destroy</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 23:02</div><div class="msg">first i was change the bootenv but it didn?t work so i decided to destroy and create it again, somehow, i ran into that error</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-08-16 23:02</div><div class="msg">ok - please let us know if you see it again - we'd like to understand what might have happened ...</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-08-16 23:02</div><div class="msg">ok</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-08-17 00:45</div><div class="msg">@ I'd strongly recommend upgrading for community support.  If you have to stay with 3.8, you may want to consider commercial support. </div></div></div><br/>
</div></body></html>