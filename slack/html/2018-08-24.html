<html><body><style>
			* {
				font-family:sans-serif;
			}
			body {
				text-align:center;
				padding:1em;
			}
			.messages {
				width:100%;
				max-width:700px;
				text-align:left;
				display:inline-block;
			}
			.messages img {
				background-color:rgb(248,244,240);
				width:36px;
				height:36px;
				border-radius:0.2em;
				display:inline-block;
				vertical-align:top;
				margin-right:0.65em;
			}
			.messages .time {
				display:inline-block;
				color:rgb(200,200,200);
				margin-left:0.5em;
			}
			.messages .username {
				display:inline-block;
				font-weight:600;
				line-height:1;
			}
			.messages .message {
				display:inline-block;
				vertical-align:top;
				line-height:1;
				width:calc(100% - 3em);
			}
			.messages .message .msg {
				line-height:1.5;
			}
		</style><div class="messages"><div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-08-24 14:24</div><div class="msg"><!here> Hi guys, working on what we talked on Wednesday. And I got an issue with `inventory/collect`:
here's my config:
```    "inventory/collect": {
      "gohai": {
        "Command": "drpcli gohai",
        "Fields": {
          "Interface": ".Networking.Interfaces[].StableName",
          "SerialNumber": ".DMI.System.SerialNumber"
        }
      },
```
Testing `".Networking.Interfaces[].StableName"` is working well on the target server without issue, but when rolling inside a stage/workflow, I got this error:
```
=== COLLECTING INVENTORY ====
Parsing Inventory Group gohai for Machine 8af50e62-70f1-42b6-ad68-1297df75ae8d
  Collecting Data with cmd: drpcli gohai
  Starting Collection Loop
  ... Interface = ""
"eno1"
"eno2"
"eno3"
"eno4"
"eno49"
"eno50" (from jq .Networking.Interfaces[].StableName)
jq: error: syntax error, unexpected QQSTRING_START, expecting '}' (Unix shell quoting issues?) at &lt;top-level&gt;, line 2:
"eno1"
jq: 1 compile error
Command exited with status 3```
Is this possible that I miss something or maybe I found a bug ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-08-24 15:15</div><div class="msg">jq can be frustrating</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-08-24 15:16</div><div class="msg">one suggestion for working on syntax, use `drpcli gohai | jq [query]` to work out the queries</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-08-24 15:17</div><div class="msg">you should also look at how the template is rendered to help find syntax.  The test UX has that feature or the CLI can show you templates for jobs too</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-08-24 15:24</div><div class="msg">@romain.lafontaine it would help if I could see the raw data dumps from the system.  This type of jq parse issue is often related to the data being different between systems.  you may need additional jq pipeline steps</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-08-24 15:25</div><div class="msg">sorry @florent.wagener ^^ (sorry, Romain and I have a different thread going)</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/a2d274b96ea1d5c2a235db48dea6403b.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0003-72.png" /><div class="message"><div class="username">romain.lafontaine</div><div class="time">2018-08-24 15:25</div><div class="msg">:slightly_smiling_face:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:29</div><div class="msg">@florent.wagener - what are you trying to do?</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-08-24 15:29</div><div class="msg">just gathering the network interface name.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:29</div><div class="msg">names?</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-08-24 15:29</div><div class="msg">messing with inventory/collect</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:30</div><div class="msg">I know - I mean you have var that you are creating - `Interface`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:31</div><div class="msg">You are wanting the data from `jq .Networking.Interfaces[].StableName`</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-08-24 15:31</div><div class="msg">yeah</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:31</div><div class="msg">This is going to be a not quite list.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:31</div><div class="msg">So, what is Interface - a json array or string with , separated or what?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:32</div><div class="msg">This breaks because it turns into this `{ "Interface": "" "en1"  "en2" }`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:32</div><div class="msg">That is not valid json.</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-08-24 15:33</div><div class="msg">```drpcli gohai | jq .Networking.Interfaces[].StableName
""
"eno1"
"eno2"
"eno3"
"eno4"
"eno49"
"eno50"
```</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-08-24 15:33</div><div class="msg">that's the output</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:33</div><div class="msg">Yeah - so that isn?t valid json today.</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-08-24 15:33</div><div class="msg">okok</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-08-24 15:33</div><div class="msg">so I am to precise with my request</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:36</div><div class="msg">looking at something - @florent.wagener - just a second</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:42</div><div class="msg">This will generate a comma separated list with out blanks. `.Networking.Interfaces | map(.StableName|select(length &gt; 0)) | join(",")`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:42</div><div class="msg">That creates `"enp0s3,enp0s8"` on my system.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:43</div><div class="msg">Which is a valid json string and will store in Interface.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:43</div><div class="msg">If you want an array, you would need?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:43</div><div class="msg">`.Networking.Interfaces | map(.StableName|select(length &gt; 0)) `</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:43</div><div class="msg">That will generate:
```
[
  "enp0s3",
  "enp0s8"
]```</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-08-24 15:46</div><div class="msg">@florent.wagener - does that help?</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-08-24 15:48</div><div class="msg">let me try</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-08-24 15:54</div><div class="msg">This works :slightly_smiling_face:</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-08-24 15:57</div><div class="msg">thanks @greg</div></div></div><br/>
</div></body></html>