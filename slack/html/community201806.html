<html><body><style>
			* {
				font-family:sans-serif;
			}
			body {
				text-align:center;
				padding:1em;
			}
			.messages {
				width:100%;
				max-width:700px;
				text-align:left;
				display:inline-block;
			}
			.messages img {
				background-color:rgb(248,244,240);
				width:36px;
				height:36px;
				border-radius:0.2em;
				display:inline-block;
				vertical-align:top;
				margin-right:0.65em;
			}
			.messages .time {
				display:inline-block;
				color:rgb(200,200,200);
				margin-left:0.5em;
			}
			.messages .username {
				display:inline-block;
				font-weight:600;
				line-height:1;
			}
			.messages .message {
				display:inline-block;
				vertical-align:top;
				line-height:1;
				width:calc(100% - 3em);
			}
			.messages .message .msg {
				line-height:1.5;
			}
		</style><div class="messages"><div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 10:52</div><div class="msg">I got the terraform provider to build and init, but I'm getting an error when running:</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 10:52</div><div class="msg">Error: provider.drp: Internal validation of the provider failed! This is always a bug
with the provider itself, and not a user issue. Please report
this bug:</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 11:11</div><div class="msg">I didn't see the prebuilt binary for some reason. Using that now.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 13:52</div><div class="msg">I now have a node which gets to terraform-ready ok, then when I run terraform setting workflow to one I've created, a simple ubuntu-18.04 install -&gt; complete, I get the following after the node reboots:  "Booting kernel failed: Invalid argument"</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 13:54</div><div class="msg">The workflow is set correctly, and the Description is too. The metadata does not get set though. I've tried adding a 'machine-metadata' stage before the ubuntu-install stage but it's the same result</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 13:54</div><div class="msg">@ - do you have your Bionic Beaver install working on it's own - without dealing with the Terraform layer added in there ?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 13:55</div><div class="msg">Humm I tested it on another box but haven't on this one tbh</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 13:55</div><div class="msg">I will do so</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 14:01</div><div class="msg">one thing I'm a little unclear on is why can't you change the boot environ in bulk tasks, but you can change stage?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 14:04</div><div class="msg">ah so the ubuntu-18.04-install bootenv fails on it's own, even without terraform/workflows.  I assumed it would work as it did on another box I'm testing on at the moment (at home).</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 14:14</div><div class="msg">The BootEnvs are supposed to be manipulated via Workflow changes --&gt; which changes the stage of a machine - a Stage defines the BootEnv as one of the things that it manipulates</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 14:14</div><div class="msg">If you enable Stages (by setting defaultStage) - then BootEnvs on their own don'ttransition machines any more</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 14:15</div><div class="msg">ok so "stages &amp; workflows" are kind of a separate optional method of managing the box which relegates the bootenv to a second-class citizen. Kinda!?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 14:16</div><div class="msg">since the designed path to modify a Machines state is Through Workflow -&gt; Stages -&gt; BootEnvs - it didn't make sense to leave the Bulk Actions cluttered with too many extra options</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 14:16</div><div class="msg">Sure - that works as an analogy - but BootEnvs are still necessary/important - they're just driven ultimately via Workflows</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 14:16</div><div class="msg">right ok</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 14:17</div><div class="msg">The "old" workflow system (`change-stage/map` Param) was a second class citizen.  In ... somewhere around v3.7.0 era - we rebuilt the workflow system giving `Workflows` first class citizenship</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 14:52</div><div class="msg">thanks. was my fault the boot wasn't working -- server was out of storage :man-facepalming:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 14:53</div><div class="msg">No worries - it's nice when it's a simple issue :slightly_smiling_face:</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 14:54</div><div class="msg">@shane Is there a way how I can specify different `pxelinux.0`?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 14:56</div><div class="msg">I cannot find where is the `lpxelinux.0` specified to be loaded when using pxelinux ... I would like to override the setting to load my own `pxelinux.0`</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 14:59</div><div class="msg">ah ... it is the DHCP option 67 in the subnet definition?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 14:59</div><div class="msg">Initially yes - then the BootEnv has PXE templates defined which change the behavior</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 15:00</div><div class="msg">I'd like to ask why you need something custom - we do a LOT of autodetection of broken PXE/UEFI implementations and dynamically serve PXE information based on that</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 15:00</div><div class="msg">if you use a custom PXE then you may loose a lot of goodness we do - if it's a behavior issue, lets discuss that, and it's possible it might be something worth/needing to roll in to our PXE pieces</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 15:01</div><div class="msg">your `lpxelinux.0` is v6.03 ... I need v3.86</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 15:01</div><div class="msg">ok - lets get @vlowther onboard with this discussion</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 15:01</div><div class="msg">VMware ESXi requires this version otherwise it won't load the `mboot.c32` file</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 15:02</div><div class="msg">ah yes vmware fun ...</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-04 15:03</div><div class="msg">@ We have it -- our esxi bootenvs chainload from lpxelinux.0 to esxi.0 with all the appropriate args.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-04 15:03</div><div class="msg">esxi.0 is pxelinux 3.86</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 15:04</div><div class="msg">so how can I initiate the `esxi.0`?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-04 15:05</div><div class="msg">Are you using our esxi bootenvs, or ones you have written?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 15:06</div><div class="msg">I don't see any esxi bootenvs. I was going to ask that myself</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-04 15:07</div><div class="msg">Yes, they are RackN licensed, and not available in the default community content.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 15:08</div><div class="msg">I have created my own ESXI bootenv ... where can I find yours?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 15:08</div><div class="msg">I cannot see it in the Catalog ...</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 15:09</div><div class="msg">correct - since it's RackN commercial you'd have to have a license to use it</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 15:10</div><div class="msg">I see</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 15:10</div><div class="msg">you can however do a commercial 30 day trial with us - and we can provide you a 30 day trial license to test it (and more things)</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 15:10</div><div class="msg">so what's the trick to employ the `esxi.0` from `lpxelinux.0`?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-04 15:10</div><div class="msg">chainload it.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 15:12</div><div class="msg">is there some other example for the chainloading? ... I have no idea what and where should be chainloaded ...</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-06-04 15:17</div><div class="msg"><!here> hey guys, quick question. I am working on a script to monitoring drp. So I am using `drpcli info status` to gather the services health status.
Of course this command doesn't work if the service dr-provision isn't working and I get an error like this: ```Error: Error creating session: CLIENT_ERROR: Get <a href="https://127.0.0.1:8092/api/v3/users/rocketskates/token">https://127.0.0.1:8092/api/v3/users/rocketskates/token</a>: dial tcp 127.0.0.1:8092: getsockopt: connection refused``` which is completely fine. My question is, is there any more error case that I should consider in my script ?</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-06-04 15:19</div><div class="msg">Looking at the code of `info.go` it doesn't seem so but I am not really an expert in Go :slightly_smiling_face:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-04 15:21</div><div class="msg">No, assuming you can talk to the info API at all, the rest of the failure cases will be standard auth failures and the returned struct telling you about what ports are reachable and what you should expect to be able to reach.</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-06-04 15:21</div><div class="msg">alright perfect.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-04 15:28</div><div class="msg">@vlowther any hint on the chain loading?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 15:31</div><div class="msg">@  we're in meetings this morning, we'll get back to you in a bit</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-04 16:00</div><div class="msg">@ Best way would be to sign up for a 30 day trial license for the os-other content, then take a look at how we did it once you have access.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-04 16:01</div><div class="msg">Shortest path for that is to send an email to <mailto:support@rackn.com|support@rackn.com> detailing what you need.</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-06-04 17:56</div><div class="msg"><!here> is there a way to command the services individualy (BINL, API, DHCP, Static, TFTP) from drpcli ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 17:57</div><div class="msg">@florent.wagener - what did you have in mind relating to "command"?  each of the services are either enabled/disabled via startup flags, then the appropriate API/CLI calls make changes to the individual services</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 17:57</div><div class="msg">DHCP is related to Subnets, Reservations, and Leases</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-06-04 17:57</div><div class="msg">just start and stop them</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-06-04 17:58</div><div class="msg">because when I disable my subnets, and ran `drpcli info status` DHCP still appeared enable and active</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 17:58</div><div class="msg">yes - via the startup flags to the `dr-provision` start options</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 17:59</div><div class="msg">```drp@pixie:~$ ./dr-provision --help | grep disable
      --disable-tftp           Disable TFTP server
      --disable-provisioner    Disable provisioner
      --disable-dhcp           Disable DHCP server
      --disable-pxe            Disable PXE/BINL server```</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-04 17:59</div><div class="msg">yeah.  Disabling or deleteing subnets does not stop the DHCP server.</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-06-04 17:59</div><div class="msg">okok got it</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-04 18:00</div><div class="msg">It merely stops the DHCP server from responding to requests of any kind for that subnet</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-06-04 18:01</div><div class="msg">I was running dr-provision through systemd and didn't check the options</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-06-04 18:01</div><div class="msg">:smile:</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-06-04 18:08</div><div class="msg">Last dumb question: is this possible to have a service `Alive` but not `Enabled`(and vice-versa), if yes how can I test it ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-04 18:11</div><div class="msg">No - I don't think so - `enabled` refers to it being enabled in the start up options - while Alive is an active health check that is run to verify the service itself is responding</div></div></div><br/>
<div><img src="https://secure.gravatar.com/avatar/8ed489f4fec23363fa7edff0cf3fab50.jpg?s=72&d=https%3A%2F%2Fa.slack-edge.com%2F66f9%2Fimg%2Favatars%2Fava_0015-72.png" /><div class="message"><div class="username">florent.wagener</div><div class="time">2018-06-04 18:31</div><div class="msg">well, thanks to all these informations I am now monitoring DRP services :slightly_smiling_face:</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:20</div><div class="msg">has joined #community201806</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:23</div><div class="msg">Hello, I'm new to DR (and to slack altough I'm using Gitlab's mattermost).</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:23</div><div class="msg">Is this the place to ask some basic question about Digitar Rebar ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 13:24</div><div class="msg">yes it is ... and $welcome @</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:24</div><div class="msg">Digital Rebar welcome information is here &gt; <a href="http://rebar.digital/community/welcome.html">http://rebar.digital/community/welcome.html</a></div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:24</div><div class="msg">ok thanks</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 13:25</div><div class="msg">it'll be a short bit until we can respond, we have a daily stand-up meting starting now</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 13:25</div><div class="msg">but plz ask your questions</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:25</div><div class="msg">I'm considering switching from XCAT to some other provisioning tool for the initial bootstrap of HPC cluster servers</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:26</div><div class="msg">Before XCAT we did use cobbler but XCAT was cool because it offers discovery</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:27</div><div class="msg">my understanding is that DR could be an XCAT alternative (as The Foreman is) and I'm trying to install it on a test VM/VLAN/subnet</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:28</div><div class="msg">the VM I'd like to run it on has 2 network interfaces in 2 different subnets and I want to be sure to start DHCP *only* on the correct one</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:28</div><div class="msg">is the 'define a subnet in json' section the answer in the doc to that ?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:30</div><div class="msg">in short : eth0 &lt;-&gt; vlan A (which may receive DHCP request for the whole site dhcp server) eth1 &lt;-&gt; vlan B : I want DR to answer dhcp request only on this interface</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 13:30</div><div class="msg">Yes - "define subnet" does this for each Network Pool you want to service for DHCP</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 13:31</div><div class="msg">each `Subnet` defined can be switched on or off to define whether or not to answer DHCP queries for hosts coming from that subnet</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 13:31</div><div class="msg">You can also use the Web Portal to do all of that - and Subnet creation is easier via Portal:  <a href="https://portal.rackn.io/">https://portal.rackn.io/</a></div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:32</div><div class="msg">but I'm talking about an on premise installation, right ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 13:32</div><div class="msg">yes - Portal can manage the on-prem DRP Endpoints (services)</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:32</div><div class="msg">ok thanks</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 13:32</div><div class="msg">or API or CLI</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 13:33</div><div class="msg">or for commercial users that need full airgap capability, you can run the Portal on-prem as well - that's a commercial license</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:33</div><div class="msg">I've got 2 other simple questions at this point.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:35</div><div class="msg">XCAT discovery allowed switched-based discovery which was very useful for us because we couldn't trust people who reported us the MAC addresses</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:35</div><div class="msg">So we only had to map hostname &lt;-&gt; switch/port into XCAT database</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:36</div><div class="msg">[as a matter of fact, we don't want a random discovery because servers are grouped by 4 of them in a 2U chassis, so we want to control the naming sequence]</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:36</div><div class="msg">Can DR provide a similar discovery process ?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:37</div><div class="msg">My second question is about the IPMI card configuration : my understanding is that it is possible but though a commercial DR plugin. Is this correct ?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:37</div><div class="msg">thanks</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2016-11-15/104181243072_307b971367a7363128bf_72.jpg" /><div class="message"><div class="username">spector</div><div class="time">2018-06-05 13:43</div><div class="msg">@ I have some more help coming for you in a bit (they are driving to office) as Shane had to head out this morning for a meeting. Stay tuned</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 13:43</div><div class="msg">ok thanks. Do worry, I'm not in a hurry :wink:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2016-11-15/104181243072_307b971367a7363128bf_72.jpg" /><div class="message"><div class="username">spector</div><div class="time">2018-06-05 13:44</div><div class="msg">Perfect. Appreciate your patience.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:09</div><div class="msg">@ - I?m coming to get yelled at for this, but here we go.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:10</div><div class="msg">There is a switch discovery stage using LLDP to get port info.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:10</div><div class="msg">This stores the port info on the machine as parameters that can be then used to drive other actions.  The UX has a switch viewer.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-05 14:11</div><div class="msg">notes that @greg is *supposed* to be on vacation</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:12</div><div class="msg">With regard to sequencing, the bring up can be sequenced or ?fixed? after the fact.  For your naming desire, I would a naming task in a discovery stage that would take the LLDP info and what ever else and rename the node to your desired name.  That way post discovery you would have a correctly named node ready for consumption.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:14</div><div class="msg">With regard to the second question, IPMI plugin provides stages that can be used to configure an access user and IP address.  These range from DHCP or Static or DHCP reserved to Static.  These tasks set access parameters on the machine that enable the power control actions.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:15</div><div class="msg">With regard to your zeroth question, The discovery process tries to inject the booting MAC into the kernel lines so that at least sledgehammer BootEnv can stay on the same DHCP subnet as it goes through the boot discovery process.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:15</div><div class="msg">Thank you greg. We indeed do something similar witch what XCAT calls a 'chain'. One element of the chain is to configure a static ip and user passwd for the ipmi.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:16</div><div class="msg">Okay - then it is very similar but added as a stage in the discovery workflow.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:16</div><div class="msg">for us.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:16</div><div class="msg">My concern about dhcp was not to wreck havoc in other non-test subnets.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:18</div><div class="msg">okay - then for that, it is all good.  DRP can be configured with only the subnets you want and then direct connected or DHCP relayed.  Additionally, DRP can be run as a proxy in parallel to the existing DHCP server, or use the results of an external DHCP server.  Lots of options with little minor details of config depending upon choice.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:21</div><div class="msg">is ipmi and LLDP in the commercial zone or is it provided in the base DR product ?
In fact I can sum up my needs like so :
- switched based discovery
- being able to name hosts according the their port location in order to match the sequence in the chassis
- being able to configure IPMI at discovery time
- being able if possible to update BIOS firmware (we did that running a - often bogus - propriatary utility
- being able to install an OS with some ssh keys or user setup in order to escape as soon as possible to an ansible config  of the host</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:21</div><div class="msg">As a matter of fact, DR seems to suit all of this</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:24</div><div class="msg">Bios Firmware will be based upon hardware type.  Though the system is pluggable or DRP could sequence your utility.  The nicety with DRP is that a maintenance workflow could be created to offline the node, update it, then reenable it.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:24</div><div class="msg">IPMI, BIOS, and LLDP are licensed components.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:24</div><div class="msg">I forgot, we may leave this to go back to stateful nodes but can we use DR to manage an OS image the node's would PXE on in the case of stateless compute nodes (OS in a ramdisk) ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:24</div><div class="msg">That workflow can control is my basic test work flow.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:25</div><div class="msg">I mean not only provide an image in the PXE environment but tools to (re)built it...and so on ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:25</div><div class="msg">That is what sledgehammer is.  We also have a kubernetes demo that is that exact use case.  We boot sledgehammer and bringup k8s in that environment.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:25</div><div class="msg">[sorry for the basic questions]</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:26</div><div class="msg">Oh - RackN has (in various states for completeness) tools to build in-memory images, capture system images, or build full system images.  All of these could be installed with the image-deploy tool set or booted from a BootEnv as a diskless image</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:28</div><div class="msg">@shane?s been working on the image capture and generalizing @vlowther?s sledgehammer build environments.  We now can (need to switch over to it on the next sledgehammer update) build sledgehammer as a set of stages in DRP.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:31</div><div class="msg">What we are doing for now is : we have some stateful nodes (the "admin" nodes,i .e. admin nodes, drm node, accounting nodes) and stateless compute nodes. But it's kind of hard to manage because in short when we deploy something with ansible on the "live" nodes, we play the same roles inside the corresponding chroot and just use an XCAT command which packs the image. But working with chroots causes some difficulties and may be not worth it :wink:</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:32</div><div class="msg">It may be outside the scope of DR the way the image is built</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:33</div><div class="msg">Thanks all for your time. I'll try to play with a test installation at this point.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:33</div><div class="msg">What about the commercial vs free features ? Are IPMI and LLDP commercial "plugins" ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:34</div><div class="msg">Yeah - we are finding that chroot hopping is useful for building some things.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-05 14:35</div><div class="msg">We are talking about a drpcli feature that @vlowther will probably look into that builds and captures images from chroot or atleast can run tasks in chroots.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:39</div><div class="msg">Maybe a more general question : I previously understood (maybe I was wrong) that DR was kind of "meant" to fit in a wider picture, such as to be underneath Terraform for instance. Does it makes sense to use DR only for hardware initial bootstraping (as I explained) or is it kind of overkill ? What would someone for instance choose DR over let's say the Foreman for this only use ?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:41</div><div class="msg">[the fact that the foreman implies Ruby on rails is no fun to me though]</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:42</div><div class="msg">Sorry I didn't see you answered my commercial vs free question. My mistake</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 14:43</div><div class="msg">We are happy for people to use DR for initial hardware bootstrapping. :slightly_smiling_face:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 14:48</div><div class="msg">A significant number of the extra fatures drp-provision has grown started as ways to make all the various tasks needed to discover and configure the servers easier to write, refactor, and maintain.  That they also enable us to do things like stand up a Kubernetes cluster from scratch in 5 mins (not including reboot time) is an spiffy added bonus. :slightly_smiling_face:</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:50</div><div class="msg">Thank you. I'll give it a try. I appreciate the time you spent to clarify all this and congratulation for the work.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 14:54</div><div class="msg">I'm trying to provision ESXi box with the templates from `os-other` content package and I'm not able to get pass the stage where the PXE is trying to load the `pxelinux.cfg/&lt;UUID|HexIP&gt;`. The UUID I can see in the PXE is different from the Machine UUID. Any idea what could be wrong?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 14:58</div><div class="msg">The UUID that PXE tries is the DHCP Client ID, which we don't use at all.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 14:59</div><div class="msg">We only write pxelinux config files for the IP address in hex form and the mac address we expect the system to boot from (if known)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 14:59</div><div class="msg">hm.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 15:04</div><div class="msg">I see. Well the HexIP is not getting any config as well. Is there a ways how I can check that the file is available?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 15:05</div><div class="msg">@ uploaded a file: <a href="https://rackn.slack.com/files/UAZHMFKEE/FB19D118Q/virtualbox_test1_05_06_2018_15_55_26.png">https://rackn.slack.com/files/UAZHMFKEE/FB19D118Q/virtualbox_test1_05_06_2018_15_55_26.png</a> and commented: This is what I'm getting</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 15:07</div><div class="msg">I have a Workflow called `esxi` which has two Stages - `esxi-install` and `complete`. The `esxi-install` stage employs the `esxi-670-install` BootEnv which is a clone of your `esxi-650a-install` with changed ISO and SHA256 sum ...</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 15:15</div><div class="msg">Huh.  What is your default bootenv?  When it hit pxelinux.cfg/default the system should have booted into Sledgehammer.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 15:16</div><div class="msg">Also, what is your unknown bootenv?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 15:17</div><div class="msg">My Default BootEnv is `local`.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 15:18</div><div class="msg">And my Unknown BootEnv is `discovery`.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 15:18</div><div class="msg">ok</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 15:20</div><div class="msg">Has the machine you are trying to install been through discovery?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 15:20</div><div class="msg">I assume there is a machine config for it...</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 15:23</div><div class="msg">no, it's a fresh Machine created by:
```
echo '{
  "Name": "test1",
  "Description": "",
  "Address": "192.168.100.20",
  "Stage": "esxi-install",
  "Runnable": true,
  "Workflow": "esxi"
}' | drpcli machines create -
```</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 15:25</div><div class="msg">hm</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 15:26</div><div class="msg">What does `drpcli machines show Name:test1` return?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 15:26</div><div class="msg">@ uploaded a file: <a href="https://rackn.slack.com/files/UAZHMFKEE/FB1TGFM7V/-.js">https://rackn.slack.com/files/UAZHMFKEE/FB1TGFM7V/-.js</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 15:30</div><div class="msg">ok</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 15:30</div><div class="msg">Is dr-provision handling DHCP?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 15:31</div><div class="msg">yes</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 15:32</div><div class="msg">I can kickstart CentOS on the same Machine if I switch to a different Workflow ...</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 15:33</div><div class="msg">hm</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 15:34</div><div class="msg">@ uploaded a file: <a href="https://rackn.slack.com/files/UAZHMFKEE/FB1TPJWLB/virtualbox_test1_05_06_2018_16_33_45.png">https://rackn.slack.com/files/UAZHMFKEE/FB1TPJWLB/virtualbox_test1_05_06_2018_16_33_45.png</a></div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 15:58</div><div class="msg">@ something is setting TFTP Prefix for your ESXI install</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 16:00</div><div class="msg">i'm pretty sure that shouldn't be /esxi/install when trying to pull the pxelinux.cfg files</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 16:12</div><div class="msg">@ajones the `esxi/install` corresponds to my Workflow called `esxi`</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 16:13</div><div class="msg">I can query all the configs via `curl` or `tftp` so all should work</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 16:13</div><div class="msg">It looks like it's some issue with the VirtualBox PXE ...</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 16:18</div><div class="msg">@ Our ESXi bootenvs use tftp prefixes to ensure that the pxelinux paths that pxelinux 3.86 uses do not overlap with the paths that pxelinux 6.04 use</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 16:20</div><div class="msg">since 3.86 is required for esxi, and uses com32 binary modules instead of the elf ones that syslinux 5.0 and later use.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 16:28</div><div class="msg">@vlowther Ah, I should have guessed that ESXi would need special handling</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-05 16:29</div><div class="msg">It is an annoyance one has to live with when dealing with trying to netboot ESXi.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 16:38</div><div class="msg"><!channel> In a little over an hour we will be hosting our 19th Meetup for Digital Rebar.  We hope to see you all there!   We'll be demoing Kubernetes deployment from bare metal via the KRIB (kubeadm) pattern, have an introduction and discussion on the upcoming Network Configurator tool for Workflow use, and as always - Community discussion time.   Meetup information is at:
<a href="https://www.meetup.com/digitalrebar/events/lchdhpyxjbhb/">https://www.meetup.com/digitalrebar/events/lchdhpyxjbhb/</a></div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 18:02</div><div class="msg">I?m just lurking :slightly_smiling_face:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2016-11-15/104181243072_307b971367a7363128bf_72.jpg" /><div class="message"><div class="username">spector</div><div class="time">2018-06-05 18:06</div><div class="msg">Not a problem at all. Nothing more fun then lurking in open source</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 19:47</div><div class="msg">How do we pull facts in rebar about the node that was provisioned with sledgehammer?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 19:48</div><div class="msg">are you referring to information in the Inventory (gohai-inventory) JSON blob - or  you want to have "custom facts" related to a machine ?</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 19:50</div><div class="msg">dmidecode information or how i can upload a script so it runs.</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 19:51</div><div class="msg">Im trying to create a workflow that calls the stackstorm api with the facts gatehred by sledgehammer</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 19:51</div><div class="msg">ah - so you basically will want to duplicate / customize a Stage - if you follow the elements of a Stage via the Portal, you can see how the pieces are put together</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 19:52</div><div class="msg">ultimately - it leads to a Template - which can be anything - in this case it might be a Bash script, Python, or similar - you can take the JSON output of the `gohai-inventory` and slice/dice it however you want and use that to call the StackStorm api</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 19:55</div><div class="msg">I haven't evaluated this - but there is a github repo that has some basic Stackstorm plus device42 stuff - you can ignore the device42 pieces - but you might get some ideas from it:
<a href="https://github.com/deusofnull/st2-digital-rebar">https://github.com/deusofnull/st2-digital-rebar</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 19:56</div><div class="msg">basically - a Stage refers to Tasks that define something to do - and a Tasks refers to Templates - templates can be Bash or whatever, and it is also golang templatized - so you can make flexible/reusable and dynamically changing content pieces based on Params (variables) and Profiles (collections of Params)</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 20:05</div><div class="msg">Thank you @shane</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 20:06</div><div class="msg">hopefully that makes sense?  feel free to ask questions if not :slightly_smiling_face:</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 20:07</div><div class="msg">by setting up a new machine with sledgehammer, the only data I see is mac address and ip address with uuid</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 20:10</div><div class="msg">You'll need to make sure that Sledgehammer runs Discovery process - and that the `gohai-inventory` task runs</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 20:10</div><div class="msg">if you are NOT running Sledgehammer - you can initiate the `gohai` inventory via the `drpcli` client side binary</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 20:11</div><div class="msg">currently running sledgehammer</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 20:11</div><div class="msg">the `discover` stage runs the `gohai-inventory` task - or, it is supposed to :slightly_smiling_face:</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 20:11</div><div class="msg">is this information suppose to be seen in the machine info</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 20:11</div><div class="msg">if it does - when you iterate the Machine object - you should see a Param named `gohai-inventory` which is a large JSON structure of the machine inventory</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 20:14</div><div class="msg">@ uploaded a file: <a href="https://rackn.slack.com/files/UAQAE0VNE/FB2BJK6ER/info.png">https://rackn.slack.com/files/UAQAE0VNE/FB2BJK6ER/info.png</a></div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 20:18</div><div class="msg">so i see gohai tasks in the ui</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 20:18</div><div class="msg">but i do not see data</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 20:28</div><div class="msg">The `gohai-inventory` is a Param - that should be listed further down on the page</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 20:28</div><div class="msg">@shane uploaded a file: <a href="https://rackn.slack.com/files/U6QFVRJNB/FB24STJSX/screen_shot_2018-06-05_at_13.26.03.png">https://rackn.slack.com/files/U6QFVRJNB/FB24STJSX/screen_shot_2018-06-05_at_13.26.03.png</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 20:34</div><div class="msg">that's one of my Machines - you can also pull the UUID of the machine, and via the CLI - you can do:
`drpcli machines show Name:&lt;Machine_name&gt; | jq '.Params."gohai-inventory"'`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 20:35</div><div class="msg">or
`drpcli machines show &lt;UUID&gt; | jq '.Params."gohai-inventory"'`</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 22:29</div><div class="msg">qq, How hard or easy is it to extend gohai or is it better to write a python script</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 22:30</div><div class="msg">gohai is written in ... Golang ... so extending it isn't exactly hard - but it's not easily exposed to make changes to it</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 22:30</div><div class="msg">I need to collect lldp information</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 22:30</div><div class="msg">the larger question would be ... what do you wish Gohai did... that it doesn't do today ?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 22:31</div><div class="msg">ah - we have RackN supported LLDP switch content today</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 22:31</div><div class="msg">to see what ports it is connected to</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 22:32</div><div class="msg">yep - which is why we have the LLDP content - it is also planned to allow you to map out and show physical switch port info - but that's a future piece - today it shows the discovered LLDP info on each Machine - adding Params with the Switch Port details</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 22:34</div><div class="msg">how do I add that behavior?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 22:37</div><div class="msg">It's available for Registered users of the Portal - via the Portal, go to Contents, and add the `task-library` content - you should see some new stages -namely `network-lldp`</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 22:37</div><div class="msg">add that Stage to one of your workflows - generally speaking your Discovery workflow - though you'll need to "re-Discover" your Machines if they were run without that Stage previously</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 22:48</div><div class="msg">got it and testing now</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-05 22:48</div><div class="msg">ty very much for pointing me in the right direction</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-05 22:54</div><div class="msg">sweet !</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-06 00:08</div><div class="msg">It didn't collect any data</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-06 00:08</div><div class="msg">I'm going to run the lldp command manually</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-06 00:09</div><div class="msg">@zehicle might be able to shed some light on this</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-06 02:25</div><div class="msg">Lldpd needs to be running on the host or switch.  It's not a passive thing.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-06 02:26</div><div class="msg">For vms, run it on the host</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-06 13:44</div><div class="msg">has joined #community201806</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-06 16:12</div><div class="msg">```Log for Job: ce35da65-2e64-4afb-8845-26fe04f16bcd
Starting task network-lldp on 66f80e7e-383f-459a-aef4-1e7e37222fce
Starting command ./network-lldp-network-lldp-start.sh.tmpl


Command running
Checking and starting LLDPD if necessary ... 
Not running. Starting ... 
Created symlink from /etc/systemd/system/multi-user.target.wants/lldpd.service to /usr/lib/systemd/system/lldpd.service.
Sleeping for '20' seconds to collect LLDPD data... 20 19 18 17 16 15 14 13 12 11 10 9 8 7 6 5 4 3 2 1 0
Finished successfully
Command exited with status 0
Action network-lldp-start.sh.tmpl finished
Starting command ./network-lldp-network-lldp-client.sh.tmpl


Command running
Collecting Neighbors information from LLDPctl
{}
Finished successfully
Command exited with status 0
Action network-lldp-client.sh.tmpl finished
Task network-lldp finished
Updated job ce35da65-2e64-4afb-8845-26fe04f16bcd to finished
Task signalled that it finished normally```</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-06 16:12</div><div class="msg">@zehicle :point_up: output of job</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-06 18:05</div><div class="msg">@ $welcome :slightly_smiling_face:</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-06 18:05</div><div class="msg">Digital Rebar welcome information is here &gt; <a href="http://rebar.digital/community/welcome.html">http://rebar.digital/community/welcome.html</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-06 21:19</div><div class="msg">@ it looks like LLDP is not returning any data.  That's normal if you don't have lldpd running on the host or switch.  What happens if you run the command by hand on the system?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-06 21:20</div><div class="msg">It's just running "lldpctl -f json" and then passing that into a param</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-06 21:21</div><div class="msg">actually, it starts lldpd ("systemctl start lldpd")</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-06 21:21</div><div class="msg">then waits and then runs lldpctl</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-06 21:43</div><div class="msg">If I have a custom task that runs a template, what is the easiest way to see what that template looks like for a particular machine?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-06 21:57</div><div class="msg">I think setting the debug level to highest is the easiest</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-06 21:57</div><div class="msg">@vlowther may know about a flag for dry run or other options</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-06 21:58</div><div class="msg">the challenge is getting the system into the right stage - you'll need to set the stage and clear the workflow</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-06 22:00</div><div class="msg">Our design renders templates on demand.  We don't really have a better way to see what a tempalte will look line beyond cranking renderer logs al lthe way up and trying to run the task in question.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-06 22:00</div><div class="msg">Ok</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-06 22:01</div><div class="msg">@dave.parker check the item 22.18 in the $faq</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-06 22:01</div><div class="msg">FAQs are here &gt; <a href="http://provision.readthedocs.io/en/tip/doc/faq-troubleshooting.html">http://provision.readthedocs.io/en/tip/doc/faq-troubleshooting.html</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-06 22:03</div><div class="msg">that discusses rendering kickstart/preseed - using a Phantom host to trick a system in to rendering them - doesn't address generic templates though</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-07 18:33</div><div class="msg"><!here> - we had a great meetup earlier this week, covering the Kubernetes Cluster deployment with our KRIB tooling.  We introduced the concepts and directions for our _Net Wrangler_ tool ... and as always, community questions and answers.   On next meetup on June 19th we'll continue with a demo of our Kubernetes HA cluster builds with KRIB-HA, also demo Net Wrangler in operations, and also announce the v3.9.0 enhancements, features, and bug fixes.  We look forward to seeing you there.  Check out the meetup page for all details and RSVP:
<a href="https://www.meetup.com/digitalrebar/events/lchdhpyxjbzb/">https://www.meetup.com/digitalrebar/events/lchdhpyxjbzb/</a></div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-07 23:00</div><div class="msg">has joined #community201806</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-07 23:49</div><div class="msg">@ $welcome</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-07 23:49</div><div class="msg">Digital Rebar welcome information is here &gt; <a href="http://rebar.digital/community/welcome.html">http://rebar.digital/community/welcome.html</a></div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-11 16:04</div><div class="msg">has joined #community201806</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-11 16:13</div><div class="msg">@ $welcome</div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-11 16:13</div><div class="msg">Digital Rebar welcome information is here &gt; <a href="http://rebar.digital/community/welcome.html">http://rebar.digital/community/welcome.html</a></div></div></div><br/>
<div><img src="" /><div class="message"><div class="username"></div><div class="time">2018-06-11 17:36</div><div class="msg">Thanks @shane. Been following Rob on and off since Crowbar days. Worked in the private cloud space as an intern  at Nimbula and am kicking tires again.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-11 18:47</div><div class="msg">@ glad to have you here!  It's been a wild ride since those days - still amazed that SUSE kept that project going.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-11 21:57</div><div class="msg">I have an issue with a script that tries to do an apt-get install for some extra packages after an ubuntu install.  The script just does an apt-get update and an apt-get install, but the package(s) fail to install because apt cant resolve some of the dependencies.  But the same script runs fun after a reboot.  What's the difference between the environment that scripts started by the runner run in and the environment of the freshly rebooted system?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-11 21:59</div><div class="msg">apt sucks in chroot environments</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-11 21:59</div><div class="msg">this is the pattern I generally use in non-interactive environments to try and get APT to play nicely:
```# enable non-interactive installs
export DEBIAN_FRONTEND=noninteractive
cat &gt; /usr/sbin/policy-rc.d &lt;&lt; EOF
#!/bin/sh
echo "All runlevel operations denied by policy" &gt;&amp;2
exit 101
EOF
chmod 755 /usr/sbin/policy-rc.d

# generic update to the platform
apt-get update
apt-get -y -o Dpkg::Options::="--force-confdef" -o Dpkg::Options::="--force-confold" dist-upgrade```</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-11 21:59</div><div class="msg">followed by:
```rm -f /usr/sbin/policy-rc.d```
after done</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-11 22:00</div><div class="msg">(replace the "dis-upgrade" with whatever you're actually trying to do)</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-11 22:00</div><div class="msg">Ah yeah, I think you showed me this once before when I had a similar problem that I ended up solving by not installing the packages.  :slightly_smiling_face:  Let me see if I can get it to work</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-11 22:00</div><div class="msg">:slightly_smiling_face:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-11 22:01</div><div class="msg">I'm trying to avoid creating a new bootenv to put the packages in a pgksel command.  Which works, but.  Eww.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-11 22:01</div><div class="msg">I think @vlowther had some other APT magic that might need added within the chroot environment</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-11 22:02</div><div class="msg">hmm - I was working with a pattern to update the bootenvs to add User added packages via a Param/Profile applied to the Machines to inject in to the KS/Seed dynamically</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-11 22:02</div><div class="msg">Yeah, whenever I want to install extra packages I tend to do it as a post install task.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-11 22:03</div><div class="msg">which can be done by just writing a simple stage/task/template and adding in to the Workflow</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-11 22:03</div><div class="msg">Sorta.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-11 22:04</div><div class="msg">If you are getting errors doing installs when running the post install scripts, there are a few things that can go wrong.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-11 22:05</div><div class="msg">Most of them are bypassed by making sure you have conifgured repos properly and by using the package  install helpers</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-11 22:05</div><div class="msg">tip has `extra-packages` parameter that is a list of strings that get added to the `pkg-sel` part of the netseed file.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-11 22:05</div><div class="msg">Or that.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-11 22:06</div><div class="msg">My usual real answer is to install packages just before you need them in whatever workload, and not as part of the OS install process.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-11 22:06</div><div class="msg">:slightly_smiling_face:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-11 22:07</div><div class="msg">I thought there was something about APT and stdin/stderr needing to be attached for some operations ... or something ...</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2017-09-18/243018470675_611b6896ed20358ab1aa_72.jpg" /><div class="message"><div class="username">shane</div><div class="time">2018-06-11 22:08</div><div class="msg">right `extra-packages` ... that's what I was thinking of :slightly_smiling_face:</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-11 22:08</div><div class="msg">Yeah, so dpkg pre and post scripts do really silly things with fds.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-15/2462284870_72.jpg" /><div class="message"><div class="username">vlowther</div><div class="time">2018-06-11 22:09</div><div class="msg">for "over 20 years of legacy" reasons.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-12 14:50</div><div class="msg"><!here> new Inventory stage!  We're preparing for the v3.9 release and I wanted to share a recent addition to the task-library that adds often requested inventory features in a simple way.

1) SUMMARY - allows users to define a flat list of items pulled from GOhai (using jq filters)
2) INTEGRITY - allows users to halt workflow if the latest inventory does not match previous inventory as a way to detect tampering or changes
3) VERIFICATION - allows users to apply basic regex to inventory values to validate systems comply with expectations

These settings are configured via params in a shared profile.  The following video shows to to configure them.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-12 14:50</div><div class="msg">The stage is in the task-library tip in advance of the release</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-12 14:51</div><div class="msg"><a href="https://youtu.be/xDqxEW5bgiQ">https://youtu.be/xDqxEW5bgiQ</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-12 15:22</div><div class="msg">So there's an extra-packages parameter that adds user defined packages directly to the pkgsel line in the preseed available in tip?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-12 15:22</div><div class="msg">And also you removed the restriction on hostnames beginning with a numeral?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-12 15:22</div><div class="msg">I think those are two good reasons to update.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2016-11-15/104181243072_307b971367a7363128bf_72.jpg" /><div class="message"><div class="username">spector</div><div class="time">2018-06-12 15:23</div><div class="msg">I have created a new Digital Rebar Community Welcome Guide for new and existing community members. The document has all the information in one place for getting started, understanding how the community works, etc. If you have any feedback for additional content please let me know. The file is available at <a href="http://u.rackn.io/dr_guide">http://u.rackn.io/dr_guide</a></div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-09-17/2677396473_72.jpg" /><div class="message"><div class="username">zehicle</div><div class="time">2018-06-12 17:50</div><div class="msg">The guide is very cool - good graphics and content about the community</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-12 18:06</div><div class="msg">I just updated my test machine to the latest tip, and I see the "extra-packages" param but not where it actually gets used, which I assumed would be in net-seed.tmpl.  Is it not fully implemented yet?</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-12 18:08</div><div class="msg">line 92 in net-seed.tmpl</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2014-07-14/2459866780_72.jpg" /><div class="message"><div class="username">greg</div><div class="time">2018-06-12 18:08</div><div class="msg">Assuming tip drp-community-content.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-12 18:21</div><div class="msg">Ah.  I didn't have tip drp-community-content installed</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-12 18:21</div><div class="msg">I see it now.</div></div></div><br/>
<div><img src="https://avatars.slack-edge.com/2018-02-20/319135093095_c0e6268d269110cacc49_72.gif" /><div class="message"><div class="username">dave.parker</div><div class="time">2018-06-12 18:21</div><div class="msg">Thanks</div></div></div><br/>
</div></body></html>