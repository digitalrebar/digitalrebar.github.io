[
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "I have an Ansible role I wrote to setup dr-provision on alpine\/debian\/centos… just updated it to install 3.7.0, but post setup steps seem to be failing (setup a new admin user, drop the rocketskates user, setup all the preferences and profiles and setup the boot environments). Seems to be auth related? Did something change from 3.6.0? The UI seems to work fine.",
        "ts": "1520079308.000074"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "can you share the script?",
        "ts": "1520087308.000045"
    },
    {
        "user": "U9JUXC1PY",
        "text": "<@U9JUXC1PY> has joined the channel",
        "type": "message",
        "subtype": "channel_join",
        "ts": "1520098002.000004"
    },
    {
        "type": "message",
        "user": "U32PZNCP5",
        "text": "hello <@U9JUXC1PY> $welcome",
        "ts": "1520098374.000137"
    },
    {
        "text": "Digital Rebar welcome information is here &gt; <http:\/\/rebar.digital\/community\/welcome.html>",
        "type": "message",
        "subtype": "slackbot_response",
        "user": "USLACKBOT",
        "ts": "1520098375.000011"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "Sure… it fails in this section. <https:\/\/github.com\/stanchan\/ansible-role-dr-provision\/blob\/master\/tasks\/setup.yml>",
        "attachments": [
            {
                "service_name": "GitHub",
                "title": "stanchan\/ansible-role-dr-provision",
                "title_link": "https:\/\/github.com\/stanchan\/ansible-role-dr-provision\/blob\/master\/tasks\/setup.yml",
                "text": "Contribute to ansible-role-dr-provision development by creating an account on GitHub.",
                "fallback": "GitHub: stanchan\/ansible-role-dr-provision",
                "from_url": "https:\/\/github.com\/stanchan\/ansible-role-dr-provision\/blob\/master\/tasks\/setup.yml",
                "thumb_url": "https:\/\/avatars0.githubusercontent.com\/u\/659277?s=400&v=4",
                "thumb_width": 250,
                "thumb_height": 250,
                "service_icon": "https:\/\/a.slack-edge.com\/bfaba\/img\/unfurl_icons\/github.png",
                "id": 1
            }
        ],
        "ts": "1520099539.000111"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "I flipped it back to v3.6.0 and everything works… seems to be related to the new token auth system that is in place.",
        "edited": {
            "user": "U7A3BJ884",
            "ts": "1520099643.000000"
        },
        "ts": "1520099632.000041"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "<@U7A3BJ884> - I’ll check but first pass is that the drp options changed ",
        "client_msg_id": "8F0195BE-2C6F-4C39-8E0F-1259CC9995C3",
        "thread_ts": "1520104452.000043",
        "reply_count": 0,
        "replies": [],
        "ts": "1520104452.000043"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "Thanks for the tip… I’ll try looking at the options, but I believe I took all the defaults from dr-provision --help",
        "ts": "1520109904.000090"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "actually, that isn’t it.",
        "ts": "1520110092.000081"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Sigh.  I’m working on it now.",
        "ts": "1520110100.000044"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "I hope to have a PR for you shortly.",
        "ts": "1520110115.000100"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "no rush…. thanks for the help greg!",
        "ts": "1520110399.000018"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "are there API docs somewhere for dr-provision? if I wanted to create a custom frontend for it?",
        "ts": "1520111017.000065"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "yes, but that is that drpcli is.",
        "edited": {
            "user": "U02DGQYK1",
            "ts": "1520111040.000000"
        },
        "ts": "1520111039.000004"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "$docs",
        "ts": "1520111050.000019"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "$faq",
        "edited": {
            "user": "U02DGQYK1",
            "ts": "1520111054.000000"
        },
        "ts": "1520111052.000126"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "$faq",
        "ts": "1520111057.000134"
    },
    {
        "text": "FAQs are here &gt; <http:\/\/provision.readthedocs.io\/en\/latest\/doc\/faq-troubleshooting.html>",
        "type": "message",
        "subtype": "slackbot_response",
        "user": "USLACKBOT",
        "ts": "1520111057.000143"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "That should be close.  The nav should have API or something like that.",
        "ts": "1520111079.000021"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "swagger?",
        "ts": "1520111134.000100"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "dang it.  Something broke",
        "ts": "1520111163.000114"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "something else to look at.",
        "ts": "1520111167.000093"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "you can hit the endpoint with \/swagger-ui",
        "ts": "1520111178.000119"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "it will have a graphical UI",
        "ts": "1520111186.000086"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "found it in the docs :slightly_smiling_face:",
        "ts": "1520111199.000101"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "thanks",
        "ts": "1520111202.000073"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "This page is best: <http:\/\/provision.readthedocs.io\/en\/tip\/doc\/api.html>",
        "ts": "1520111235.000051"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "yah… I just noticed that the v3.7.0 was just released not too long ago :slightly_smiling_face:",
        "ts": "1520111240.000084"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@U63ACQT8A> the `drpcli` usage is a very very good tutor for the API - the CLI is dynamically generated from the API - so the resources closely follow the API resources ... that coupled with the Swagger-UI should give you the complete picture ...",
        "ts": "1520111358.000050"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "thanks <@U6QFVRJNB>",
        "ts": "1520111561.000013"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "and ... v3.7.2 will be released shorty fixing a few minor issues",
        "ts": "1520111587.000080"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "already out",
        "ts": "1520111594.000044"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "dang <@U02DGQYK1> - you's too fast !!",
        "ts": "1520111607.000073"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "how is logging handle? is there existing support for a prometheus endpoint? wanted to do something like opentracing against provisioning jobs and display it in something like jaeger or zipkin… just openly thinking :slightly_smiling_face:",
        "ts": "1520111744.000073"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "umm - well - umm . that sounds cool.  We don’t do that.  You can grab events from a websocket stream.",
        "ts": "1520111791.000096"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "or we can work with you on a plugin to push data as appropriate.",
        "ts": "1520111808.000018"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "plugin to push to prometheus sounds plausible.",
        "ts": "1520111826.000176"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": ":thumbsup: would be interested on working on something like that",
        "ts": "1520111884.000029"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "What would “a prometheus endpoint” need?",
        "ts": "1520111920.000085"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "I haven’t looked at any of it.  We can off-line it as well.",
        "ts": "1520111939.000003"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "that part is easy to implement… opentracing would be the interesting part",
        "ts": "1520111955.000032"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Plugin is definitely the best way, IMO ... but we also support Websocket events - so you can register for specific events via that standard method, details:\n<http:\/\/provision.readthedocs.io\/en\/tip\/doc\/integrations\/websocket.html#rs-websocket>",
        "ts": "1520111965.000054"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "is 3.7.2 just release? it says 7 hours ago",
        "ts": "1520112077.000117"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "yes",
        "ts": "1520112085.000039"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "here's a websocket listener that can log out to prometheus\n<https:\/\/github.com\/closeio\/socketshark>",
        "attachments": [
            {
                "service_name": "GitHub",
                "title": "closeio\/socketshark",
                "title_link": "https:\/\/github.com\/closeio\/socketshark",
                "text": "socketshark - A WebSocket message router based on Python\/Redis\/asyncio",
                "fallback": "GitHub: closeio\/socketshark",
                "from_url": "https:\/\/github.com\/closeio\/socketshark",
                "thumb_url": "https:\/\/avatars2.githubusercontent.com\/u\/437267?s=400&v=4",
                "thumb_width": 250,
                "thumb_height": 250,
                "service_icon": "https:\/\/a.slack-edge.com\/bfaba\/img\/unfurl_icons\/github.png",
                "id": 1
            }
        ],
        "ts": "1520112120.000071"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "prometheus is more for internal service metrics… distributed tracing is used for end to end transactions. all cncf projects.",
        "ts": "1520112366.000135"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "still returns an error",
        "ts": "1520112776.000026"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "```\n2018\/03\/03 13:31:16 &amp;{403 Forbidden 403 HTTP\/1.1 1 1 map[Date:[Sat, 03 Mar 2018 21:31:16 GMT] Content-Length:[0] Content-Type:[text\/plain; charset=utf-8]] {} 0 [] false false map[] 0xc4201b6800 0xc4200a6370}\n````",
        "ts": "1520112780.000095"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "I’ll revert back to v3.6.0 for now for testing",
        "ts": "1520112796.000132"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Your playbook needs a little tweaking.",
        "ts": "1520112815.000048"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "is this valid?",
        "ts": "1520112848.000089"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "The problem is the password setting section of the playbook",
        "ts": "1520112863.000088"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "`RS_KEY=\\\"admin:password\\\"\"`",
        "ts": "1520112868.000064"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "I’m fixing other things too",
        "ts": "1520112872.000033"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "HMM - should be, but I’m not getting the admin password set.",
        "ts": "1520112883.000048"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "or should I switch to tokens",
        "ts": "1520112889.000029"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "You can, but I’m almost there.",
        "ts": "1520112917.000056"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "not sure why ```drpcli -U {{ provision_admin_user }} -P \\\"{{ provision_admin_password }}\\\" prefs list &gt;\/dev\/null 2&gt;&amp;1 &amp;&amp; exit 0 || drpcli users password {{ provision_admin_user }} \\\"{{ provision_admin_password }}\\\" &amp;&amp; exit 99```",
        "ts": "1520112925.000027"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "is not working correctly.",
        "ts": "1520112935.000009"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "oh… that part isn’t fixed yet :slightly_smiling_face:",
        "ts": "1520112938.000035"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "sorry",
        "ts": "1520112942.000018"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "where are you getting the maperror thing?",
        "ts": "1520112965.000054"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "just running `drpcli users list`",
        "ts": "1520112984.000102"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "okay - well if admin’s password isn’t set then it will have problems if you set RS_KEY=admin:password",
        "ts": "1520113026.000024"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "don’t need the extra quotes",
        "ts": "1520113038.000091"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "ah",
        "ts": "1520113043.000119"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "see the issue",
        "ts": "1520113052.000050"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "`export RS_KEY=\"admin:password\"`",
        "ts": "1520113063.000114"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "it never changed the password :slightly_smiling_face:",
        "ts": "1520113064.000073"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "right!!",
        "ts": "1520113075.000096"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "I feel some more unit tests and a v3.7.3 coming on",
        "ts": "1520114154.000098"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Can’t set user passwords for some reason.",
        "ts": "1520114176.000059"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "yah… I see the same issue",
        "ts": "1520115377.000106"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "it responds back like it did something",
        "ts": "1520115413.000037"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "yeah - in 3.7.0, to fix all the deadlocks in 3.6.0, we introduced system to prevent that.  The password save is a special pass that we didn’t undo all the testing for.",
        "ts": "1520115467.000125"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "I’ll use the default password for now… I tried using the API to change the password without any luck",
        "ts": "1520116870.000106"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "yeah - the cli and the API use the same backend path.",
        "ts": "1520116895.000083"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "<@U7A3BJ884> - I fixed the user bug and cut a v3.7.3 release.  I have a pull request against your tree that does quite a few changes and fixes.  It seems to work for me.",
        "ts": "1520133776.000040"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "<@U02DGQYK1> Thanks! Looks good. Will merge. I added a few things for idempotence in my working branch. Decided to call the dr-provision API directly for that since it seems to be much more predictable.",
        "ts": "1520135069.000057"
    },
    {
        "type": "message",
        "user": "U7A3BJ884",
        "text": "Really enjoy using dr-provision… much better and easier to use then cobbler! It just seems to work without much fiddling around. Will be working on an awx integration to do a tensorflow on top of kubernetes demo. Looking forward to digging into the code a bit more, too.",
        "ts": "1520135348.000063",
        "reactions": [
            {
                "name": "grin",
                "users": [
                    "U02DHRR2L"
                ],
                "count": 1
            }
        ]
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "cool",
        "ts": "1520135375.000080"
    },
    {
        "type": "message",
        "user": "U02DHRR2L",
        "text": "<@U7A3BJ884> I looked at API integration w\/ Tower (AWX) earlier.   It would be a natural plugin to push machine updates into the AWX including when machines are online or not.  Something to talk about 1x1",
        "ts": "1520137692.000068"
    }
]