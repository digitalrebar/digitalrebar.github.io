[
    {
        "user": "UA02EUXF1",
        "text": "<@UA02EUXF1> has joined the channel",
        "type": "message",
        "subtype": "channel_join",
        "ts": "1522437350.000484"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Hey folks.  I, uh... lost my default.ipxe file.  Somehow.  I was booting off it an hour ago, now I go to boot and it says file not found.  I don't see it in my tftpboot directory either.",
        "ts": "1522446912.000337"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "How do I get it back?  And also how the heck could it have just disappeared like that?",
        "ts": "1522446923.000125"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "<@U9BU09D51> - not sure how it would vanish on you ... we haven't seen that happen in the wild yet ... !   Can you please check your `dr-provision` log files to see if there are any clues in there ?",
        "ts": "1522446975.000185"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "To restore it, you can grab one from an existing DRP instance and just copy it back in to place.  Or you can download the Zip file and extract it from that.  You can find the appropriate Zip file from the Releases page, at:\n<https:\/\/github.com\/digitalrebar\/provision\/releases>",
        "attachments": [
            {
                "service_name": "GitHub",
                "title": "digitalrebar\/provision",
                "title_link": "https:\/\/github.com\/digitalrebar\/provision\/releases",
                "text": "Digital Rebar Provision is a simple and powerful Golang executable that provides a complete API-driven DHCP\/PXE\/TFTP provisioning system.",
                "fallback": "GitHub: digitalrebar\/provision",
                "from_url": "https:\/\/github.com\/digitalrebar\/provision\/releases",
                "thumb_url": "https:\/\/avatars1.githubusercontent.com\/u\/13814120?s=400&v=4",
                "thumb_width": 250,
                "thumb_height": 250,
                "service_icon": "https:\/\/a.slack-edge.com\/bfaba\/img\/unfurl_icons\/github.png",
                "id": 1
            }
        ],
        "ts": "1522447071.000168"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "i.e. v3.7.3 stable release:  <https:\/\/github.com\/digitalrebar\/provision\/releases\/download\/v3.7.3\/dr-provision.zip>",
        "ts": "1522447096.000015"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Where do I find the log files?  I'm on an isolated install.",
        "ts": "1522447144.000112"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "Ah - sorry - \"default.ipxe\" is dynamically generated for a machine when it's requested",
        "ts": "1522447169.000082"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Ooooh",
        "ts": "1522447175.000242"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Ok.",
        "ts": "1522447177.000258"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Well that explains that.",
        "ts": "1522447181.000088"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "we do a lot of magic Just-in-Time generation of things ...",
        "ts": "1522447189.000154"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "But it doesn't explain why it stopped working.",
        "ts": "1522447192.000114"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Hrm, is it only a discovery thing?",
        "ts": "1522447199.000113"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "But I was starting installs by chainloading default.ipxe before, pretty sure.",
        "ts": "1522447217.000221"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "You should be able to load your `default.ipxe` by just referencing it via an HTTP call to the Files server, like:\n`http:\/\/&lt;my_drp_endpoint&gt;:8091\/default.ipxe`",
        "ts": "1522447387.000042"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Yeah.",
        "ts": "1522447394.000265"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "That's exactly what I'm doing.",
        "ts": "1522447398.000052"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "If you did not specify a log file in Isolated mode (eg `dr-provision ... &gt; some_file.log 2&gt;&amp;1 &amp;` you may not have log files",
        "ts": "1522447443.000031"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Ah.",
        "ts": "1522447466.000037"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "In that case I do have a log file, but I overwrite it every time I restart drp so there won't be anything useful in it now.  :disappointed:",
        "ts": "1522447487.000288"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "you may find something in the in-memory logs, via:\n`drpcli logs get | jq '.[].Message'`",
        "ts": "1522447517.000018"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "(or the Logs menu item in the Portal)",
        "ts": "1522447527.000310"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "`&gt;&gt;` == $YourFriend",
        "ts": "1522447546.000131"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Yeah...",
        "ts": "1522447552.000205"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Ok...  It's working now.",
        "ts": "1522447587.000162"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "I think this is what happened.",
        "ts": "1522447592.000014"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "I was doing the chain http like above, but I was also setting filename to ipxe.pxe.  And for some reason I decided that wasn't right and set it to default.ipxe.",
        "ts": "1522447621.000214"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "I just reset it to ipxe.pxe and it started working again.",
        "ts": "1522447637.000130"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "So... was I just making it loop back and look for default.ipxe again?",
        "ts": "1522447657.000346"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "I'm confused what I was doing at all now. I'm tired.",
        "ts": "1522447669.000067"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "I'm not sure what the interaction would be in that case,, likely need <@U02DJQSG8> to weigh in on that",
        "ts": "1522447729.000278"
    },
    {
        "type": "message",
        "user": "U6QFVRJNB",
        "text": "(or <@U02DGQYK1>)",
        "ts": "1522447740.000102"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Here's what my iPXE script looks like.",
        "ts": "1522447750.000212"
    },
    {
        "type": "message",
        "subtype": "file_share",
        "text": "<@U9BU09D51> uploaded a file: <https:\/\/rackn.slack.com\/files\/U9BU09D51\/F9YGF1Y3T\/-.txt|Untitled>",
        "file": {
            "id": "F9YGF1Y3T",
            "created": 1522447802,
            "timestamp": 1522447802,
            "name": "-.txt",
            "title": "Untitled",
            "mimetype": "text\/plain",
            "filetype": "text",
            "pretty_type": "Plain Text",
            "user": "U9BU09D51",
            "editable": true,
            "size": 1372,
            "mode": "snippet",
            "is_external": false,
            "external_type": "",
            "is_public": true,
            "public_url_shared": false,
            "display_as_bot": false,
            "username": "",
            "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F9YGF1Y3T\/-.txt?t=xoxe-2458848645-343586471015-342305248436-7b33f258deefd71ebc0e029ead8a362f",
            "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-F9YGF1Y3T\/download\/-.txt?t=xoxe-2458848645-343586471015-342305248436-7b33f258deefd71ebc0e029ead8a362f",
            "permalink": "https:\/\/rackn.slack.com\/files\/U9BU09D51\/F9YGF1Y3T\/-.txt",
            "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-F9YGF1Y3T-6c91ce7656",
            "edit_link": "https:\/\/rackn.slack.com\/files\/U9BU09D51\/F9YGF1Y3T\/-.txt\/edit",
            "preview": "#!ipxe\r\n\r\nset dns                 X.X.X.X\r\nset next-server         X.X.X.X\r\nset filename\t\t    ipxe.pxe\r",
            "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>#!ipxe<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<div><pre>set dns                 X.X.X.X<\/pre><\/div>\n<div><pre>set next-server         X.X.X.X<\/pre><\/div>\n<div><pre>set filename            ipxe.pxe<\/pre><\/div>\n<div><pre><\/pre><\/div>\n<\/div>\n<\/div>\n",
            "lines": 61,
            "lines_more": 56,
            "preview_is_truncated": true,
            "channels": [],
            "groups": [],
            "ims": [],
            "comments_count": 0
        },
        "user": "U9BU09D51",
        "upload": true,
        "display_as_bot": false,
        "username": "dave.parker",
        "bot_id": null,
        "ts": "1522447802.000299"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "That's the config that works.",
        "ts": "1522447822.000060"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "When I set \"filename\" to default.ipxe that's apparently when everything blew up.",
        "ts": "1522447832.000208"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "Anyway, it's working now, but I'm curious about what I should actually have in that filename directive.  If I'm booting a UEFI system will I need to use ipxe.efi?",
        "ts": "1522447874.000155"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "Make sure you have unknown bootenv preference set to discovery",
        "client_msg_id": "F43BFDE6-570A-4193-9125-1F64228463F7",
        "ts": "1522447877.000025"
    },
    {
        "type": "message",
        "user": "U9BU09D51",
        "text": "I do.",
        "ts": "1522447889.000152"
    },
    {
        "type": "message",
        "user": "U02DGQYK1",
        "text": "That is what makes default.ipxe",
        "client_msg_id": "C7800F00-00D6-4612-963C-D01D61A221B8",
        "ts": "1522447905.000043"
    },
    {
        "type": "message",
        "user": "U02DJQSG8",
        "text": "Do things work if you do not use the `set filename` directive?",
        "ts": "1522452402.000122"
    }
]