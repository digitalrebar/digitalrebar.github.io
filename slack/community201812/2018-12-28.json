[
    {
        "client_msg_id": "6eab4c9d-999b-4166-9531-472bf3d03290",
        "type": "message",
        "text": "<@U02DHRR2L> okay, I think krib\/cluster-master-vip just needs to be removed from WIPE_PARAMS.  I don't think a master count check is needed but that's another way to go.  I'll send a PR.",
        "user": "UF1LXSN15",
        "ts": "1545998081.188600",
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "U02DHRR2L"
                ],
                "count": 1
            }
        ]
    },
    {
        "client_msg_id": "bc6d7c46-bfe8-44fa-8670-877a590402ca",
        "type": "message",
        "text": "so starting from krib-live-cluster workflow with sledgehammer BootEnv how can I configure a workflow that would reboot the machine and come back up in discovery with sledgehammer BootEnv?",
        "user": "UF1LXSN15",
        "ts": "1546009514.191700"
    },
    {
        "client_msg_id": "13e8a4d6-f36c-43c5-8674-4631bf53f0e5",
        "type": "message",
        "text": "I need the reboot otherwise when I go to krib-live-cluster again mount-local-disks fails with\n```\nmkfs.xfs: \/dev\/sda1 contains a mounted filesystem\nCommand exited with status 1\n```",
        "user": "UF1LXSN15",
        "ts": "1546009845.193700"
    },
    {
        "client_msg_id": "70b91b27-4e47-412f-a953-aba139002bee",
        "type": "message",
        "text": "Clear the workflows, set the stage to local, then set the workflow back to krib-live-cluster.",
        "user": "U02DGQYK1",
        "ts": "1546010025.194600"
    },
    {
        "client_msg_id": "c4e295a7-e9bf-4d36-a2e4-b4a384230306",
        "type": "message",
        "text": "This should cause the runner to reboot the machine, but if you change the workflwo back to discovery during machine post, it will boot that env.",
        "user": "U02DGQYK1",
        "ts": "1546010059.195300"
    },
    {
        "client_msg_id": "52c892e7-b0d6-4bbe-b6db-a50b079951d8",
        "type": "message",
        "text": "that worked.  thank you",
        "user": "UF1LXSN15",
        "ts": "1546010108.195600"
    },
    {
        "client_msg_id": "a8a5e2e8-5749-418f-b04e-767ed9b78d6f",
        "type": "message",
        "text": "<@U02DGQYK1> is krib-helm stage working for you in HA mode?",
        "user": "UF1LXSN15",
        "ts": "1546010667.197500"
    },
    {
        "client_msg_id": "08710b53-4ca3-4f53-866a-22b11ed80ba3",
        "type": "message",
        "text": "mine is failing tiller install",
        "user": "UF1LXSN15",
        "ts": "1546010737.198200"
    },
    {
        "type": "message",
        "text": "",
        "files": [
            {
                "id": "FF30K1UUB",
                "created": 1546010748,
                "timestamp": 1546010748,
                "name": "-.js",
                "title": "Untitled",
                "mimetype": "text\/plain",
                "filetype": "javascript",
                "pretty_type": "JavaScript\/JSON",
                "user": "UF1LXSN15",
                "editable": true,
                "size": 365,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-FF30K1UUB\/-.js?t=xoxe-2458848645-514023324868-513587761153-b5d59617abb26f254de45b5edf5cc500",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-FF30K1UUB\/download\/-.js?t=xoxe-2458848645-514023324868-513587761153-b5d59617abb26f254de45b5edf5cc500",
                "permalink": "https:\/\/rackn.slack.com\/files\/UF1LXSN15\/FF30K1UUB\/-.js",
                "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-FF30K1UUB-8f8ea66e7a",
                "edit_link": "https:\/\/rackn.slack.com\/files\/UF1LXSN15\/FF30K1UUB\/-.js\/edit",
                "preview": "Waiting for Tiller...tiller-deploy-776b5cb874-vz7l5                 0\/1     Pending             0          98s\nCheck versions....(includes 10 second wait for Tiller initialize)\nClient: &version.Version{SemVer:\"v2.12.1\", GitCommit:\"02a47c7249b1fc6d8fd3b94e6b4babf9d818144e\", GitTreeState:\"clean\"}\nError: could not find a ready tiller pod\nCommand exited with status 1",
                "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre><span class=\"cm-variable\">Waiting<\/span> <span class=\"cm-keyword\">for<\/span> <span class=\"cm-variable\">Tiller<\/span><span class=\"cm-meta\">...<\/span><span class=\"cm-variable\">tiller<\/span><span class=\"cm-operator\">-<\/span><span class=\"cm-variable\">deploy<\/span><span class=\"cm-operator\">-<\/span><span class=\"cm-number\">776<\/span><span class=\"cm-variable\">b5cb874<\/span><span class=\"cm-operator\">-<\/span><span class=\"cm-variable\">vz7l5<\/span>                 <span class=\"cm-number\">0<\/span><span class=\"cm-operator\">\/<\/span><span class=\"cm-number\">1<\/span>     <span class=\"cm-variable\">Pending<\/span>             <span class=\"cm-number\">0<\/span>          <span class=\"cm-number\">98<\/span><span class=\"cm-variable\">s<\/span><\/pre><\/div>\n<div><pre><span class=\"cm-variable\">Check<\/span> <span class=\"cm-variable\">versions<\/span><span class=\"cm-meta\">...<\/span>.(<span class=\"cm-variable\">includes<\/span> <span class=\"cm-number\">10<\/span> <span class=\"cm-variable\">second<\/span> <span class=\"cm-variable\">wait<\/span> <span class=\"cm-keyword\">for<\/span> <span class=\"cm-variable\">Tiller<\/span> <span class=\"cm-variable\">initialize<\/span>)<\/pre><\/div>\n<div><pre><span class=\"cm-variable\">Client<\/span>: <span class=\"cm-operator\">&amp;<\/span><span class=\"cm-variable\">version<\/span>.<span class=\"cm-property\">Version<\/span>{<span class=\"cm-variable\">SemVer<\/span>:<span class=\"cm-string\">&quot;v2.12.1&quot;<\/span>, <span class=\"cm-variable\">GitCommit<\/span>:<span class=\"cm-string\">&quot;02a47c7249b1fc6d8fd3b94e6b4babf9d818144e&quot;<\/span>, <span class=\"cm-variable\">GitTreeState<\/span>:<span class=\"cm-string\">&quot;clean&quot;<\/span>}<\/pre><\/div>\n<div><pre><span class=\"cm-variable\">Error<\/span>: <span class=\"cm-variable\">could<\/span> <span class=\"cm-variable\">not<\/span> <span class=\"cm-variable\">find<\/span> <span class=\"cm-variable\">a<\/span> <span class=\"cm-variable\">ready<\/span> <span class=\"cm-variable\">tiller<\/span> <span class=\"cm-variable\">pod<\/span><\/pre><\/div>\n<div><pre><span class=\"cm-variable\">Command<\/span> <span class=\"cm-variable\">exited<\/span> <span class=\"cm-keyword\">with<\/span> <span class=\"cm-variable\">status<\/span> <span class=\"cm-number\">1<\/span><\/pre><\/div>\n<\/div>\n<\/div>\n",
                "lines": 5,
                "lines_more": 0,
                "preview_is_truncated": false
            }
        ],
        "upload": true,
        "user": "UF1LXSN15",
        "display_as_bot": false,
        "ts": "1546010749.198300"
    },
    {
        "client_msg_id": "50f09f6f-374d-4fd2-b4cd-8007236c39e9",
        "type": "message",
        "text": "I think I saw something like recently, but I havenâ€™t tried.",
        "user": "U02DGQYK1",
        "ts": "1546010787.198900"
    },
    {
        "client_msg_id": "7a2d2272-e6b6-4cfc-b03a-4c2cbdee4c1d",
        "type": "message",
        "text": "I was trying something else for <@U02DHRR2L> at the time.",
        "user": "U02DGQYK1",
        "ts": "1546010803.199200"
    },
    {
        "client_msg_id": "3d6f1277-15c3-4db6-b89b-15534d4346c5",
        "type": "message",
        "text": "reviewing... I never tested the krib-helm in HA setups",
        "user": "U02DHRR2L",
        "ts": "1546010834.199600"
    },
    {
        "client_msg_id": "72c04cca-c481-4f71-acbd-60326878c1bb",
        "type": "message",
        "text": "the nuance for that stage is that it assumes the kube.config file is resident on the master",
        "user": "U02DHRR2L",
        "ts": "1546010888.200300"
    },
    {
        "client_msg_id": "0f1dd24b-4a32-4911-a550-78edb1d132e9",
        "type": "message",
        "text": "it may be a safer assumption to always get the conf from the profile",
        "user": "U02DHRR2L",
        "ts": "1546010914.200800"
    },
    {
        "client_msg_id": "12e16548-5ebb-4733-aebf-e792d46275f3",
        "type": "message",
        "text": "would be a smart thing to test for file exists and then retrieve if it's missing",
        "user": "U02DHRR2L",
        "ts": "1546010939.201200"
    },
    {
        "client_msg_id": "271883de-148c-4f02-baf3-7bc904ca374f",
        "type": "message",
        "text": "I'm sure that tiller check test will fail without the credentials",
        "user": "U02DHRR2L",
        "ts": "1546010993.202300"
    },
    {
        "client_msg_id": "f913cc6b-c89f-47da-b396-c7d5d4e4ab1b",
        "type": "message",
        "text": "<@UF1LXSN15> ^^",
        "user": "U02DHRR2L",
        "ts": "1546011016.202500"
    },
    {
        "client_msg_id": "ef671d0d-2886-45de-b607-e8bd971e2760",
        "type": "message",
        "text": "okay",
        "user": "UF1LXSN15",
        "ts": "1546011025.202700"
    },
    {
        "client_msg_id": "71a519a2-3305-4f80-a63d-9479e19eb536",
        "type": "message",
        "text": "I'm testing again with non-ha to make sure it's working there still",
        "user": "UF1LXSN15",
        "ts": "1546011079.203200"
    },
    {
        "client_msg_id": "8628dc67-665d-4430-85fa-4d557d012f87",
        "type": "message",
        "text": "<@UBU0BPRA9> <@UF1LXSN15> - tip provision-content should have your changes in it now.",
        "user": "U02DGQYK1",
        "ts": "1546012663.203800"
    },
    {
        "client_msg_id": "82688e97-7edf-4a56-85e1-a6993f96e6bf",
        "type": "message",
        "text": "Thanks",
        "user": "U02DGQYK1",
        "ts": "1546012675.204000",
        "reactions": [
            {
                "name": "+1",
                "users": [
                    "UF1LXSN15",
                    "UBU0BPRA9"
                ],
                "count": 2
            }
        ]
    },
    {
        "client_msg_id": "fb988bb1-52c7-4a30-a579-0286f222e773",
        "type": "message",
        "text": "good deal",
        "user": "UF1LXSN15",
        "ts": "1546012873.204400"
    },
    {
        "client_msg_id": "1ca9c247-92b8-43a9-ae2f-6058fe277109",
        "type": "message",
        "text": "<@U02DGQYK1> does this accurately show what you're going for with the krib ha + metallb setup? <https:\/\/docs.platform9.com\/assets\/pmk-1276.png>",
        "user": "UF1LXSN15",
        "ts": "1546014568.205600",
        "attachments": [
            {
                "fallback": "892x479px image",
                "image_url": "https:\/\/docs.platform9.com\/assets\/pmk-1276.png",
                "image_width": 892,
                "image_height": 479,
                "image_bytes": 92885,
                "from_url": "https:\/\/docs.platform9.com\/assets\/pmk-1276.png",
                "id": 1,
                "original_url": "https:\/\/docs.platform9.com\/assets\/pmk-1276.png"
            }
        ]
    },
    {
        "client_msg_id": "5c303e9e-8c35-459d-8854-9ae0375d2df4",
        "type": "message",
        "text": "then tack on istio for ingress",
        "user": "UF1LXSN15",
        "ts": "1546014629.206200"
    },
    {
        "client_msg_id": "ed7df8ad-30a6-499b-811c-7a5ac246be6f",
        "type": "message",
        "text": "I think so.  Need to think about it some more.",
        "user": "U02DGQYK1",
        "ts": "1546015037.206500"
    },
    {
        "client_msg_id": "6b4aee02-cc16-484c-b911-b5b7a4564831",
        "type": "message",
        "text": "can't use metallb for the API becase chicken\/egg so need keepalived",
        "user": "UF1LXSN15",
        "ts": "1546015204.207500"
    },
    {
        "client_msg_id": "8a42387c-b856-48e0-a86c-96b83354bd15",
        "type": "message",
        "text": "but then use metallb for any other services",
        "user": "UF1LXSN15",
        "ts": "1546015221.207900"
    },
    {
        "client_msg_id": "f7bd697e-c3f2-4a44-8319-aaea07fdc91d",
        "type": "message",
        "text": "Yes - I think that makes sense.",
        "user": "U02DGQYK1",
        "ts": "1546015474.208100"
    },
    {
        "client_msg_id": "e0c3abe4-14c3-4ac0-8dd6-30902991b1df",
        "type": "message",
        "text": "<@U02DHRR2L> ruled out the kubecrl admin.conf being the issue.  If I look at the cluster there is a tiller pod but it's stuck in pending",
        "user": "UF1LXSN15",
        "ts": "1546021795.209000"
    },
    {
        "client_msg_id": "6dcbbc54-6601-44bf-8d99-41b84361645c",
        "type": "message",
        "text": "`0\/3 nodes are available: 3 node(s) had taints that the pod didn't tolerate.`",
        "user": "UF1LXSN15",
        "ts": "1546021801.209200"
    },
    {
        "client_msg_id": "1f0941d9-c9f1-4ebd-b083-345410e2d707",
        "type": "message",
        "text": "fix is `kubectl taint nodes --all <http:\/\/node-role.kubernetes.io\/master-|node-role.kubernetes.io\/master->` because all I had in the cluster were 3 masters",
        "user": "UF1LXSN15",
        "ts": "1546031279.209600"
    },
    {
        "client_msg_id": "ca8e1952-a8e3-4897-9ac4-276c76ea7760",
        "type": "message",
        "text": "and that is needed because krib-kubeadm.cfg.tmpl add NoSchedule taints to all masters",
        "user": "UF1LXSN15",
        "ts": "1546031829.210400"
    },
    {
        "type": "message",
        "text": "",
        "files": [
            {
                "id": "FF39646UA",
                "created": 1546031841,
                "timestamp": 1546031841,
                "name": "-.php",
                "title": "Untitled",
                "mimetype": "text\/plain",
                "filetype": "php",
                "pretty_type": "PHP",
                "user": "UF1LXSN15",
                "editable": true,
                "size": 172,
                "mode": "snippet",
                "is_external": false,
                "external_type": "",
                "is_public": true,
                "public_url_shared": false,
                "display_as_bot": false,
                "username": "",
                "url_private": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-FF39646UA\/-.php?t=xoxe-2458848645-514023324868-513587761153-b5d59617abb26f254de45b5edf5cc500",
                "url_private_download": "https:\/\/files.slack.com\/files-pri\/T02DGQYJZ-FF39646UA\/download\/-.php?t=xoxe-2458848645-514023324868-513587761153-b5d59617abb26f254de45b5edf5cc500",
                "permalink": "https:\/\/rackn.slack.com\/files\/UF1LXSN15\/FF39646UA\/-.php",
                "permalink_public": "https:\/\/slack-files.com\/T02DGQYJZ-FF39646UA-03c5620df0",
                "edit_link": "https:\/\/rackn.slack.com\/files\/UF1LXSN15\/FF39646UA\/-.php\/edit",
                "preview": "nodeRegistration:\n  criSocket: \"{{ .Param \"krib\/cluster-cri-socket\" }}\"\n  name: {{ .Machine.Name }}\n  taints:\n  - effect: NoSchedule",
                "preview_highlight": "<div class=\"CodeMirror cm-s-default CodeMirrorServer\" oncopy=\"if(event.clipboardData){event.clipboardData.setData('text\/plain',window.getSelection().toString().replace(\/\\u200b\/g,''));event.preventDefault();event.stopPropagation();}\">\n<div class=\"CodeMirror-code\">\n<div><pre>nodeRegistration:<\/pre><\/div>\n<div><pre>  criSocket: &quot;{{ .Param &quot;krib\/cluster-cri-socket&quot; }}&quot;<\/pre><\/div>\n<div><pre>  name: {{ .Machine.Name }}<\/pre><\/div>\n<div><pre>  taints:<\/pre><\/div>\n<div><pre>  - effect: NoSchedule<\/pre><\/div>\n<\/div>\n<\/div>\n",
                "lines": 6,
                "lines_more": 1,
                "preview_is_truncated": false
            }
        ],
        "upload": true,
        "user": "UF1LXSN15",
        "display_as_bot": false,
        "ts": "1546031842.210500"
    },
    {
        "client_msg_id": "485be632-7c39-4f28-8bda-d420e18b2346",
        "type": "message",
        "text": "fixed with PR",
        "user": "UF1LXSN15",
        "ts": "1546037141.211800"
    },
    {
        "client_msg_id": "6af4d53e-474e-4ebd-b993-50a43b27f341",
        "type": "message",
        "text": "and it all came up this time with metallb and istio ingress",
        "user": "UF1LXSN15",
        "ts": "1546037900.212400",
        "reactions": [
            {
                "name": "tada",
                "users": [
                    "U6QFVRJNB",
                    "U02DHRR2L",
                    "UBU0BPRA9"
                ],
                "count": 3
            }
        ]
    }
]